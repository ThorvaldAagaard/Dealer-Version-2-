<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN" "http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><!--This file was converted to xhtml by LibreOffice - see https://cgit.freedesktop.org/libreoffice/core/tree/filter/source/xslt for the code.--><head profile="http://dublincore.org/documents/dcmi-terms/"><meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8"/><title xml:lang="en-US">- no title specified</title><meta name="DCTERMS.title" content="" xml:lang="en-US"/><meta name="DCTERMS.language" content="en-US" scheme="DCTERMS.RFC4646"/><meta name="DCTERMS.source" content="http://xml.openoffice.org/odf2xhtml"/><meta name="DCTERMS.issued" content="2013-07-03T15:47:11" scheme="DCTERMS.W3CDTF"/><meta name="DCTERMS.modified" content="2023-03-20T21:35:47.890404214" scheme="DCTERMS.W3CDTF"/><meta name="DCTERMS.provenance" content="" xml:lang="en-US"/><meta name="DCTERMS.subject" content="," xml:lang="en-US"/><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" hreflang="en"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" hreflang="en"/><link rel="schema.DCTYPE" href="http://purl.org/dc/dcmitype/" hreflang="en"/><link rel="schema.DCAM" href="http://purl.org/dc/dcam/" hreflang="en"/><style type="text/css">
    @page {  }
    table { border-collapse:collapse; border-spacing:0; empty-cells:show }
    td, th { vertical-align:top; font-size:12pt;}
    h1, h2, h3, h4, h5, h6 { clear:both;}
    ol, ul { margin:0; padding:0;}
    li { list-style: none; margin:0; padding:0;}
    /* "li span.odfLiEnd" - IE 7 issue*/
    li span. { clear: both; line-height:0; width:0; height:0; margin:0; padding:0; }
    span.footnodeNumber { padding-right:1em; }
    span.annotation_style_by_filter { font-size:95%; font-family:Arial; background-color:#fff000;  margin:0; border:0; padding:0;  }
    span.heading_numbering { margin-right: 0.8rem; }* { margin:0;}
    .Contents_20_1 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; margin-left:0in; margin-right:0in; text-indent:0in; }
    .Contents_20_2 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; margin-left:0.1965in; margin-right:0in; text-indent:0in; }
    .Contents_20_3 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; margin-left:0.3929in; margin-right:0in; text-indent:0in; }
    .Contents_20_Heading { font-size:16pt; font-weight:bold; margin-bottom:0.0835in; margin-left:0in; margin-right:0in; margin-top:0.1665in; text-indent:0in; font-family:Liberation Sans, Arial; writing-mode:horizontal-tb; direction:ltr; }
    .Heading_20_1 { font-size:17pt; font-family:Arial; writing-mode:horizontal-tb; direction:ltr; margin-top:0.1701in; margin-bottom:0.0402in; font-weight:bold; }
    .P1 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P10 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-weight:normal; }
    .P100 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P101 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P102 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P103 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P104 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P105 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P106 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P107 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P108 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P109 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P11 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-weight:normal; }
    .P110 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P111 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P112 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P113 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P114 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P115 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P116 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P117 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-weight:normal; }
    .P118 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; color:#000000; font-weight:normal; }
    .P119 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; color:#000000; font-weight:normal; }
    .P12 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P120 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P121 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P124 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-style:italic; }
    .P125 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-style:italic; background-color:#fff5ce; }
    .P126 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; margin-left:0.4909in; margin-right:0in; text-align:left ! important; text-indent:-0.1965in; }
    .P127 { font-size:12pt; margin-bottom:0.0835in; margin-top:0in; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P128 { font-size:12pt; margin-bottom:0in; margin-top:0in; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; margin-left:0.4909in; margin-right:0in; text-align:left ! important; text-indent:-0.1965in; }
    .P129 { font-size:12pt; margin-bottom:0.0835in; margin-top:0in; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; margin-left:0.4909in; margin-right:0in; text-align:left ! important; text-indent:-0.1965in; }
    .P13 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-weight:normal; }
    .P14 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-style:normal; font-weight:normal; }
    .P15 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-style:normal; text-decoration:none ! important; font-weight:normal; }
    .P16 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-weight:bold; }
    .P17 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; text-decoration:underline; font-weight:normal; }
    .P18 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; text-decoration:underline; font-weight:bold; }
    .P19 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-style:normal; }
    .P2 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P20 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-style:normal; font-weight:bold; }
    .P21 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-style:normal; font-weight:normal; }
    .P22 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-style:normal; text-decoration:none ! important; font-weight:normal; }
    .P23 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-style:normal; text-decoration:none ! important; font-weight:bold; }
    .P24 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-style:normal; text-decoration:none ! important; font-weight:bold; }
    .P25 { font-size:12pt; font-family:Courier New; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P26 { font-size:10pt; font-family:Courier New; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P27 { font-size:10pt; font-family:Courier New; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-weight:normal; }
    .P28 { font-size:10pt; font-family:Courier New; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-style:normal; font-weight:normal; }
    .P29 { font-size:10pt; font-family:Courier New; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-style:normal; text-decoration:none ! important; }
    .P30 { font-size:10pt; font-family:Courier New; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-style:normal; text-decoration:none ! important; font-weight:normal; }
    .P31 { font-size:10pt; font-family:Courier New; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-style:normal; font-weight:bold; }
    .P32 { font-size:12pt; font-family:Courier New; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-style:normal; text-decoration:none ! important; font-weight:normal; }
    .P33 { font-size:12pt; font-family:Courier New; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-style:normal; font-weight:normal; }
    .P34 { font-size:12pt; font-family:Courier New; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-style:normal; font-weight:normal; }
    .P35 { font-size:12pt; font-family:Courier New; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-style:normal; }
    .P36 { font-size:11pt; font-family:Courier New; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-style:normal; font-weight:normal; }
    .P37 { font-size:11pt; font-family:Courier New; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P38 { font-size:12pt; font-family:Courier New; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-style:normal; font-weight:normal; }
    .P39 { font-size:12pt; font-family:Courier New; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-style:normal; font-weight:bold; }
    .P40 { font-size:12pt; font-family:Courier New; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-style:normal; text-decoration:none ! important; font-weight:normal; }
    .P41 { font-size:12pt; font-family:Courier New; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-weight:normal; }
    .P42 { font-size:12pt; font-family:Courier New; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P43 { font-size:9pt; font-family:Courier New; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-style:normal; font-weight:normal; }
    .P44 { font-size:12pt; font-family:Courier New; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-weight:normal; }
    .P45 { font-size:12pt; font-family:Courier New; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-weight:normal; }
    .P46 { font-size:12pt; font-family:Courier New; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; text-decoration:none ! important; font-weight:normal; }
    .P47 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-weight:bold; }
    .P48 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-weight:bold; }
    .P49 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; text-decoration:none ! important; }
    .P5 { font-size:10pt; margin-bottom:0in; margin-top:0in; font-family:Liberation Mono, Courier New; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P50 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; text-decoration:none ! important; font-weight:bold; }
    .P51 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; text-decoration:none ! important; font-weight:normal; }
    .P52 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P53 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; text-decoration:underline; font-weight:normal; }
    .P54 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; text-decoration:underline; font-weight:bold; }
    .P55 { font-size:15pt; font-family:Arial; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-weight:bold; }
    .P56 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-style:italic; }
    .P57 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-style:italic; font-weight:normal; }
    .P58 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P59 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; color:#000000; font-weight:normal; }
    .P6 { font-size:10pt; margin-bottom:0in; margin-top:0in; font-family:Liberation Mono, Courier New; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; color:#0000ff; }
    .P60 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P61 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P62 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P63 { font-size:12pt; margin-bottom:0.0835in; margin-top:0in; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P64 { font-size:12pt; margin-bottom:0.0835in; margin-top:0in; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P65 { font-size:16pt; font-weight:bold; margin-bottom:0.0835in; margin-left:0in; margin-right:0in; margin-top:0.1665in; text-indent:0in; font-family:Liberation Sans, Arial; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P66 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P67 { font-size:10pt; margin-bottom:0.1965in; margin-top:0in; font-family:Liberation Mono, Courier New; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P68 { font-size:10pt; margin-bottom:0.1965in; margin-top:0in; font-family:Liberation Mono, Courier New; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; color:#0000ff; }
    .P69 { font-size:10pt; margin-bottom:0in; margin-top:0in; font-family:Liberation Mono, Courier New; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P7 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P70 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; }
    .P71 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; }
    .P72 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; }
    .P73 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; margin-left:0.5in; margin-right:0in; text-align:left ! important; text-indent:0in; }
    .P74 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; margin-left:0.4925in; margin-right:0in; text-align:left ! important; text-indent:0in; text-decoration:none ! important; font-weight:normal; }
    .P75 { font-size:12pt; margin-bottom:0.0835in; margin-top:0in; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; text-decoration:none ! important; }
    .P76 { font-size:12pt; margin-bottom:0.0835in; margin-top:0in; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-style:italic; text-decoration:none ! important; }
    .P77 { font-size:12pt; margin-bottom:0.0835in; margin-top:0in; font-family:Courier New; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; text-decoration:none ! important; }
    .P78 { font-size:28pt; font-weight:bold; margin-bottom:0.0835in; margin-top:0.1665in; text-align:center ! important; font-family:Liberation Sans, Arial; writing-mode:horizontal-tb; direction:ltr; }
    .P79 { font-size:12pt; margin-left:0in; margin-right:0in; text-indent:0in; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; }
    .P8 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P80 { font-size:12pt; margin-left:0.1965in; margin-right:0in; text-indent:0in; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; }
    .P81 { font-size:12pt; margin-left:0.3929in; margin-right:0in; text-indent:0in; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; }
    .P82 { font-size:17pt; font-weight:bold; margin-bottom:0.0402in; margin-top:0.1701in; font-family:Arial; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P83 { font-size:17pt; font-weight:bold; margin-bottom:0.0402in; margin-top:0.1701in; font-family:Arial; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P84 { font-size:17pt; font-weight:normal; margin-bottom:0.0402in; margin-top:0.1701in; font-family:Arial; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; font-style:normal; }
    .P85 { font-size:17pt; font-weight:bold; margin-bottom:0.0402in; margin-top:0.1701in; font-family:Arial; writing-mode:horizontal-tb; direction:ltr; margin-left:0in; margin-right:0in; text-align:left ! important; text-indent:0in; }
    .P86 { font-size:16pt; font-weight:bold; margin-bottom:0.0835in; margin-top:0.139in; font-family:Liberation Sans, Arial; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P87 { color:#808080; font-size:14pt; font-weight:bold; margin-bottom:0.0835in; margin-top:0.0972in; font-family:Liberation Sans, Arial; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P88 { color:#808080; font-size:14pt; font-weight:bold; margin-bottom:0.0835in; margin-top:0.0972in; font-family:Liberation Sans, Arial; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P89 { color:#808080; font-size:14pt; font-weight:bold; margin-bottom:0.0835in; margin-top:0.0972in; font-family:Liberation Sans, Arial; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P9 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P90 { color:#000000; font-size:12pt; font-weight:bold; margin-bottom:0.0953in; margin-top:0.1902in; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; margin-left:0in; margin-right:0in; line-height:110%; text-align:left ! important; text-indent:0in; letter-spacing:normal; font-style:normal; }
    .P91 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P92 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; }
    .P94 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P95 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P96 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P97 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P98 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .P99 { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; text-align:left ! important; }
    .Standard { font-size:12pt; font-family:Liberation Serif, Times New Roman; writing-mode:horizontal-tb; direction:ltr; }
    .Emphasis { font-style:italic; }
    .Internet_20_link { color:#000080; text-decoration:underline; }
    .T100 { font-size:12pt; text-decoration:underline; }
    .T101 { font-size:12pt; text-decoration:underline; font-weight:normal; }
    .T102 { font-size:12pt; }
    .T103 { color:#000000; }
    .T104 { color:#000000; font-size:12pt; }
    .T105 { color:#000000; font-size:12pt; font-style:italic; text-decoration:none ! important; font-weight:normal; }
    .T106 { color:#000000; font-size:12pt; font-style:italic; text-decoration:none ! important; font-weight:bold; }
    .T107 { color:#000000; font-size:12pt; font-weight:normal; }
    .T108 { color:#000000; font-style:normal; text-decoration:none ! important; font-weight:normal; }
    .T109 { color:#000000; font-style:normal; text-decoration:none ! important; font-weight:bold; }
    .T11 { font-style:normal; }
    .T110 { color:#000000; font-style:normal; text-decoration:underline; font-weight:normal; }
    .T111 { color:#000000; font-family:Courier New; font-style:normal; text-decoration:none ! important; }
    .T112 { color:#000000; font-family:Courier New; font-style:normal; text-decoration:none ! important; font-weight:normal; }
    .T113 { color:#000000; font-style:italic; text-decoration:none ! important; font-weight:normal; }
    .T114 { color:#000000; font-style:italic; font-weight:normal; }
    .T115 { color:#000000; text-decoration:none ! important; font-weight:bold; }
    .T116 { color:#000000; font-family:Liberation Serif, Times New Roman; font-size:12pt; }
    .T117 { color:#000000; font-family:Liberation Serif, Times New Roman; font-size:12pt; font-weight:normal; }
    .T118 { color:#000000; font-family:Liberation Serif, Times New Roman; }
    .T119 { color:#000000; font-weight:normal; }
    .T12 { font-style:normal; font-weight:normal; }
    .T120 { color:#000000; font-weight:normal; }
    .T121 { color:#000000; font-weight:normal; }
    .T122 { color:#000000; font-weight:normal; }
    .T123 { color:#000000; font-weight:bold; }
    .T124 { color:#000000; font-weight:bold; }
    .T126 { font-size:10pt; }
    .T127 { font-size:10pt; background-color:#ffff00; }
    .T128 { color:#0000ff; }
    .T129 { color:#0000ff; font-style:normal; text-decoration:none ! important; }
    .T13 { font-style:normal; text-decoration:underline; font-weight:normal; }
    .T130 { color:#0000ff; }
    .T131 { background-color:#ffff00; }
    .T132 { color:#c9211e; font-weight:bold; }
    .T133 { color:#c9211e; font-size:12pt; font-weight:bold; }
    .T134 { color:#c9211e; font-size:12pt; font-weight:normal; }
    .T135 { color:#c9211e; font-size:12pt; font-style:normal; text-decoration:none ! important; font-weight:normal; }
    .T136 { color:#c9211e; font-family:Courier New; font-size:12pt; font-weight:bold; }
    .T137 { color:#c9211e; font-family:Courier New; font-size:12pt; font-style:normal; text-decoration:none ! important; font-weight:bold; }
    .T138 { color:#c9211e; font-family:Courier New; font-size:10pt; font-weight:bold; }
    .T139 { color:#c9211e; font-family:Courier New; font-size:10pt; font-style:normal; font-weight:bold; }
    .T14 { font-style:normal; text-decoration:underline; font-weight:bold; }
    .T140 { color:#c9211e; font-family:Courier New; font-size:10pt; font-style:normal; text-decoration:none ! important; font-weight:bold; }
    .T141 { color:#c9211e; font-family:Courier New; font-weight:normal; }
    .T142 { color:#c9211e; font-family:Courier New; font-style:normal; font-weight:bold; }
    .T143 { color:#c9211e; font-weight:normal; }
    .T144 { color:#c9211e; font-weight:normal; }
    .T145 { color:#c9211e; font-style:normal; font-weight:bold; }
    .T146 { color:#c9211e; vertical-align:super; font-size:58%;font-size:12pt; font-style:italic; }
    .T147 { color:#c9211e; vertical-align:super; font-size:58%;font-size:12pt; font-weight:bold; background-color:#ffff00; }
    .T148 { color:#168253; font-size:12pt; font-weight:bold; }
    .T149 { font-size:16pt; font-weight:bold; }
    .T15 { font-style:normal; font-weight:bold; }
    .T151 { font-family:Liberation Serif, Times New Roman; }
    .T152 { color:#ff0000; font-family:Courier New; font-size:10pt; font-weight:bold; }
    .T153 { color:#24292f; font-family:Courier New; font-size:12pt; letter-spacing:normal; font-style:normal; font-weight:normal; }
    .T154 { font-family:Courier New; font-size:12pt; letter-spacing:normal; font-style:normal; text-decoration:none ! important; font-weight:normal; background-color:#ffffff; }
    .T155 { color:#000000; font-size:12pt; letter-spacing:normal; font-style:normal; font-weight:normal; }
    .T156 { color:#000000; font-size:12pt; letter-spacing:normal; font-style:normal; font-weight:normal; }
    .T157 { color:#000000; font-size:12pt; letter-spacing:normal; font-style:normal; text-decoration:underline; font-weight:normal; }
    .T158 { color:#000000; font-family:Courier New; font-size:12pt; letter-spacing:normal; font-style:normal; font-weight:normal; }
    .T159 { color:#333333; font-size:12pt; letter-spacing:normal; font-style:normal; font-weight:normal; }
    .T16 { font-style:normal; font-weight:bold; }
    .T160 { font-size:17pt; font-weight:bold; }
    .T161 { color:#000080; text-decoration:underline; }
    .T162 { vertical-align:super; font-size:58%;}
    .T163 { font-size:10pt; }
    .T166 { color:#3465a4; font-weight:bold; }
    .T167 { color:#3465a4; font-weight:bold; }
    .T168 { color:#3465a4; font-weight:bold; }
    .T169 { color:#127622; font-weight:bold; }
    .T17 { font-style:normal; text-decoration:none ! important; }
    .T175 { font-family:Liberation Serif, Times New Roman; font-size:12pt; }
    .T176 { font-family:Liberation Serif, Times New Roman; font-size:12pt; }
    .T177 { font-family:Courier New; font-size:12pt; }
    .T179 { font-family:Courier New; font-size:12pt; }
    .T18 { font-style:normal; text-decoration:none ! important; font-weight:normal; }
    .T19 { font-style:normal; text-decoration:none ! important; font-weight:bold; }
    .T20 { font-style:normal; text-decoration:none ! important; font-weight:bold; }
    .T21 { text-decoration:underline; }
    .T22 { text-decoration:underline; font-weight:normal; }
    .T23 { text-decoration:underline; font-weight:bold; }
    .T24 { text-decoration:none ! important; }
    .T25 { text-decoration:none ! important; font-weight:normal; }
    .T26 { text-decoration:none ! important; font-weight:bold; }
    .T27 { font-family:Courier New; }
    .T28 { font-family:Courier New; font-style:normal; font-weight:normal; }
    .T29 { font-family:Courier New; font-style:normal; font-weight:normal; }
    .T3 { font-size:32pt; }
    .T30 { font-family:Courier New; font-style:normal; }
    .T31 { font-family:Courier New; font-style:normal; font-weight:bold; }
    .T32 { font-family:Courier New; font-style:normal; text-decoration:none ! important; }
    .T33 { font-family:Courier New; font-style:normal; text-decoration:none ! important; font-weight:normal; }
    .T34 { font-family:Courier New; font-style:normal; text-decoration:none ! important; font-weight:bold; }
    .T35 { font-family:Courier New; font-style:normal; }
    .T36 { font-family:Courier New; font-weight:normal; }
    .T37 { font-family:Courier New; font-weight:normal; }
    .T38 { font-family:Courier New; font-style:italic; font-weight:normal; }
    .T39 { font-family:Courier New; font-style:italic; }
    .T4 { font-weight:bold; }
    .T40 { font-family:Courier New; text-decoration:none ! important; font-weight:normal; }
    .T41 { font-family:Courier New; font-size:12pt; font-style:normal; }
    .T42 { font-family:Courier New; font-size:12pt; font-style:normal; font-weight:normal; }
    .T43 { font-family:Courier New; font-size:12pt; font-style:normal; font-weight:bold; }
    .T44 { font-family:Courier New; font-size:12pt; font-style:normal; text-decoration:none ! important; font-weight:normal; }
    .T45 { font-family:Courier New; font-size:12pt; }
    .T46 { font-family:Courier New; font-size:12pt; }
    .T47 { font-family:Courier New; font-size:12pt; font-weight:bold; }
    .T48 { font-family:Courier New; font-size:12pt; font-weight:normal; }
    .T49 { font-family:Courier New; font-size:12pt; font-weight:normal; background-color:#ffff00; }
    .T5 { font-weight:bold; }
    .T50 { font-family:Courier New; font-size:12pt; font-weight:normal; background-color:#ff0000; }
    .T51 { font-family:Courier New; font-size:12pt; font-weight:normal; }
    .T52 { font-family:Courier New; font-size:12pt; font-style:italic; font-weight:normal; }
    .T53 { font-family:Courier New; font-size:12pt; }
    .T54 { font-family:Courier New; font-weight:bold; }
    .T55 { font-family:Courier New; font-size:10pt; }
    .T56 { font-family:Courier New; font-size:10pt; }
    .T57 { font-family:Courier New; font-size:10pt; font-weight:normal; }
    .T58 { font-family:Courier New; font-size:10pt; font-weight:normal; }
    .T59 { font-family:Courier New; font-size:10pt; font-style:normal; font-weight:normal; }
    .T6 { font-weight:bold; }
    .T60 { font-family:Courier New; font-size:10pt; font-style:normal; font-weight:normal; }
    .T61 { font-family:Courier New; font-size:10pt; font-style:normal; text-decoration:none ! important; font-weight:normal; }
    .T62 { font-family:Courier New; font-size:10pt; font-style:normal; text-decoration:none ! important; font-weight:normal; }
    .T63 { font-family:Courier New; font-size:10pt; font-style:normal; text-decoration:none ! important; font-weight:bold; }
    .T64 { font-family:Courier New; font-size:10pt; font-weight:bold; }
    .T65 { font-family:Courier New; }
    .T66 { font-family:Courier New; font-size:9pt; font-style:normal; font-weight:normal; }
    .T67 { font-family:Courier New; font-size:9pt; font-style:normal; font-weight:normal; }
    .T68 { font-family:Courier New; font-size:10.5pt; }
    .T69 { font-family:Courier New; font-size:10.5pt; }
    .T7 { font-weight:bold; }
    .T70 { font-style:italic; }
    .T71 { font-style:italic; font-weight:normal; }
    .T72 { font-style:italic; font-weight:bold; }
    .T73 { font-style:italic; text-decoration:none ! important; font-weight:normal; }
    .T74 { font-style:italic; text-decoration:underline; }
    .T75 { font-style:italic; text-decoration:underline; font-weight:normal; }
    .T76 { font-weight:normal; }
    .T77 { font-weight:normal; }
    .T78 { font-weight:normal; }
    .T79 { font-weight:normal; }
    .T8 { font-weight:bold; }
    .T80 { font-weight:normal; }
    .T81 { font-weight:normal; }
    .T82 { font-weight:normal; background-color:#ffff00; }
    .T83 { font-weight:normal; }
    .T84 { font-size:12pt; }
    .T85 { font-size:12pt; }
    .T86 { font-size:12pt; }
    .T87 { font-size:12pt; font-weight:bold; }
    .T88 { font-size:12pt; font-weight:bold; }
    .T89 { font-size:12pt; font-style:italic; font-weight:normal; }
    .T9 { font-family:Arial; font-size:32pt; font-weight:bold; }
    .T90 { font-size:12pt; font-style:italic; text-decoration:none ! important; font-weight:normal; }
    .T91 { font-size:12pt; font-style:normal; }
    .T92 { font-size:12pt; font-style:normal; font-weight:normal; }
    .T93 { font-size:12pt; font-style:normal; font-weight:normal; }
    .T94 { font-size:12pt; font-style:normal; font-weight:bold; }
    .T95 { font-size:12pt; font-style:normal; text-decoration:none ! important; font-weight:normal; }
    .T96 { font-size:12pt; font-style:normal; text-decoration:none ! important; font-weight:bold; }
    .T97 { font-size:12pt; font-style:normal; text-decoration:underline; font-weight:normal; }
    .T98 { font-size:12pt; font-weight:normal; }
    .T99 { font-size:12pt; font-weight:normal; background-color:#ffff00; }
    .WW8Num10z0 { font-family:Symbol; }
    .WW8Num11z0 { font-family:Symbol; }
    .WW8Num12z0 { font-family:Symbol; }
    .WW8Num13z0 { font-family:Symbol; }
    .WW8Num14z0 { font-family:Symbol; }
    .WW8Num15z0 { font-family:Symbol; }
    .WW8Num16z0 { font-family:Symbol; }
    .WW8Num17z0 { font-family:Symbol; }
    .WW8Num18z0 { font-family:Symbol; }
    .WW8Num19z0 { font-family:Symbol; }
    .WW8Num20z0 { font-family:Symbol; }
    .WW8Num21z0 { font-family:Symbol; }
    .WW8Num22z0 { font-family:Symbol; }
    .WW8Num23z0 { font-family:Symbol; }
    .WW8Num24z0 { font-family:Symbol; }
    .WW8Num2z0 { font-family:Symbol; }
    .WW8Num3z0 { font-family:Symbol; }
    .WW8Num4z0 { font-family:Symbol; }
    .WW8Num5z0 { font-family:Symbol; }
    .WW8Num6z0 { font-family:Symbol; }
    .WW8Num7z0 { font-family:Symbol; }
    .WW8Num8z0 { font-family:Symbol; }
    .WW8Num9z0 { font-family:Symbol; }
    /* ODF styles with no properties representable as CSS */
    .Sect1 .Index_20_Link .T1 .T10 .T125 .T150 .T164 .T165 .T170 .T171 .T173 .T174 .T178 .T180 .T181 .T182 .T183 .T184 .T185 .T186 .T187 .WW8Num1z0 .WW8Num1z1 .WW8Num1z2 .WW8Num1z3 .WW8Num1z4 .WW8Num1z5 .WW8Num1z6 .WW8Num1z7 .WW8Num1z8 .WW8Num2z1 .WW8Num2z2 .WW8Num2z3 .WW8Num2z4 .WW8Num2z5 .WW8Num2z6 .WW8Num2z7 .WW8Num2z8  { }
    </style></head><body dir="ltr" style="max-width:8.5in;margin-top:0.7874in; margin-bottom:0.7874in; margin-left:0.7874in; margin-right:0.7874in; "><p class="P78"><a id="TOC"/><span class="T9">Dealer V2.5 User Documentation</span><span class="T3">                                                 </span> </p><p class="P65">Table of Contents</p><table border="0" cellspacing="0" cellpadding="0" class="Sect1"><colgroup/><tr><td><p class="P79"><a href="#__RefHeading___Toc2466_3691053158">Preamble</a></p></td></tr><tr><td><p class="P79"><a href="#__RefHeading___Toc2546_3691053158">Description</a></p></td></tr><tr><td><p class="P79"><a href="#__RefHeading___Toc2468_3691053158">V2.0 Release Notes</a></p></td></tr><tr><td><p class="P81"><a href="#__RefHeading___Toc2548_3691053158">Major Changes</a></p></td></tr><tr><td><p class="P81"><a href="#__RefHeading___Toc2550_3691053158">Extra Functionality</a></p></td></tr><tr><td><p class="P81"><a href="#__RefHeading___Toc2552_3691053158">Minor Bug Fixes</a></p></td></tr><tr><td><p class="P81"><a href="#__RefHeading___Toc2554_3691053158">Removed Functionality</a></p></td></tr><tr><td><p class="P79"><a href="#__RefHeading___Toc2470_3691053158">Conventions Used in this Document</a></p></td></tr><tr><td><p class="P79"><a href="#__RefHeading___Toc2472_3691053158">Definitions of Terms</a></p></td></tr><tr><td><p class="P79"><a href="#__RefHeading___Toc2474_3691053158">The Input File</a></p></td></tr><tr><td><p class="P80"><a href="#__RefHeading___Toc2476_3691053158">Environment Set-up &amp; Scripting</a></p></td></tr><tr><td><p class="P80"><a href="#__RefHeading___Toc2556_3691053158">Variables</a></p></td></tr><tr><td><p class="P80"><a href="#__RefHeading___Toc2478_3691053158">Condition Statement</a></p></td></tr><tr><td><p class="P81"><a href="#__RefHeading___Toc2480_3691053158">Commonly Used Clauses</a></p></td></tr><tr><td><p class="P81"><a href="#__RefHeading___Toc2482_3691053158">Clauses Using Dotnums</a></p></td></tr><tr><td><p class="P81"><a href="#__RefHeading___Toc2486_3691053158">Double Dummy Solvers ( DDSx2, Par, and GIB Tricks )</a></p></td></tr><tr><td><p class="P81"><a href="#__RefHeading___Toc9064_859034914">External Helper Program</a></p></td></tr><tr><td><p class="P81"><a href="#__RefHeading___Toc7140_2696138024">Arithmetic and Logical Operators</a></p></td></tr><tr><td><p class="P80"><a href="#__RefHeading___Toc2488_3691053158">The Action Statement</a></p></td></tr><tr><td><p class="P81"><a href="#__RefHeading___Toc2565_3691053158">General Description</a></p></td></tr><tr><td><p class="P81"><a href="#__RefHeading___Toc2567_3691053158">Actions That Produce Output at End of Run</a></p></td></tr><tr><td><p class="P81"><a href="#__RefHeading___Toc2490_3691053158">Actions Outputting for Each Interesting Deal</a></p></td></tr><tr><td><p class="P79"><a href="#__RefHeading___Toc21319_670075485">CSV Reports</a></p></td></tr><tr><td><p class="P79"><a href="#__RefHeading___Toc6919_1409286116">François Dellacherie Shape Function</a></p></td></tr><tr><td><p class="P81"><a href="#__RefHeading___Toc6921_1409286116">Introduction To FDshape</a></p></td></tr><tr><td><p class="P81"><a href="#__RefHeading___Toc6923_1409286116">FDshape Distribution Operators</a></p></td></tr><tr><td><p class="P81"><a href="#__RefHeading___Toc6925_1409286116">Caveats re FDshape</a></p></td></tr><tr><td><p class="P79"><a href="#__RefHeading___Toc6857_3691053158">A Complete Example from Dealer Version 1</a></p></td></tr><tr><td><p class="P79"><a href="#__RefHeading___Toc8396_428733583">End of Run Statistics</a></p></td></tr><tr><td><p class="P79"><a href="#__RefHeading___Toc7797_963076609">Command Line Parameters</a></p></td></tr><tr><td><p class="P81"><a href="#__RefHeading___Toc2943_3691053158">Example Simulation Exercise</a></p></td></tr><tr><td><p class="P79"><a href="#__RefHeading___Toc7101_3691053158">Scripting the Input File</a></p></td></tr><tr><td><p class="P79"><a href="#__RefHeading___Toc20444_2914024446">Running Dealer</a></p></td></tr><tr><td><p class="P79"><a href="#__RefHeading___Toc20446_2914024446">Installing and Building Dealer -- Linux</a></p></td></tr><tr><td><p class="P79"><a href="#__RefHeading___Toc7799_963076609">Installing and Building Dealer -- Windows</a></p></td></tr><tr><td><p class="P81"><a href="#__RefHeading___Toc6608_3989013113">Install and Run on WSL without (Re) Building</a></p></td></tr><tr><td><p class="P81"><a href="#__RefHeading___Toc6610_3989013113">Rebuild Dealer V2 from Source on WSL</a></p></td></tr><tr><td><p class="P81"><a href="#__RefHeading___Toc6612_3989013113">Running Dealer on WSL after Install and/or Build</a></p></td></tr><tr><td><p class="P79"><a href="#__RefHeading___Toc8940_2019595254">Creating a Custom Evaluation Server</a></p></td></tr><tr><td><p class="P79"><a href="#__RefHeading___Toc18172_2383521750">Glossary of Reserved Words in Dealer</a></p></td></tr><tr><td><p class="P79"><a href="#__RefHeading___Toc18174_2383521750">Appendix I. -- Linux Command Line Quickstart</a></p></td></tr><tr><td><p class="P81"><a href="#__RefHeading___Toc18176_2383521750">Linux Command Line Basics</a></p></td></tr><tr><td><p class="P79"><a href="#__RefHeading___Toc2945_3691053158">Appendix II. Authors</a></p></td></tr><tr><td><p class="P79"><a href="#__RefHeading___Toc6770_3691053158">Appendix III. Copyright</a></p></td></tr><tr><td><p class="P80"><a href="#__RefHeading___Toc6772_3691053158">Copyright Version 2.0</a></p></td></tr><tr><td><p class="P79"><a href="#__RefHeading___Toc7837_1294319977">Appendix IV. The KnR (cccc) Agorithm Explained</a></p></td></tr><tr><td><p class="P80"><a href="#__RefHeading___Toc17457_1245427423">Additional Comments by JGM re KnR Algorithm</a></p></td></tr><tr><td><p class="P79"><a href="#__RefHeading___Toc7506_3077954580">Appendix V. R. Pavlicek's Library of Solved Deals.</a></p></td></tr></table><p class="P7">---------------------------------------------------------------------------------------</p><h1 class="P82"><a id="a__Preamble"><span/></a><a id="__RefHeading___Toc2466_3691053158"/>Preamble</h1><p class="P7">This release of Dealer, a program originally written by Hans van Staveren and then maintained and extended by Henk Uijterwaal and others (see the Authors section), in the 1990's has been extensively modified by JGM in 2022.  JGM has decided to call this release Version 2.0 because the modifications have not tried to maintain backwards compatibility with the original release. </p><p class="P7">When the program was first written, circa 1989, there were two things that were true then that are not true in 2022: firstly Linux did not yet exist, even Windows 95 was not available<span class="T173">,</span> and secondly hardware of the day was severely limited. <br/>As of 2022, Linux has pretty much taken over the Unix/Posix space, especially for systems that would be interested in a bridge program. Even Windows, via Windows Subsystem for Linux (WSL) version 2, can run almost all  Linux command line programs, and even many Xwindow based programs natively with no porting effort required. <br/>Whereas in the '90s 32 bit systems for personal use were quite expensive, in 2022, 64 bit systems are common and over 1000 times faster than what was available then. JGM has thus taken full advantage of these changes and developed this new version on Linux only, using whatever GNU tools were most suitable, without worrying about Posix, or Windows portability. </p><p class="P7"> </p><p class="P7">This document describes mainly the use of Version 2.0. It does not attempt to duplicate the information available in the original documentation which is also included in the release package. The user should read the introduction and disclaimers in that document to get a sense of Dealer's purpose and limitations.</p><p class="P7">JGM has written a companion document, titled, "Dealer Maintenance" which documents what he has learned about Dealer internals during the course of his modifications. </p><h1 class="P83"><a id="a__Description"><span/></a><a id="__RefHeading___Toc2546_3691053158"/>Description</h1><p class="P7">Dealer is a program to generate bridge deals that meet certain criteria, as specified by the user. </p><p class="P7">It can be used to generate hands for bidding practice, simulation, post-mortem discussion and such. Per the original documentation it should not be used to generate hands for tournament play. There are better options, also free software, for that purpose.</p><h1 class="P83"><a id="a__V2_0_Release_Notes"><span/></a><a id="__RefHeading___Toc2468_3691053158"/><a id="_toc78"/>V2.0 Release Notes</h1><h3 class="P87"><a id="a__Major_Changes"><span/></a><a id="__RefHeading___Toc2548_3691053158"/>Major Changes</h3><p class="P7">The Double Dummy Solving function is now 5 times faster than the previous version. Instead of using GIB it uses Bo Haglund's  Double Dummy Solver routines. </p><p class="P7"> </p><p class="P7">There is the ability to get the Par result on a deal, also using BH's DDS routines.</p><p class="P7"> </p><p class="P7">The user can now enter François Dellacherie's shape specification directly into the Dealer input file. There is no need to go through an extra pre-processing step. </p><p class="P7"> </p><p class="P7"> </p><p class="P114">There is the ability to evaluate a pair of hands together, using the Optimal Point Count developed by Patrick Darricades.</p><p class="P114"> </p><p class="P114">Dealer can now export the hands in a format suitable for predealing in a subsequent Dealer run. The predeal holdings can be specified on the command line allowing this feature to be shell scripted.</p><p class="P7"> </p><p class="P7">The user can now use a script to run Dealer, and have it study or simulate a variety of conditions without modifying the <span class="T21">Input File  </span><span class="T24"> for each run.</span></p><p class="P7"> </p><p class="P7">Dealer can now export its results to a disk file in CSV format, for analysis by other programs. </p><p class="P7">Dealer can  put the same, or different, CSV format results to the screen, while at the same time writing CSV results to a file.</p><p class="P7"> </p><p class="P7">Some input statements are now handled directly in the Lexer without involving the parser. </p><p class="P7"> </p><p class="P7">A new 'Bucket Frequency'  function has been implemented; this is useful when trying plot frequency tables for quantities that use decimal fractions. </p><p class="P7"> </p><p class="P7">The new <span class="T5">usereval k</span>eyword, allows the user to write his own code to return results to Dealer without having to rebuild Dealer, or add to Dealer's grammar and syntax. This implements a general purpose way of expanding Dealer's functionality.</p><p class="P7"> </p><p class="P120">Richard Pavlicek's Library of over 10 Million solved deals can now be used as an input to Dealer. Using the Library  can speed up Par calculations and Double Dummy solutions by more than 100x.</p><h3 class="P88"><a id="a__Extra_Functionality"><span/></a><a id="__RefHeading___Toc2550_3691053158"/>Extra Functionality</h3><p class="P7">Dealer can now accept some numbers with decimal fractions. This is useful in the Optimal Point Count evaluation, the CCCC evaluation, the Suit Quality evaluation, and the Modern Losing Trick Count evaluation functions. It also allows the user to redefine the usual HCP counts using fractions. For example Aces can be given a value of 4.5, Tens a value of 0.5 and so forth. The user can then input conditions such as<span class="T27"> hcp(west) &gt;= 14.0 &amp;&amp; hcp(west) &lt; 18.5</span></p><p class="P7"> </p><p class="P7">The evalcontract feature has been fixed so that it works properly and it can also evaluate Doubled and Redoubled contracts (which it could not do before.) There is also no restriction on the number and type of contracts.</p><p class="P7"> </p><p class="P7">A new Losing Trick Count function has been added. </p><p class="P7"> </p><p class="P7">Variable names can now include the Underscore character.</p><p class="P7"> </p><p class="P7">The user can now specify a Title to be printed on the various reports, and in the PBN file. This helps document how the output was generated and for what purpose.</p><h3 class="P88"><a id="a__Minor_Bug_Fixes"><span/></a><a id="__RefHeading___Toc2552_3691053158"/>Minor Bug Fixes</h3><p class="P7">The code for the altcount feature has been cleaned up so that the number used in the altcount command matches the numbers used in the pt0 to pt9 commands.</p><p class="P7"> </p><p class="P7">Several of the reports has been 'prettied' up with board numbers and seat names, and if available a title.</p><h3 class="P88"><a id="a__Removed_Functionality"><span/></a><a id="__RefHeading___Toc2554_3691053158"/>Removed Functionality</h3><p class="P7">All the code conditionally included under 'FRANCOIS' aka Exhaust Mode has been removed.</p><p class="P7"> </p><p class="P7">All the code related to Windows portability has been removed.</p><p class="P7"> </p><p class="P7">The code that searched for a library of GIB deals has been removed. This library does not seem to be available anymore, and the new <span class="T173">Pavlicek Library is larger and available on GitHub.</span></p><p class="P7"> </p><p class="P7">Hans van Staveren's clever hack that avoided modulo division, and thus sped up random number generation by a factor of two, has been removed. See the maintenance documentation if you want to know why.</p><h1 class="P83"><a id="a__Conventions_Used_in_this_Document"><span/></a><a id="__RefHeading___Toc2470_3691053158"/>Conventions Used in this Document</h1><p class="P7">In most user manuals there are certain conventions that are used to make the context more clear. Here are the ones used in this document:</p><ul><li><p class="P94" style="margin-left:0cm;"><span class="WW8Num2z0" style="display:block;float:left;min-width:0.635cm;">.</span>Dealer<span class="T5"> keywords</span> are in bold.<span class="odfLiEnd"/> </p></li></ul><ul><li><p class="P95" style="margin-left:0cm;"><span class="WW8Num3z0" style="display:block;float:left;min-width:0.635cm;">.</span>In Dealer <span class="T21">case</span> is meaningful. <span class="T5">hcp</span> is a Dealer reserved word. HCP is not a reserved word. <span class="T5">spades</span> is a reserved word. Spades is not a reserved word.<span class="odfLiEnd"/> </p></li></ul><ul><li><p class="P96" style="margin-left:0cm;"><span class="WW8Num4z0" style="display:block;float:left;min-width:0.635cm;">.</span>Many keywords in Dealer have both the singular and plural form reserved. See the glossary later in this document.<span class="odfLiEnd"/> </p></li></ul><ul><li><p class="P97" style="margin-left:0cm;"><span class="WW8Num5z0" style="display:block;float:left;min-width:0.635cm;">.</span>Examples showing literal input to, and output from, Dealer is in <span class="T27">Courier New</span> font. When there is a backslash '\' at the end of a line, it means that the line is to be continued with the text that appears next. It is generally the case that there was not room on the page to show the text all on one line as it would appear on the screen.<span class="odfLiEnd"/> </p></li></ul><ul><li><p class="P98" style="margin-left:0cm;"><span class="WW8Num6z0" style="display:block;float:left;min-width:0.635cm;">.</span>Generic terms that have specific meaning in a Dealer context are in <span class="T70">italics</span>.  For example <span class="T70">compass, side, suit,</span> etc.<span class="odfLiEnd"/> </p></li></ul><ul><li><p class="P99" style="margin-left:0cm;"><span class="WW8Num7z0" style="display:block;float:left;min-width:0.635cm;">.</span>Input that can be omitted in certain cases is shown between square brackets. [...]<span class="odfLiEnd"/> </p></li></ul><ul><li><p class="P100" style="margin-left:0cm;"><span class="WW8Num8z0" style="display:block;float:left;min-width:0.635cm;">.</span>When parentheses<span class="T5"> ()</span> are shown in this documentation they are <span class="T21">required</span> by the Dealer syntax. The previous version of the documentation used  parentheses for two purposes which I always found slightly confusing. <span class="odfLiEnd"/> </p></li></ul><ul><li><p class="P101" style="margin-left:0cm;"><span class="WW8Num9z0" style="display:block;float:left;min-width:0.635cm;">.</span>Where the user is expected to make a choice between one of several terms the list is shown between braces {}.<span class="odfLiEnd"/> </p></li></ul><p class="P73"> </p><p class="P7">For example <span class="T5">hcp</span> <span class="T5">(</span> <span class="T70">compass</span> [,<span class="T70">suit</span>] <span class="T5">)</span><span class="T76"> can be read as</span><span class="T80">:</span><span class="T76"> </span><span class="T5">hcp</span><span class="T76"> is a Dealer keyword that must be entered exactly as shown. The left parenthesis is required. </span><span class="T71">compass </span><span class="T12">is a Dealer term referring to the various seat names, {north, south, east, west}. The comma and term </span><span class="T71">suit</span><span class="T12"> shown between the square brackets is optional and may be omitted. The closing parenthesis is required.</span></p><p class="P7"><span class="T12">Hence this input: </span><span class="T28">hcp(south, clubs) </span><span class="T12">is legal, as is </span><span class="T28">hcp(west)</span><span class="T12">. But this input </span><span class="T28">hcp South </span><span class="T12">is not legal. The parentheses are missing and the word 'South' with a capital S is not a valid </span><span class="T71">compass </span><span class="T12">name.</span></p><h1 class="P82"><a id="a__Definitions_of_Terms"><span/></a><a id="__RefHeading___Toc2472_3691053158"/>Definitions of Terms</h1><p class="P7">This section defines some of the terms that have special meaning to Dealer. </p><ul><li><p class="P102" style="margin-left:0cm;"><span class="WW8Num10z0" style="display:block;float:left;min-width:0.635cm;">.</span><span class="T70">compass: </span><span class="T11">o</span>ne of north, south, east, west<span class="odfLiEnd"/> </p></li></ul><ul><li><p class="P103" style="margin-left:0cm;"><span class="WW8Num11z0" style="display:block;float:left;min-width:0.635cm;">.</span><span class="T70">side:</span> one of NS, EW (note the capitals)<span class="odfLiEnd"/> </p></li></ul><ul><li><p class="P104" style="margin-left:0cm;"><span class="WW8Num12z0" style="display:block;float:left;min-width:0.635cm;">.</span><span class="T70">suit:</span> one of club, clubs, diamond, diamonds, heart, hearts, spade, spades (singular &amp; plural)<span class="odfLiEnd"/> </p></li></ul><ul><li><p class="P105" style="margin-left:0cm;"><span class="WW8Num13z0" style="display:block;float:left;min-width:0.635cm;">.</span><span class="T70">strain:</span> one of notrump, notrumps, or one of the suits<span class="odfLiEnd"/> </p></li></ul><ul><li><p class="P106" style="margin-left:0cm;"><span class="WW8Num14z0" style="display:block;float:left;min-width:0.635cm;">.</span><span class="T70">holding</span>: one or more cards in a suit, arranged in descending order of rank preceded by a suit letter.  Example: <span class="T27">HAJT432 </span>or<span class="T27"> CAKQJT98</span><span class="odfLiEnd"/> </p></li><li><p class="P106" style="margin-left:0cm;"><span class="WW8Num14z0" style="display:block;float:left;min-width:0.635cm;">.</span><span class="T70">card: </span><span class="T11">a character from the set [2-9TJQKA] followed by a capital suit letter S,H,D,C. Note that the suit letter comes after the </span><span class="T70">rank </span><span class="T11">in a </span><span class="T70">card</span><span class="T11">, but before the rank(s) in a </span><span class="T70">holding</span><span class="T11">. So that </span><span class="T30">TC</span><span class="T11"> means the </span><span class="T70">card</span><span class="T11"> the club Ten, and </span><span class="T30">CT</span><span class="T11"> means that the entire club suit consists of the club Ten. </span><span class="odfLiEnd"/> </p></li></ul><ul><li><p class="P107" style="margin-left:0cm;"><span class="WW8Num15z0" style="display:block;float:left;min-width:0.635cm;">.</span><span class="T70">deal:</span> 52 cards in random order (shuffled and dealt)<span class="odfLiEnd"/> </p></li></ul><ul><li><p class="P108" style="margin-left:0cm;"><span class="WW8Num16z0" style="display:block;float:left;min-width:0.635cm;">.</span><span class="T70">distribution</span>: a 4 character string made up of the digits 0-9 and/or the letter 'x'. e.g. 4432, x5x3  The characters represent the suit lengths in the order Spades, Hearts, Diamonds, Clubs. There is no way to specify a 10+ suit in Dealer. x36x means a hand  with 3=6 in the reds, i.e. 3 hearts and 6 diamonds. 4333 means square with 4 spades.  A <span class="T70">distribution</span> is not the same as a <span class="T5">shape. </span><span class="T76">When the distinction between these distributions and François distributions is relevant these are referred to as HvS distributions.</span><span class="odfLiEnd"/> </p></li><li><p class="P108" style="margin-left:0cm;"><span class="WW8Num16z0" style="display:block;float:left;min-width:0.635cm;">.</span><span class="T70">shapelist:</span> several <span class="T70">distributions</span> optionally preceded by the keyword <span class="T5">any </span>and joined with plus or minus signs<span class="T5">.</span><span class="T76"> For example to specify a balanced hand that does not include a 5 card Major: </span><span class="odfLiEnd"/> </p></li></ul><p class="P7"><span class="T36">        any</span><span class="T76"> </span><span class="T36">4432 + any 4333 + any 5332 - 5xxx - x5xx</span></p><p class="P7"><span class="T36">        </span><span class="T76">As will be explained later all the shapes with minus signs must come </span><span class="T22">after</span><span class="T25"> the shapes without </span></p><p class="P74">minus signs.</p><ul><li><p class="P108" style="margin-left:0cm;"><span class="WW8Num16z0" style="display:block;float:left;min-width:0.635cm;">.</span><span class="T72">shape</span><span class="T38">: </span><span class="T12">This is shorthand for 'shape specification', </span><span class="T13">not</span><span class="T12"> as you might assume for </span><span class="T71">distribution.</span><span class="T12"> It means: the word 'shape' followed by a left parenthesis, then a </span><span class="T71">shapelist </span><span class="T12">then a right parenthesis. For example this is one </span><span class="T71">shape</span><span class="T12"> :</span><span class="T31">shape(</span><span class="T28"> any 5xxx + 64xx + 46xx - any 0xxx </span><span class="T31">) </span><span class="T12">It means a hand with any 5 card suit but no voids, or a hand with 6 spades and 4 hearts or a hand with 4 spades and 6 hearts (with no voids so must be 6421). The distinction between </span><span class="T71">shape</span><span class="T12"> and </span><span class="T71">distribution </span><span class="T12">will be important when discussing the </span><span class="T15">shape</span><span class="T12"> function later on.</span><span class="odfLiEnd"/> </p></li><li><p class="P108" style="margin-left:0cm;"><span class="WW8Num16z0" style="display:block;float:left;min-width:0.635cm;">.</span><span class="T71">FDdistribution</span><span class="T12"> or </span><span class="T71">FDdist</span><span class="T12">: a distribution expressed using François Dellacherie's enhanced </span><span class="T71">FDoperators.</span><span class="T12"> When the distinction between these distributions and original distributions is relevant the original distributions are  referred to as HvS distributions.</span><span class="odfLiEnd"/> </p></li><li><p class="P108" style="margin-left:0cm;"><span class="WW8Num16z0" style="display:block;float:left;min-width:0.635cm;">.</span><span class="T15">FDshape: </span><span class="T12">This is shorthand for 'François shape specification'. It means the word 'shape' followed by a left</span><span class="T13"> brace {</span><span class="T18"> then a compass direction, a comma, and then one or several </span><span class="T73">FDdistributions </span><span class="T18">joined with plus or minus signs. As with the original shapelist, all the minus sign FDdistributions should come after the plus sign ones. The keyword </span><span class="T20">any</span><span class="T18"> is not allowed in an FDshapelist. A right brace } terminates an </span><span class="T20">FDshape.</span><span class="odfLiEnd"/> </p></li><li><p class="P108" style="margin-left:0cm;"><span class="WW8Num16z0" style="display:block;float:left;min-width:0.635cm;">.</span><span class="T73">FDoperator</span><span class="T18">: The extra symbols or ways of expressing a distribution inside of an</span><span class="T20"> FDshape.</span><span class="T18"> See the separate section on this feature.</span><span class="odfLiEnd"/> </p></li><li><p class="P108" style="margin-left:0cm;"><span class="WW8Num16z0" style="display:block;float:left;min-width:0.635cm;">.</span><span class="T71">contract</span><span class="T36">: </span><span class="T76">A string consisting of: the lower case letter 'z', then a  digit in the range 1-7, then a capital letter giving the strain from the list {C,D,H,S,N} then 0, 1, or 2 lower case 'x's to indicate whether the contract is un-doubled, doubled, or re-doubled. Ex:</span><span class="T36"> z6Sxx</span><span class="T76"> or</span><span class="T36"> z1N</span><span class="T76"> </span><span class="odfLiEnd"/> </p></li></ul><ul><li><p class="P109" style="margin-left:0cm;"><span class="WW8Num17z0" style="display:block;float:left;min-width:0.635cm;">.</span><span class="T70">dotnum:</span> a number with 0, 1 or 2 digits before  a decimal point which can be followed by 0, 1, or 2 digits. Examples: <span class="T27">99.99</span>  or<span class="T27"> 0.01</span> or <span class="T27">.5</span> or <span class="T27">15.</span> The decimal point is always required; the digits before or after the decimal point may or may not be present.<span class="odfLiEnd"/> </p></li></ul><ul><li><p class="P110" style="margin-left:0cm;"><span class="WW8Num18z0" style="display:block;float:left;min-width:0.635cm;">.</span><span class="T70">number</span>:<span class="T11"> an integer made up of the digits 0-9. No commas, or decimal points. </span><span class="odfLiEnd"/> </p></li></ul><ul><li><p class="P111" style="margin-left:0cm;"><span class="WW8Num19z0" style="display:block;float:left;min-width:0.635cm;">.</span><span class="T70">expression</span>: <span class="T11">an expression is made up of other expressions, grouped by parentheses and joined by arithmetic or logical operators. The simplest expression is a single </span>term<span class="T11"> such a </span><span class="T70">number</span><span class="T11"> or a bridge function call such as </span><span class="T31">hcp(north)</span><span class="odfLiEnd"/> </p></li><li><p class="P111" style="margin-left:0cm;"><span class="WW8Num19z0" style="display:block;float:left;min-width:0.635cm;">.</span><span class="T70">quoted string </span><span class="T11">Free form text, between double quotes. e.g. </span><span class="T30">"Average of North's HCP"</span><span class="odfLiEnd"/> </p></li><li><p class="P111" style="margin-left:0cm;"><span class="WW8Num19z0" style="display:block;float:left;min-width:0.635cm;">.</span><span class="T70">csvlist </span><span class="T11">Terms that can be printed by the </span><span class="T15">csvrpt</span><span class="T11"> and/or the</span><span class="T15"> printrpt</span><span class="T11"> action(s). The terms in this list are: any valid Dealer </span><span class="T70">expression</span><span class="T11">, a </span><span class="T70">compass,</span><span class="T11"> a </span><span class="T70">side</span><span class="T11">, </span><span class="T70">quoted strings,</span><span class="T11"> and the keywords </span><span class="T15">deal</span><span class="T11">, </span><span class="T15">trix(deal)</span><span class="T11"> and</span><span class="T15"> trix(</span><span class="T71">side</span><span class="T15">)</span><span class="T11"> .</span><span class="odfLiEnd"/> </p></li></ul><h1 class="P83"><a id="a__The_Input_File"><span/></a><a id="__RefHeading___Toc2474_3691053158"/><a id="_toc159"/>The Input File </h1><p class="P7">The input file is where the user specifies what conditions must be satisfied to qualify the deal as 'interesting' and which actions to take when an interesting deal is found. Dealer will keep generating deals at random, and analyzing each one until one of two things occurs: either it<span class="T5"> </span><span class="T22">produces</span><span class="T25"> the number of interesting deals the user called for, or it reaches the limit on how many deals it is required to </span><span class="T22">generate</span><span class="T25"> before giving up.</span></p><p class="P51">The input file can be thought of as consisting of the following parts: environment set-up, variable definition, condition clause, list of actions to perform, and end of run output actions.</p><p class="P7"><span class="T25">Dealer also understands </span><span class="T75">expressions.</span><span class="T25"> That is, in most places where a single </span><span class="T73">term </span><span class="T25">is allowed such as a </span><span class="T73">number,</span><span class="T25"> or a term such as </span><span class="T26">hearts(south)</span><span class="T25"> you can also put two or more terms connected by either an arithmetic, or a logical, operator. Most expressions that would be valid in C are also valid in Dealer.</span></p><p class="P7"><span class="T25">Examples: </span><span class="T40">hcp(south) + hcp(north) </span><span class="T25">or  </span><span class="T40">hearts(south) + spades(south) </span><span class="T25">or </span></p><p class="P46">hcp(south,hearts)&gt;=hcp(south,spades) and hcp(south)+hcp(north)&gt;26</p><h2 class="P86"><a id="a__Environment_Set-up___Scripting"><span/></a><a id="__RefHeading___Toc2476_3691053158"/>Environment Set-up &amp; Scripting </h2><p class="P7"><span class="T87">generate</span><span class="T84"> </span><span class="T89">number</span><span class="T92"> The maximum number of random deals to try. Terminate the program when this number is reached, even if there were fewer than </span><span class="T94">produce</span><span class="T92"> 'interesting' deals.</span></p><p class="P7"><span class="T87">produce</span><span class="T84">  </span><span class="T89">number</span><span class="T92"> The maximum number of 'interesting' deals to produce. Terminate the program after this many have been found, and their actions completed.</span></p><p class="P7"><span class="T87">dealer </span><span class="T89">compass </span><span class="T92">Set the dealer for the PBN printed output. This value has no impact on the deals produced; it is strictly for documentation purposes. The default is</span><span class="T94"> north</span><span class="T92">.</span></p><p class="P7"><span class="T87">vulnerable</span><span class="T98"> </span><span class="T92">{</span><span class="T91">NS, EW, both, all, none</span><span class="T92"> } Set the vulnerability for the PBN printed output. If </span><span class="T94">par</span><span class="T91"> </span><span class="T92">calculations are asked for, this is the value that will be used. </span><span class="T94">none</span><span class="T92"> is the default.</span></p><p class="P7"><span class="T94">opener</span><span class="T92"> </span><span class="T89">compass</span><span class="T92"> Set the opener for</span><span class="T94"> opc</span><span class="T92"> evaluations. The default is </span><span class="T94">west</span><span class="T92">.</span></p><p class="P7"><span class="T87">predeal </span><span class="T89">compass</span><span class="T84"> </span><span class="T89">holding </span><span class="T92">[</span><span class="T89">,holding ....</span><span class="T92"> ] Predeal these cards to this player. As few as one, and as many as 13 cards may be predealt to any number of players.</span></p><p class="P7"><span class="T92">Example: </span><span class="T41">predeal south </span><span class="T42">SAQ542, HKJ87, D32, CAK</span></p><p class="P7"><span class="T92">An alternate form of </span><span class="T94">predeal</span><span class="T92"> specification is </span><span class="T105">suit</span><span class="T106">(</span><span class="T105">compass</span><span class="T106">)==</span><span class="T90">number</span><span class="T92"> This will ensure that the player gets exactly  </span><span class="T90">number </span><span class="T95">in the suit, but the card(s) could be any rank. </span><span class="T90">This feature does not work in my copy of Dealer version 1 from Debian. In fact studying the code I cannot find any aspect of the shuffle routine (where the other predeal condition is taken into account) that uses this feature. Not implemented in Version2</span></p><p class="P7"><span class="T94">seed </span><span class="T89">number</span><span class="T92"> Sets seed for the RNG.  </span><span class="T89">number </span><span class="T92">should be some postitive integer; a value of zero will cause the RNG to be seeded from the Linux kernel (the default). Whatever value is entered here, will be over ridden by a value entered on the command line via the -s switch, even if the command line value is zero.  Setting a starting seed ensures repeatability of hands generated from run to run.</span></p><p class="P7"><span class="T92">Ex:  </span><span class="T42">seed 108488457980525</span></p><p class="P7"><span class="T5">pointcount</span> {<span class="T71">list of numbers</span><span class="T12">}</span><span class="T76"> Set the HCP value of the cards in a suit starting with the Ace and down to the Deuce. The word </span><span class="T5">pointcount</span><span class="T76"> by itself will set all values to zero. Not every card needs to be entered. The purpose of this keyword is to allow the player to redefine the usual 4-3-2-1 point count. For example: </span><span class="T27">pointcount 6 4 3 2 1 </span><span class="T76">will give Aces a value of 6, Kings 4, Queens 3, Jacks 2 and Tens 1. The remaining cards will be given a value of zero.  </span></p><p class="P7"><span class="T5">altcount</span> <span class="T70">number</span> <span class="T70">number-list</span> This keyword is similar to <span class="T5">pointcount</span> in that it lets the user redefine what is being counted by the <span class="T5">pt0</span> thru <span class="T5">pt9</span> keywords. The first number is the number of the alternate point count e.g. <span class="T27">altcount 4</span> will set the value of all cards counted by <span class="T5">pt4 </span>to zero. The default of <span class="T5">pt4</span> is to count the number of Aces in a hand  so that the default altcount 4 array is set as if the user had entered: <span class="T27">altcount 4 1 0 0 0 0 0 0 0 0 0 0 0 0</span></p><p class="P7">If you want to use <span class="T5">pt4</span> to count something different, then you can redefine this array with an <span class="T5">altcount </span>4 command. Similarly for the other alternate counts,  0 - 9.<span class="T5"> </span></p><p class="P7">Example: <span class="T27">altcount 9 13 9 5 2 1</span></p><p class="P7">This will make <span class="T5">pt9</span> count in 'Danny Kleinman' points where an Ace has a value of 13, a King a value of 9, a Queen a value of 5, a Jack a value of 2 and a Ten a value of 1. </p><p class="P7">The <span class="T5">altcount </span>and <span class="T5">pointcount</span> keywords, can also be specified using <span class="T70">dotnums</span>. For example:</p><p class="P7"><span class="T27">pointcount 4.5 3.0 1.5 0.75 0.25 </span>will give Aces a value of four and half points, and Tens a value of one quarter point and so on. The same would apply to the <span class="T5">altcount</span> keyword. But see the section on using <span class="T70">dotnums</span> later, and the implications of doing this.</p><p class="P10"> </p><p class="P7"><span class="T5">title</span><span class="T76"> </span><span class="T71">quoted string</span><span class="T12"> This title will appear on some of the printouts, and also at the end of the run when the statistics are printed out. This allows the user to keep track of what the printouts were intended for.</span></p><p class="P7"><span class="T12">Maximum length is 200 characters. Ex: </span><span class="T28">title "Weak NT Bidding Practice Session 1"</span></p><h2 class="P86"><a id="a__Variables"><span/></a><a id="__RefHeading___Toc2556_3691053158"/>Variables</h2><p class="P7"><span class="T84">Dealer allows the user to define variables which can be used as </span><span class="T100">shorthand</span><span class="T84"> for complicated expressions. A variable name can be of any length, consisting of the digits 0-9, upper case letters, lower case letters, and,  as of Version 2.0, the underscore character. There are two restrictions; </span><span class="T100">first it must start with a letter (upper or lower case)</span><span class="T84">, second the variable name cannot conflict with a Dealer reserved word. For example it is legal to have variables named </span><span class="T45">hcpn, hcpe, hcpw</span><span class="T84"> representing the HCP for North, East, and West but </span><span class="T100">not</span><span class="T84"> a variable named </span><span class="T45">hcps</span><span class="T84"> because both </span><span class="T87">hcp</span><span class="T84"> and </span><span class="T87">hcps</span><span class="T84"> are reserved words in Dealer. But </span><span class="T45">hcpS</span><span class="T84"> would be a legal variable name because case matters.</span></p><p class="P12"> </p><p class="P7"><span class="T84">It is important to realize that acting as shorthand is </span><span class="T100"> the only thing</span><span class="T84"> variables are used for. They are </span><span class="T100">not</span><span class="T84"> used to store intermediate results. </span></p><p class="P7"><span class="T84">When the user defines a variable, the variable name is added to a linked list of variables; an expression tree is built that, when traversed, will calculate and return the value of the variable, and a pointer to that tree is associated with the variable name. But the actual variable does not receive a value at this time. </span><span class="T84">When the variable is referred to in a condition clause or an action statement, the variable list is searched for the matching variable name, and the expression tree is evaluated and the value of the variable is calculated e</span><span class="T100">ach time it is referred to.</span></p><p class="P7"><span class="T84">Example: </span><span class="T45">HCP_NS </span><span class="T47">=</span><span class="T45"> hcp(north) + hcp(south)</span></p><p class="P7"><span class="T47">condition</span><span class="T84"> </span><span class="T45">HCP_NS &gt;= 23 and HCP_NS &lt;= 29</span></p><p class="P12">A variable named "HCP_NS" is added to the variable list. An expression tree that calculates the sum of the north HCP and the south HCP is created. But no value is stored in the variable. When the condition statement wants to test the number 23 against the variable named HCP_NS, the variable list is searched until the name HCP_NS is found, and the pointer to the expression tree is retrieved. The expression tree that calculates the sum is evaluated and the comparison is done. When the condition statement wants to compare the number 29 against the variable HCP_NS the exact same process is repeated again, starting with the search of the variable list.  </p><p class="P12">This takes slightly more time than just having the condition statement evaluate:</p><p class="P7"><span class="T47">condition</span><span class="T45"> (hcp(north)+hcp(south)&gt;=23)&amp;&amp;(hcp(north)+hcp(south)&lt;=29)</span></p><p class="P12">The first is more convenient for the user, but takes more time because the variable name must first be looked up (twice) before the summation can be done (also twice). </p><h2 class="P86"><a id="a__Condition_Statement"><span/></a><a id="__RefHeading___Toc2478_3691053158"/>Condition Statement</h2><p class="P12">Evaluating the condition statement is the most complicated thing that Dealer does. The user has great freedom to build quite complex condition statements by using the various bridge hand evaluation metrics and joining them with either arithmetic or logical operators, and grouping them with parentheses.</p><p class="P7">The arithmetic and logical operators are listed after the glossary of keywords later in this document.</p><p class="P7">The syntax of the condition statement is <span class="T54">condition</span><span class="T27"> </span><span class="T39">expression</span><span class="T11"> Parentheses are not required around </span><span class="T70">expression</span><span class="T11">, but of course the user will often need to use parentheses to ensure that the various clauses are grouped correctly. This is particularly true if the </span><span class="T15">condition</span><span class="T11"> expression contains an </span><span class="T15">or</span><span class="T11">  logical operator. </span></p><p class="P19">Dealer only acts on one condition statement. It is not a fatal error to have more than one condition statement, but only the last condition statement specified has any effect.</p><p class="P7">Example: <span class="T27">condition shape(north, any 4432 + any 4333)and hcp(north)&gt;=15 and shape(south, 5xxx + x5xx) and hcp(south)&gt;=8 </span></p><p class="P25"> </p><p class="P7"><span class="T21">Efficiency Consideration: </span>The condition statement is evaluated in roughly the same sequence as the way it is entered in the input file. If it is not necessary to evaluate all clauses, then Dealer does not do so. For instance if the condition statement uses many clauses joined by<span class="T5"> and </span><span class="T76">then as soon as one of those clauses is false, the whole expression must be false and Dealer does not continue to evaluate clauses that are not necessary. The same is true if the clauses are joined by </span><span class="T5">or</span><span class="T76"> and one of them becomes true. Since the </span><span class="T5">tricks</span><span class="T76">, </span><span class="T5">dds</span><span class="T76">, </span><span class="T5">trix,</span><span class="T76"> </span><span class="T5">par</span><span class="T76">, and </span><span class="T5">opc</span><span class="T76"> functions are much slower than the other ones in Dealer, it is much more efficient to put them at the end of the condition statement than at the beginning. They will then not be called unless absolutely necessary. See the maintenance documentation for more details. This also applies to the </span><span class="T5">usereval </span><span class="T76">function; while it is not as slow as the above 5, it is slower than  most of the functions that are totally internal to Dealer. </span></p><h3 class="P88"><a id="a__Commonly_Used_Clauses"><span/></a><a id="__RefHeading___Toc2480_3691053158"/>Commonly Used Clauses</h3><p class="P7">Most often the condition statement will consist of clauses using common bridge functions, or variables that are shorthand for expressions made up of common bridge functions. (In all of the following discussion assume that both the singular and plural form of the reserved word can be used. For example <span class="T5">hcp</span> and <span class="T5">hcps</span> mean the same thing as do <span class="T5">spade</span> and <span class="T5">spades</span>). </p><p class="P10"> </p><p class="P7"><span class="T83"> </span><span class="T5">hcp</span><span class="T76">(</span><span class="T71">compass</span><span class="T5">)</span><span class="T76"> or </span><span class="T5">hcp</span><span class="T76">(</span><span class="T71">compass</span><span class="T76">, </span><span class="T71">suit</span><span class="T5">)</span><span class="T76">. This will return a value based on the contents of the pointcount array. Unless the user has changed this with a </span><span class="T5">pointcount</span><span class="T76"> statement, this array will give a value of zero to each card from Deuce to Ten, and the common 4-3-2-1 values to Ace, King, Queen, and Jack. </span></p><p class="P7"><span class="T76">Ex1: </span><span class="T36">hcp(west)</span><span class="T76">   Ex2:</span><span class="T36"> hcps(east,club)</span></p><p class="P48"> </p><p class="P7"><span class="T5">spades</span><span class="T76">(</span><span class="T71">compass</span><span class="T5">)</span><span class="T76">, </span><span class="T5">hearts</span><span class="T76">(</span><span class="T71">compass</span><span class="T5">)</span><span class="T76">, </span><span class="T5">diamonds(</span><span class="T71">compass</span><span class="T76">), </span><span class="T5">clubs(</span><span class="T71">compass</span><span class="T5">)</span><span class="T76">. These functions (and their singular synonyms ) will return the number of cards hand </span><span class="T71">compass</span><span class="T76"> holds in the suit. A way of obtaining the length of the suit in the hand.</span></p><p class="P10"> </p><p class="P7"><span class="T5">controls(</span><span class="T71">compass</span><span class="T15">), </span><span class="T72"> </span><span class="T15">control(</span><span class="T71">compass, suit</span><span class="T15">)</span><span class="T12"> Returns the number of controls in a hand or a suit. An Ace is counted as two controls, a King as one control. Shortness is not counted as a control.</span></p><p class="P20"> </p><p class="P7"><a id="loser"/><span class="T16">loser (</span><span class="T71">compass</span><span class="T16">)</span><span class="T12">, e.g .</span><span class="T28">losers(north)</span><span class="T12"><br/>The number of losers in the hand, which is the sum of the number of losers in each suit. The program does </span><span class="T13">not</span><span class="T12"> apply any corrections to the loser-count such as "1 loser less if a player has more aces than queens". </span></p><p class="P21"> </p><p class="P7"><span class="T4">losers (</span><span class="T71">compass, suit</span><span class="T4">)</span>, e.g. <span class="T27">loser(north, spades)</span><br/>The number of losers in a suit. The number of losers in a suit is: </p><ul><li><p class="P126" style="margin-left:1.2469cm;"><span class="WW8Num20z0" style="display:block;float:left;min-width:0.4991cm;">.</span>3 cards or more: 3 - 1 for each of A, K or Q held.  (Axx, Kxxx, and Qxxx evaluate to two losers)<span class="odfLiEnd"/> </p></li><li><p class="P126" style="margin-left:1.2469cm;"><span class="WW8Num20z0" style="display:block;float:left;min-width:0.4991cm;">.</span>Void: 0 losers. <span class="odfLiEnd"/> </p></li><li><p class="P126" style="margin-left:1.2469cm;"><span class="WW8Num20z0" style="display:block;float:left;min-width:0.4991cm;">.</span>Singleton A: 0 losers, any other singleton 1. <span class="odfLiEnd"/> </p></li><li><p class="P126" style="margin-left:1.2469cm;"><span class="WW8Num20z0" style="display:block;float:left;min-width:0.4991cm;">.</span>Doubleton AK: 0 losers, Ax or Kx 1, any other doubleton 2. <span class="odfLiEnd"/> </p></li></ul><p class="P48"> </p><p class="P7"><span class="T5">pt0(</span><span class="T71">compass</span><span class="T15">)</span><span class="T5">, pt0(</span><span class="T71">compass,suit</span><span class="T15">)</span><span class="T5">,</span> this will return a count based on the values stored in the <span class="T5">altcount</span> 0 array. If the user has not redefined this count, the array is set giving a Ten the value of 1 and all other cards the value of zero. Thus the default for this count is to return the total number of tens in the hand, or the number of tens in a suit. Even if the user <span class="T21">has</span><span class="T24"> set this count to something different, using the reserved word </span><span class="T26">ten </span><span class="T25"> or </span><span class="T26">tens</span><span class="T25"> will still return the same value as using the keyword </span><span class="T26">pt0.</span></p><p class="P50"> </p><p class="P7"><span class="T26">ptN(</span><span class="T73">compass</span><span class="T20">)</span><span class="T26">, ptN(</span><span class="T73">compass,suit</span><span class="T20">)</span><span class="T26">, </span><span class="T25">where </span><span class="T26">ptN</span><span class="T25"> is one of </span><span class="T26">pt1, pt2, pt3, pt4, pt5, pt6, pt7, pt8, pt9. </span><span class="T25">These</span><span class="T26"> </span><span class="T25">are used in the same way as </span><span class="T26">pt0</span><span class="T25">, but refer to the values in the </span><span class="T26">altcount</span><span class="T25"> arrays 1 thru 9.  </span></p><p class="P22"> </p><p class="P7"><span class="T18">What the </span><span class="T20">pt0 </span><span class="T18">through </span><span class="T20">pt9</span><span class="T18"> actually count if the user has not redefined them, is given in the next paragraph. The user can count something different by using the </span><span class="T20">altcount</span><span class="T18"> keywords to redefine the arrays 0 thru 9. See the description of the </span><span class="T17">altcount</span><span class="T18"> keyword in the environment and setup section.</span></p><p class="P7"> </p><p class="P23"> </p><p class="P23"/><p class="P23"> </p><p class="P7"><span class="T19">tens, jacks, queens, kings, aces, top2, top3, top4, top5, c13</span><span class="T17"><br/>Alternate, readable, synonyms for </span><span class="T19">pt0</span><span class="T17"> to </span><span class="T19">pt9</span><span class="T17"> in order -- the names correspond to what these alternate-counts do count if not overridden with the </span><span class="T19">altcount</span><span class="T17">  command: </span></p><p class="P7"><span class="T17">Number of tens/jacks/queens/kings/aces; numbers of honours in the top 2 (AK), 3 (AKQ), 4 (AKQJ), 5 (AKQJT); "C13" points, with A=6, K=4, Q=2, J=1 (a version of the "Four Aces" or "Burnstine" count using only integers, and with points in each suit that sum to 13, whence the name). Example: </span><span class="T32">top5(east,spades) </span><span class="T17">number of honours that East holds in the Spade suit (unless alternate count number 8 has been overridden with an </span><span class="T33">altcount</span><span class="T34"> </span><span class="T32">8 </span><span class="T17">statement ).</span></p><p class="P47"> </p><p class="P7"><span class="T4">score( </span><span class="T71">vulnerability, contract, tricks</span><span class="T4"> )</span><br/>Returns the positive or negative score that declarer will make if the given contract, at the given vulnerability condition, is played and the given number of tricks are made. The syntax for "<span class="T70">contract</span>" is of the form "z3N" for 3 no-trumps, "z7C" for 7 clubs, etc; the leading "z" is needed. This version 2.0 also includes the new ability to specify doubled contracts, z6Hx, and re-doubled contracts, z5Sxx.  The result will be positive if the contract makes, negative if it goes down.  <span class="T70">tricks </span><span class="T11">can be the result of a double dummy (</span><span class="T15">dds</span><span class="T11"> or </span><span class="T15">tricks</span><span class="T11">) call.</span></p><p class="P7">Ex: <span class="T27"> </span><span class="T55">S4HxV = score( vul, z4Hx, dds(south,hearts) )</span></p><p class="P7"><span class="T56"> </span><span class="T55">action printes("S4HxV: ", S4HxV," , ",dds(south,hearts), " :: " ),printoneline</span></p><p class="P7">Gives this output (In actuality the score, tricks, and deal are all on one line)</p><p class="P26">S4HxV: 990 , 11 :: n K85.QJ9874.43.Q3 e J92..AK987.T8654 s AQ4.AK652.2.AJ92 w \T763.T3.QJT65.K7 </p><p class="P26">S4HxV: 790 , 10 :: n JT3.AKJ642.T72.K e 874.87.Q93.A9863 s K96.Q5.AK65.QJ54 w \ AQ52.T93.J84.T72 </p><p class="P26">S4HxV: -200 , 9 :: n KT.A97432.AJT4.2 e .KJT5.KQ75.QJT83 s AQJ5.Q6.962.A974 w \9876432.8.83.K65 </p><p class="P26">S3HxV: -500 , 8 :: </p><p class="P26"><span> n AQJ6.AQT9.K873.J e K84.8642.AQJ6.Q8 s 753.KJ73.92.K532 w T92.5.T54.AT9764 </span></p><p class="P47"> </p><p class="P7"><a id="imp"/><span class="T4">imps( </span><span class="T71">scoredifference</span><span class="T4"> )</span> <br/>Translates a score-difference into IMPs (International Match Points). The difference, of course, can be positive or negative, and the result of "imps" will then have that same sign. </p><p class="P24"> </p><p class="P7"><span class="T20">hascard ( </span><span class="T73">compass, card </span><span class="T20">) </span><span class="T33">e.g. hascard(east, TC)</span><span class="T18">returns 1 or 0 depending on whether east holds the 10 (T) of clubs. Since </span><span class="T20">hascard</span><span class="T18"> returns the value 1 if true and 0 if false,  it is possible to </span><span class="T20">average</span><span class="T18">, or </span><span class="T20">frequency </span><span class="T18">count, the number of times </span><span class="T20">hascard</span><span class="T18"> returned true over the sample size of produced deals. </span></p><p class="P22"> </p><p class="P7"><span class="T20">shape( </span><span class="T73">compass</span><span class="T18"> , </span><span class="T73">shapelist</span><span class="T18"> </span><span class="T20">) </span><span class="T18">The original</span><span class="T20"> </span><span class="T18">HvS shape function.</span><span class="T20"> </span><span class="T18">The user is able to specify up to a total of 32 different </span><span class="T20">shape</span><span class="T18"> conditions in the input file. (That is 32 different </span><span class="T20">shape</span><span class="T18"> statements are possible. Each </span><span class="T20">shape</span><span class="T18"> statement can specify many, many, </span><span class="T73">distributions</span><span class="T18"> ). Hans implemented </span><span class="T20">shape</span><span class="T18"> in a mind-bendingly clever way, so that no matter how complicated the </span><span class="T73">shapelist</span><span class="T18">, it takes the same amount of time to evaluate whether the hand meets the shape criteria or not. The user should prefer to use the </span><span class="T20">shape</span><span class="T18"> function whenever possible, rather than checking the individual suit lengths with the </span><span class="T20">club, diamond, heart, </span><span class="T18">and</span><span class="T20"> spad</span><span class="T18">e commands.</span></p><p class="P7"><span class="T18">Example: </span><span class="T129"> </span><span class="T111">shape(north, xx6x + xx7x - any 4xxx - any 5xxx)</span></p><p class="P7"><span class="T18">The above might be used to specify that North has a weak two in diamonds. This statement uses up only </span><span class="T13">one </span><span class="T18"> of the 32 </span><span class="T73">shapes</span><span class="T18">. See the Complete Example on page 28 for more ways of using </span><span class="T20">shape</span><span class="T18">.</span></p><p class="P22">It is almost a requirement that all the allowed distributions (those with plus signs) come before all the excluded distributions (those with minus signs).</p><p class="P7"><span class="T20">shape{ </span><span class="T73">compass</span><span class="T18"> , FD</span><span class="T73">distribution </span><span class="T18">list </span><span class="T20">} </span><span class="T18">Note NOT parentheses, but </span><span class="T20">braces { } </span><span class="T18">The </span><span class="T73">FDdistribution</span><span class="T18"> list allows the user to specify complicated distributions in a more compact format. See the later write up.</span></p><p class="P7"><span class="T20">shape(...) </span><span class="T18">and </span><span class="T20">shape{...}</span><span class="T18"> can both exist in the same input file. The </span><span class="T73">FDdistribution</span><span class="T18"> list is converted to an HvS </span><span class="T73">shapelist</span><span class="T18"> consisting of many, sometimes over 100, HvS </span><span class="T73">distributions</span><span class="T18">, and these are then treated the same way as any other HvS </span><span class="T20">shape</span><span class="T18"> (with parentheses), statement.</span></p><p class="P7"><span class="T18">Example: </span><span class="T112">shape{north,[67]d[0-3]c[0-3]h[0-3]s}. </span><span class="T108">This specifies a set of 16  distributions with 6 or 7 diamonds, and at most 3 cards in any other suit.  </span></p><p class="P7"><span class="T108">It </span><span class="T110">is</span><span class="T108"> a requirement that all the allowed distributions (those with plus signs) come before all the excluded distributions (those with minus signs). It is also a requirement that the entire </span><span class="T109">shape{</span><span class="T108"> </span><span class="T113">compass</span><span class="T108">, ...</span><span class="T109">. } </span><span class="T108">statement be written on one line with no linefeeds anywhere in the statement.  (This restriction refers to </span><span class="T113">FDshapes</span><span class="T108"> only. HvS </span><span class="T109">shape</span><span class="T108"> statements can span multiple lines. )</span></p><p class="P24"> </p><p class="P7"><span class="T20">rnd(</span><span class="T18"> </span><span class="T73">number</span><span class="T18"> </span><span class="T20">)</span><span class="T18"> Generate a random number between zero and </span><span class="T73">number</span><span class="T18">. This function has nothing to do with bridge hands. It is used primarily to verify the functioning of the RNG. If you generate say one million random numbers between 0 and 100 and average them, you should get a value close to 50 in about  1.5 secs. </span></p><p class="P22"> </p><p class="P7"><span class="T18">Ex: Input file: </span><span class="T33">produce 1000000   action average "RNG Test" rnd( 100 ) </span></p><p class="P22">Result:</p><p class="P32">RNG Test : Mean=49.59, Std Dev=28.86, Var=832.75, Sample Size=1000000 </p><p class="P32">Time needed    1.294 sec</p><p class="P22"> </p><p class="P22">Note that because the RNG generates a uniform distribution the standard deviation should always be approximately 28.86 (if between 0 and 100.  0.2886 if between 0 and 1 ).</p><h3 class="P88"><a id="a__Clauses_Using_Dotnums"><span/></a><a id="__RefHeading___Toc2482_3691053158"/>Clauses Using Dotnums</h3><p class="P7"><span class="T76">All of the values used by Dealer internally are integers. This presents a bit of a problem when trying to use metrics where fractions are possible. The solution used in the past has been to have the user multiply all the numbers that would be fractions by 100. Here is how the </span><span class="T5">cccc</span><span class="T76"> and </span><span class="T5">quality</span><span class="T76"> keywords were described in the previous version of Dealer:</span><span class="T82">&lt;quote&gt;</span></p><p class="P7"><span class="T4">cccc</span><span class="T5"> (</span><span class="T71">compass</span><span class="T15">) </span></p><p class="P7"><span class="T4">quality </span><span class="T76">(</span><span class="T71">compass, suit</span><span class="T4"> </span><span class="T76">)</span><br/>Both <span class="T5">quality</span> and <span class="T5">cccc</span> use the algorithms described in "<span class="T70">T</span><span class="T74">he Bridge World"</span>, October 1982, with the single exception that the values are multiplied by 100 (so that we can use integers for them). Thus, a minimum opening bid is about 1200, rather than 12.00 as expressed in the text. <span class="T131">&lt;/quote&gt;</span></p><p class="P63">Ex1: <span class="T27">cccc(north) &gt;=1325 &amp; cccc(south) &lt;= 650</span> refers to cccc values of 13.25 and 6.5</p><p class="P7"><span class="T21">This description is still valid</span>; the user can continue to work in this way. As an option the user can now also enter numbers with decimal points in them such as 12.00, 6.5, or even 11.37 if that would make sense. But he must use either numbers multiplied by 100, or <span class="T70">dotnums</span> when referring to cccc or quality values. He cannot refer to the number 12, but instead must use either 12.0 or 1200 .When the input file is parsed all <span class="T70">dotnums</span> are immediately converted to integers by multiplying them by 100 so that internally, the two expressions:</p><p class="P7"><span class="T27">cccc(north) &gt;=1325 &amp;&amp; cccc(south) &lt;= 650</span> and </p><p class="P7"><span class="T27">cccc(north)&gt;=13.25 &amp;&amp; cccc(south) &lt;= 6.50 </span>have exactly the same effect. The user is spared the inconvenience of having to multiply numbers by 100. However if the user uses any of these values in print statements, or average statements, it is as if he had multiplied by 100 since Dealer has no notion internally of any number that is not an integer.  This also applies when the various 'altcounts' have been redefined using <span class="T70">dotnums</span>.</p><p class="P7">For example if the C13 pts have been redefined with <span class="T27">altcount 9 6.5 4.0 1.75 1.0 0.25 </span></p><p class="P7">Then when South has AKxx Qxx Jxx Txx <span class="T27">pt9(south)</span> or <span class="T27">c13(south)</span> will return a value of 1350 If you wish to read a version of the <span class="T5">cccc</span> and <span class="T5">quality </span>algorithms in English, see the Appendix at the end of this document. Note that the value returned by the <span class="T5">quality</span> algorithm is used as part of <span class="T5">cccc</span>.</p><p class="P7"><span class="T76">These decimal numbers (and all decimal numbers in dealer) are automatically multiplied by 100 to convert them to whole numbers. So that 4.5 is stored internally as 450 and .25 is stored internally as 25.  If you set </span><span class="T5">hcp </span><span class="T76">or any of the </span><span class="T5">ptn </span><span class="T76">counts in this way, then when comparing the </span><span class="T5">ptn</span><span class="T76">(...) or </span><span class="T5">hcp</span><span class="T76"> count to a value in the </span><span class="T5">condition</span><span class="T76"> clause you must use numbers with decimal points, (</span><span class="T71">dotnums</span><span class="T76">)</span></p><p class="P7"><span class="T76">It is important that if you define HCP (or a ptn count) with a</span><span class="T71"> dotnum </span><span class="T76">you must use a </span><span class="T71">dotnum </span><span class="T76">everywhere that a HCP (or ptn) value is being compared against. It would not work to define the HCP as in this example and then to say </span><span class="T36">hcp(west)&gt;=13</span><span class="T76"> You would </span><span class="T22">have to </span><span class="T76">say </span><span class="T36">hcp(west)&gt;=13.0</span></p><p class="P7"><span class="T76">See also the write up on the </span><span class="T5">bktfreq </span><span class="T76">keyword in the action clauses section which addresses the issue of doing frequency plots for values that are expressed as</span><span class="T71"> dotnums</span><span class="T76">, or integers times 100.</span></p><p class="P48"> </p><p class="P7"><span class="T5">ltc(</span><span class="T71"> compass</span><span class="T5"> </span><span class="T76">) </span><span class="T5">ltc( </span><span class="T71">compass, suit</span><span class="T4"> </span><span class="T5">)</span><span class="T76"> Returns a 'modern losing trick count' which allows for half losers in a suit. Whereas the </span><span class="T5">losers</span><span class="T76"> keyword evaluates AQ- as one loser, and Qxx as two losers, the </span><span class="T5">ltc</span><span class="T76"> function evaluates them as half a loser, and two and a half losers, respectively. The user </span><span class="T22">must</span><span class="T76"> use either </span><span class="T71">dotnums</span><span class="T12"> or losers multiplied by 100 in the input file. Example: </span><span class="T28">ltc(west) &lt; 5.5 </span><span class="T12">or </span><span class="T28">ltc(west) &lt; 550</span><span class="T12"> both mean the same thing. But you </span><span class="T13">must </span><span class="T12">say </span><span class="T28">ltc(west) &lt; 7.0</span><span class="T12"> </span><span class="T13">not</span><span class="T28"> ltc(west)  &lt; 7</span></p><p class="P21"> </p><p class="P7"><span class="T15">opc(</span><span class="T71">side</span><span class="T15">) opc(</span><span class="T71">side, suit</span><span class="T15">) opc(</span><span class="T71">side, notrump</span><span class="T15">)</span><span class="T12">This will return the 'Optimal Point Count' as defined by Patrick Darricades in his books on the subject. To use this function requires the user to have the perl programming language installed, and to have a copy of JGM's Optimal Point Count perl program (which is included with Dealer 2.0). This point count also counts in half points and thus uses </span><span class="T71">dotnum</span><span class="T12">s in the same way as the</span><span class="T15"> ltc, cccc</span><span class="T12">, and </span><span class="T15">quality </span><span class="T12">functions.  One of the unique aspects of OPC is that it evaluates a pair of hands together, assigning extra points for fit and honors in partner's long suit(s), extra support points for shortness with 3 or 4 card trump support,  and deducting points for honors facing shortness in partner's hand. It does not just evaluate two hands in isolation and then add the two values together to get a total. See PD's books for a more complete description.</span></p><p class="P7"><span class="T12">Because this function runs an external program, (much the same way as the </span><span class="T15">tricks</span><span class="T12"> function runs the external GIB program) it is much slower than simply counting hcp, or even cccc points.</span></p><p class="P7"><span class="T15">opc(</span><span class="T71">side</span><span class="T15">)</span><span class="T12"> will return the evaluation if the side is playing in its longest fit;</span></p><p class="P7"><span class="T15">opc(</span><span class="T71">side, suit</span><span class="T15">)</span><span class="T12"> will return the evaluation if the side is playing with that suit as trumps</span></p><p class="P7"><span class="T15">opc(</span><span class="T71">side, notrump</span><span class="T15">)</span><span class="T12"> will return  the evaluation if the side is playing in NoTrump.</span></p><p class="P7"><span class="T12">Example: </span><span class="T28">opc(EW, notrump) &gt;= 26.50 </span></p><h3 class="P88"><a id="a__Double_Dummy_Solvers___DDSx2__Par__and_GIB_Tricks__"><span/></a><a id="__RefHeading___Toc2486_3691053158"/>Double Dummy Solvers ( DDSx2,  Par, and GIB Tricks )</h3><p class="P7"><span class="T5">dds</span>( <span class="T71">compass, strain </span><span class="T11">)  </span><span class="T12">Calls Bo Haglund's Double Dummy Solver library to calculate the number of tricks that can be taken by the given hand, in the given strain (suit or notrump).  Dealer can call DDS in two different ways; if the number of tricks is required for fewer than 5 different </span><span class="T71">compass-strain</span><span class="T12"> combinations, it is more efficient to use DDS's single result solution (mode 1); if more than 5 different   </span><span class="T71">compass-strain</span><span class="T12"> combinations are to be analyzed, then it is more efficient to use DDS's mode in which it calculates all 20 possible </span><span class="T71">compass-strain</span><span class="T12"> results for the given hand in one go (mode 2). The single result method is the default, as that is the most likely scenario. The user can force the 20 result method via the -M command line switch. (See command line parameters later in this document. See also the maintenance documentation for a discussion of the times taken for the various methods of double dummy solutions.) The results of each dds call are </span><span class="T13">cached </span><span class="T18">so that if the same strain by the same compass is asked for more than once, the DD solver is only called the first time. This has a significant impact on the runtime. See the note in the </span><span class="T20">evalcontract</span><span class="T18"> explanation.</span></p><p class="P7"><span class="T15">par</span><span class="T11">( </span><span class="T71">side</span><span class="T11"> )</span><span class="T12"> Calls Bo Haglund's Double Dummy Solver to calculate the par result on the deal. If the user asks for a par result, the DDS mode is automatically set to mode 2 since the par calculations require DDS to calculate all 20 results before returning the par result. DDS when calculating the par result, returns not only the par score (e.g. -300), but also the contract (e.g. 5Cx ) that led to that score. But Dealer does not (yet) return the contract information to the user. The user can specify the vulnerability when asking for the par result via the </span><span class="T11">vulnerable</span><span class="T12"> keyword. The default is None Vulnerable. </span></p><p class="P21">Example: This Input File extract</p><p class="P25">condition shape(south, x5xx + x6xx +x7xx) &amp;&amp; shape(north, x3xx + x4xx ) &amp;&amp; hcp(south)+hcp(north) &gt;=24</p><p class="P25">action printrpt(NS, par(NS), hcp(north + hcp(south) ), </p><p class="P25">average "Par NS = " par(NS)</p><p class="P7">will generate output like this:</p><p class="P7"><span class="T125">  </span><span class="T27">n AQ93.K953.K42.KT s K75.JT862.A87.Q7 ,450,25</span></p><p class="P7"><span class="T65"> </span><span class="T27">n K.JT53.KT752.AK7 s .KQ942.AJ8643.83 ,300,24</span></p><p class="P7"><span class="T65"> </span><span class="T27">n AT842.QJ9.A92.K3 s 976.KT743.KJ5.A5 ,430,25</span></p><p class="P7"><span class="T65"> </span><span class="T27">n KQJ76.AK8.8.AKT5 s T82.J9654.76.QJ6 ,300,24</span></p><p class="P7"><span class="T65"> </span><span class="T27">n 9.T93.K953.AQJT3 s A2.AKQ8765.2.K52 ,990,26</span></p><p class="P7"><span class="T65"> </span><span class="T27">Par NS = : Mean=  528.0000, Std Dev=  408.2259, Var=166648.4211</span></p><p class="P48"> </p><p class="P7"><span class="T5">tricks( </span><span class="T70">compass, strain </span><span class="T5">)</span></p><p class="P7"><span class="T76">Runs GIB's double-dummy engine  to compute the number of tricks that, at double-dummy par, will be taken by the given declarer in the given strain (suit or notrumps). GIB must be installed separately for this function to work. The executable </span><span class="T22">must</span><span class="T76"> be named </span><span class="T36">gibcli</span><span class="T76"> (lower case) and be in the directory </span><span class="T36">/usr/games.</span><span class="T76"> (This is a change from the version currently distributed by Debian.) In addition GIB requires that the file </span><span class="T36">eval.dat</span><span class="T76"> be located in the user's current working directory, not just in the directory where GIB, or Dealer, is installed. If you get an error from GIB when using this function check to see if you have the </span><span class="T36">eval.dat</span><span class="T76"> file that comes with GIB copied to your current  working directory. As of Dealer version 2.0 there should be no need to use this function, since DDS mode 1 does the same thing, is 5 times faster and does not require extra files or an extra program. A user might have several Dealer input files that he does not want to change, or he might have trouble getting DDS to run, but those are the only possible reasons to continue to use this function. The tricks results are cached.</span></p><h3 class="P88"><a id="a__External_Helper_Program"><span/></a><a id="__RefHeading___Toc9064_859034914"/>External Helper Program</h3><p class="P7"><span class="T76">In the earlier versions of Dealer, if you wanted to add functionality to the Dealer program, you had to add the code to do the evalution to the Dealer source, and also you had to modify the Dealer grammar and vocabulary to call upon the new functionality. This is the approach taken to add KnR evaluation to Dealer. Another approach is to have Dealer run an external program to produce the value needed; this meant you did not have to add the evaluation code to Dealer, but you still needed to modify the grammar and vocabulary to call upon the new function. This is the approach taken by the </span><span class="T5">opc </span><span class="T76">(calls a Perl script) and the </span><span class="T5">tricks </span><span class="T76">(calls the GIB binary) functions. In both cases Dealer needs to be rebuilt.</span></p><p class="P10">Obviously this approach cannot scale indefinitely. </p><p class="P7"><span class="T76">The </span><span class="T5">usereval</span><span class="T76"> functionality means that the user can write code external the Dealer program, and have Dealer run this code without needing to modify the Dealer source, or rebuild it. The user still needs to somehow provide the code to implement the functionality, but he can do so by whatever means is most convenient to him; his own code in whatever language he wants, or some binary he has obtained from somewhere etc. </span></p><p class="P11"> </p><p class="P7"><span class="T5">usereval: </span><span class="T76">This keyword is the one that implements the external helper functionality in Dealer. The client is Dealer. It allows the Dealer user, the client,  to pass to an external program, the server,  a </span><span class="T71">query </span><span class="T12">along with the data about the current deal. The purpose is to allow the user to define, and program, his own criteria and have that criteria form part of the evaluation. For example to implement Marty Bergen's Adjust-3 method of hand evaluation, or Danny Kleinman's  Little Jack Points the user could program these functions in an external program, and then have Dealer retrieve the relevant measure from that program via a </span><span class="T15">usereval</span><span class="T12"> call. See the Maintenance Documentation for instructions on how such a server communicates with Dealer, and some sample code in C. This distribution also includes a functioning server program that implements many different hand evaluation methods. </span></p><p class="P7"><span class="T12">The syntax is: </span><span class="T15">usereval( </span><span class="T71">tag, side, [suit,] idx</span><span class="T15"> ) </span><span class="T12">or</span><span class="T15"> usereval(</span><span class="T71">tag, compass, [suit,] idx </span><span class="T15">)</span></p><p class="P7"><span class="T12">"</span><span class="T71">tag</span><span class="T12">" is a query-id number; for example the number 1 might ask for Bergen evaluation, the number 2 for Kleinman evaluation. "</span><span class="T71">side</span><span class="T12">" is one of NS or EW (note the capitals). </span><span class="T71">compass</span><span class="T12"> and </span><span class="T71">suit</span><span class="T12"> have their usual meanings in this document. The "</span><span class="T71">suit</span><span class="T12">" term is optional (note that it is in square brackets). "</span><span class="T71">idx</span><span class="T12">" is the result number. For example result number 1 in the case of tag number 1, might be the Bergen value if the hand is played in NT, while result number 2 would be the Bergen value including dummy support points if the hand is played in a suit. Each call to the usereval server can return up to 64 different results. This can be important for efficiency reasons as we dont want to call external programs any more often than we need to. The user needs to know in which locations the metric returns the values.</span></p><p class="P21">This implies co-ordination between the coder and the user of the metric.</p><p class="P7"><span class="T14">Example:</span><span class="T12">  Descr.UE_Pav  in the Examples directory. The following is the relevant </span><span class="T15">usereval </span><span class="T12">portion:</span></p><p class="P36">#                    Total            North              South</p><p class="P36">action printrpt(NS,</p><p class="P36"><span>      "NS_NT=",usereval(10,NS,0),usereval(10,NS,1), usereval(10,NS,2),</span></p><p class="P36"><span>    "NS_Suit=",usereval(10,NS,3),usereval(10,NS,4), usereval(10,NS,5))</span></p><p class="P21">which produces output that looks like this where the numbers are the 'points' per the Pavlicek method</p><p class="P37">n KT98762..K5.KJ53 s Q43.KQ8754.83.Q9 ,'NS_NT=',19,10,9,'NS_Suit=',27,18,9</p><h3 class="P89"><a id="a__Arithmetic_and_Logical_Operators"><span/></a><a id="__RefHeading___Toc7140_2696138024"/>Arithmetic and Logical Operators</h3><p class="P7">In the condition statement (and also in the variable definitions) the various terms making up the complete condition are joined together by either arithmetic operators (+ and - being the most common ones used, but *, / and % are also available) or by logical operators. The logical operators come from the following list:</p><p class="P7">{<span class="T5">and, &amp;&amp;, or, ||, not, !,  &gt;, &gt;=, &lt;, &lt;=, ==, !=, ?: </span>}. </p><p class="P7">The use of the arithmetic operators should present no surprises, but some of the logical operators need explaining if you are not familiar with C programming.</p><p class="P7"><span class="T5">&amp;&amp;</span> is a synonym for '<span class="T5">and'</span>. Note that you need <span class="T21">both</span> ampersands, just entering one will result in an error.<span class="T5"> || </span>is a synonym for '<span class="T5">or</span>'. Again you need to enter <span class="T21">two</span> vertical bar symbols.  <span class="T5">!</span> is a synonym for '<span class="T5">not</span>'.  '<span class="T5">&gt;</span>' means 'greater than' , '<span class="T5">&gt;=</span>' means 'greater than or equal' and similarly for less than (<span class="T5">&lt;</span>) and less than or equal (<span class="T5">&lt;=</span>).  To test for equality you need to enter <span class="T23">TWO</span> equal signs(<span class="T132">==</span>). It is a common error for people not familiar with programming to enter for example <span class="T27">hcp(north, spades) = 7</span> to ensure that north has a good spade suit. This will result in an error; what you need to say is: </p><p class="P7"><span class="T27">hcp(north, spades) </span><span class="T136">==</span><span class="T47"> </span><span class="T27">7</span> This will test to see if north has at least AQJ or AK in the spade suit. The opposite of <span class="T132">==</span> is <span class="T132">!=</span> i.e. ''not equal'. </p><p class="P7"> </p><p class="P7">That leaves the mysterious <span class="T132">?:</span><span class="T76"> Dealer uses this combination as a kind of if statement.</span></p><p class="P10">It can be useful if you want to chose the larger (or smaller) of two quantities. For example the score keyword needs the number of tricks taken, and the contract and vulnerability </p><p class="P7"><span class="T76">i.e. </span><span class="T36">score(vul, z3Sx, MajTrx). </span><span class="T76">You want the variable MajTrx to be determined from the deal via a call to the DDS routines as in </span><span class="T36">MajTrx = dds(north,hearts) </span><span class="T76">But suppose you are trying to compare playing in a 4-4 spade fit  vs a 5-3 heart fit. You might want to call </span><span class="T5">score</span><span class="T76"> with either the tricks in spades or the tricks in hearts, whichever is greater. You can't do that with a </span><span class="T5">&gt;=</span><span class="T76"> operator because that one just gives  a true or false result. </span></p><p class="P7"><span class="T76">So </span><span class="T36">MajTrx = dds(north, hearts) &gt; dds(north,spades)</span><span class="T76"> will set MajTrx to 1 if hearts gets more tricks than spades, and 0 if it's the other way round. What you want is: </span></p><p class="P7"><span class="T57">MajTrx=(dds(north,hearts)&gt;dds(north,spades))</span><span class="T138">?</span><span class="T57"> dds(north,hearts)</span><span class="T138">: </span><span class="T57">dds(north,spades)</span></p><p class="P27"> </p><p class="P7"><span class="T98">This will test hearts vs spades, (the </span><span class="T107">clause</span><span class="T98"> to the left of the </span><span class="T87">?</span><span class="T98"> ) and set MajTrx to the heart tricks if the condition is true, and to the spade tricks if the condition is false.</span></p><p class="P7"><span class="T98">So the syntax for </span><span class="T87">?:</span><span class="T98"> is </span><span class="T49">(logic test)</span><span class="T48"> </span><span class="T47">?</span><span class="T48"> </span><span class="T49">action-if-true</span><span class="T48"> </span><span class="T47">:</span><span class="T48"> </span><span class="T50">action-if-false</span><span class="T48"> </span><span class="T98">This </span><span class="T133">?:</span><span class="T98"> operator is quite powerful; in C you can daisy chain conditional operators together one after the other. If you want to know more read up on C's 'ternary operator', sometimes called the 'trinary operator' or 'conditional evaluation' operator.</span></p><p class="P7"><span class="T98">The Examples Directory contains two files that show this operator in action: </span><span class="T101">Descr.ZarTest</span><span class="T98"> and </span><span class="T101">Descr.TernaryTest</span><span class="T98">. They both have code to find the longest suit length, the shortest suit length, and the second longest suit length, but the latter has more comments and explanations.</span></p><p class="P7"><span class="T98">e.g. MLS =</span><span class="T134"> ( </span><span class="T98">HL &gt;= </span><span class="T148">(</span><span class="T98"> </span><span class="T99"> (DL &gt;= CL) </span><span class="T98">? DL:CL </span><span class="T148">)</span><span class="T98">   </span><span class="T134">)</span><span class="T98"> ? HL :  </span><span class="T148">(</span><span class="T98">  </span><span class="T99">(DL&gt;=CL)</span><span class="T98"> ? DL:CL </span><span class="T148">) </span><span class="T98"> </span></p><p class="P7"><span class="T98">The part in green parens</span><span class="T148"> (</span><span class="T98"> (DL&gt;=CL) ? DL : CL </span><span class="T148">) </span><span class="T98">will compare DL to CL and choose the longest one. </span></p><p class="P13">So the top line compares HL to the longest minor and if it is greater choose HL otherwise </p><p class="P13">choose the longest minor.  You see you can nest at least one level in the ternary operator.                                        </p><h2 class="P86"><a id="a__The_Action_Statement"><span/></a><a id="__RefHeading___Toc2488_3691053158"/>The Action <span class="T149">Statement</span></h2><h3 class="P88"><a id="a__General_Description"><span/></a><a id="__RefHeading___Toc2565_3691053158"/>General Description</h3><p class="P7">Only the last action statement entered in the input file has any effect, even though several action statements can be entered. If there is no action statement entered, the default action is<span class="T5"> printall. </span></p><p class="P7"><span class="T76">The action statement can consist of a </span><span class="T22">list</span><span class="T76"> of actions, </span><span class="T22">joined by commas</span><span class="T76">. </span></p><p class="P10"> </p><p class="P7"><span class="T76">When the condition statement as entered by the user evaluates to </span><span class="T22">true</span><span class="T76"> for a given deal, Dealer will then perform the action(s) listed in the action statement. Action(s) always involve producing some form of output; the output can take place immediately at the time the deal is produced, or the action can create some data that will not be output until the end of the run.</span></p><p class="P10"> </p><p class="P7"><span class="T76">The output from the actions </span><span class="T5">export </span><span class="T76">and </span><span class="T5">csvrpt </span><span class="T76">go to files that the user specifies via one of the command line switches (or to stdout). The output of all other actions goes to stdout, generally the user's screen. It usually does not make sense for there to be more than one action generating screen output at the time each deal is produced because then the several output streams are all mixed together. For this reason the most common occurrence is to have only one print action in the action list. {But </span><span class="T5">export</span><span class="T76"> and </span><span class="T5">csvrpt</span><span class="T76"> actions can be mixed with each other and with print actions since they can each be output to their own file.}</span></p><p class="P7"><span class="T76">Ex: </span><span class="T36">action printoneline </span></p><p class="P7"><span class="T76">An exception is using the </span><span class="T5">printes,</span><span class="T76"> or</span><span class="T5"> printrpt, </span><span class="T76">actions as a debugging tool, while keeping the 'real' action also active. See the example below.</span></p><p class="P7"><span class="T76">However it is common to have one action that produces immediate output and then (possibly several) other action(s) such as </span><span class="T5">average</span><span class="T76"> and </span><span class="T5">frequency</span><span class="T76"> that produce output at the end of the run. Actions that produce output at the end of the run do not interfere with each other so you can have as many of them as you want.</span></p><p class="P10">Here is an example of an action statement (using a variable defined earlier) that illustrates how this is done:</p><p class="P7"><span class="T36">action  printes("vul 6D=  ",myscore1u, \n)</span><span class="T141">,</span><span class="T36"> </span></p><p class="P7"><span class="T37">        </span><span class="T36">printoneline</span><span class="T141">, </span></p><p class="P7"><span class="T37">        </span><span class="T36">printes("...............", \n)</span><span class="T141">,</span></p><p class="P7"><span class="T83">                   </span><span class="T36">average "My 6D score" myscore1u</span><span class="T141">, </span></p><p class="P7"><span class="T37">        </span><span class="T36">frequency "My Tricks" (myTricks, 6, 13)</span></p><p class="P7">For each 'interesting' deal the above action list will print: a debugging value, then the whole deal in single line format, then a row of dots. If the user has asked for 100 'interesting' deals then this pattern will be repeated each time, generating 300 lines of output. </p><p class="P7">Then at the end of the run  Dealer will print one line with the average score and then a frequency table consisting of a heading line and 10 lines of  of numbers.</p><p class="P7"> </p><p class="P7">Note that it is not necessary to put each action on a separate line. </p><p class="P7">A further note is that if you want to save the stdout output to a file, you re-direct  stdout using standard Linux command line syntax.</p><h3 class="P88"><a id="a__Actions_That_Produce_Output_at_End_of_Run"><span/></a><a id="__RefHeading___Toc2567_3691053158"/>Actions That Produce Output at End of Run</h3><p class="P7">These actions are: <span class="T5">print, evalcontract, average</span>, <span class="T5">frequency</span>, <span class="T76">and</span><span class="T5"> bktfreq.</span></p><p class="P48"> </p><p class="P7"><span class="T5">print( </span><span class="T71">compass [,compass, compass...] </span><span class="T15">)</span><span class="T12"> This is the action that is used to print the different compass directions on different pages. From one to four compass directions may be specified, but the usual case is to specify two. Thus one partner can have all the 'interesting' hands for one direction, while the other partner gets the hands for the direction opposite. This is ideal for bidding practice.  The title, (if there is one), player name, and board number are also included on this report. </span></p><p class="P21"> </p><p class="P21">Here is an example of the action statement </p><p class="P33">action print (south, north )</p><p class="P21">and the output(with title):</p><p class="P33">Bidding Practice National Teams Session 1  </p><p class="P33">North hands:</p><p class="P33"> </p><p class="P7"><span class="T29">   </span><span class="T28">1.                  2.                  3.                4.               </span></p><p class="P33">J T 6 3             J 6 4 2             7                 K J 2 </p><p class="P33">K 2                 A T                 J T 3             7 4 2 </p><p class="P33">Q T 7 6 5           J 7 4 2             J T 9 8 3         7 </p><p class="P33">8 2                 J 9 6               A J 9 8           J 9 7 6 4 2 </p><p class="P33"> </p><p class="P7"><span class="T29">   </span><span class="T28">5.                  6.                  7.                  8.               </span></p><p class="P33">K T 9 8             A J 8               7 4                 J 9 </p><p class="P33">K 6 5 2             Q 8 7 3             J 9 3               A T 9 2 </p><p class="P33">J 7 6 5 2           7 6 2               Q 9 5 2             Q 7 2 </p><p class="P33">-                   T 5 2               T 8 6 5             T 6 4 3 </p><p class="P33"> </p><p class="P21">&lt;there is a form feed that is output here. This should cause a new page on most printers&gt;</p><p class="P33">Bidding Practice National Teams Session 1  </p><p class="P33">South hands:</p><p class="P33"> </p><p class="P7"><span class="T29">   </span><span class="T28">1.                  2.                  3.                  4.               </span></p><p class="P33">9 8 2               A Q                 A J T 9 8 6 3 2     A 9 5 </p><p class="P33">A T 3               9 7 4 3 2           8 4                 A Q T 6 </p><p class="P33">J 4 2               A Q 5 3             Q 5                 J 8 3 2 </p><p class="P33">K Q 5 3             K 2                 2                   K 3 </p><p class="P33"> </p><p class="P34">   </p><p class="P33">5.                  6.                  7.                  8.               </p><p class="P33">J 4 2               -                   T 6                 7 6 3 2 </p><p class="P33">A T 9 8 7           A K 6 5 2           A T 7 6 5 2         K 8 4 </p><p class="P33">A                   Q T 9 8 5           J 8 6 3             K T 5 4 3 </p><p class="P33">A K J 6             A Q 6               7                   K </p><p class="P21"> </p><p class="P7"><span class="T12">Notice that even though </span><span class="T15">south</span><span class="T12"> appeared before</span><span class="T15"> north</span><span class="T12"> in the action statement the north hands were printed first. It is always the case that the hands (if asked for) are printed in player number order: North, East, South, West.</span></p><p class="P48"> </p><p class="P7"><span class="T5">evalcontract ( </span><span class="T71">side, contract, vuln </span><span class="T15">) </span><span class="T12">The </span><span class="T15">evalcontract </span><span class="T12">action will cause Dealer to use DDS to find the number of tricks that can be taken in the given strain by the given side, for each 'interesting' deal.  If you are specifying 5 or more </span><span class="T15">evalcontract</span><span class="T12"> statements, you should set the -M mode switch to 2 on the command line. (see command line switches later.)</span></p><p class="P57">Version 2.5 and later of Dealer remove the restriction on having only one contract in each strain per side. So you can now compare, for example, a contract of 3S by NS to a contract of 4S by NS without issue. Dealer's evalcontract code will now also output the percentage of games, and slams, missed and the lost imps per board in each case.</p><p class="P21">NOTE:</p><p class="P7"><span class="T12">The </span><span class="T15">evalcontract</span><span class="T12"> code calls DDS with </span><span class="T71">compass</span><span class="T12">=</span><span class="T15">west </span><span class="T12">if the side is </span><span class="T15">EW</span><span class="T12"> and with </span><span class="T71">compass</span><span class="T12">=</span><span class="T15">south</span><span class="T12"> if the side is </span><span class="T15">NS</span><span class="T12">. This implies that if the user wants to know how many tricks were taken on average, as well as the average score, he should use the same compass direction in his own </span><span class="T15">dds</span><span class="T12"> call to take advantage of caching, otherwise the run will take twice as long. </span></p><p class="P21">Dealer will then keep track of the number of times each trick count was achieved. At the end of the run for each of these trick counts (from 0 to 13) it will generate a score and figure out the average.</p><p class="P21">Below is an example in which the each side has 17 - 23 HCP, NS are balanced and want to play 2NT, and EW have a heart fit and take the push to 3H.  </p><p class="P28"> </p><p class="P28">generate 1000000</p><p class="P28">produce    1000</p><p class="P28">title "Eval NS in 2NTx vul and EW in 3Hxx nv"</p><p class="P28">condition ( hcp(north)+hcp(south)&gt;=17 &amp;&amp; hcp(north)+hcp(south)&lt;=23 &amp;&amp; hearts(east)+ </p><p class="P28">hearts(west)&gt;=9 &amp;&amp; (hcp(east)+hcp(west))&gt;=17 &amp;&amp;(hcp(east)+hcp(west))&lt;=23)</p><p class="P28">action   </p><p class="P7"><span class="T60">         </span><span class="T59">evalcontract ( NS , z2Nx , vul )</span><span class="T139">,</span></p><p class="P7"><span class="T60">         </span><span class="T59">evalcontract ( EW , z3Hxx , nv )</span></p><p class="P14">The Result:</p><p class="P28">Contract2Nx V by NS Average Result = -489.72, Made pct=16.20, Fail pct=83.80</p><p class="P7"><span class="T60"> </span><span class="T59">Missed Game_pct=5.50, Missed Slam_pct=0.00, Missed Game Imps/board=0.55, Missed Slam Imps/board=   0.00</span></p><p class="P28"> </p><p class="P28">Contract 3Hxx by EW Average Result = 545.84, Made pct= 69.90, Fail pct=30.10</p><p class="P7"><span class="T60"> </span><span class="T59">Missed Game_pct=39.60, Missed Slam_pct=3.40, Missed Game Imps/board=2.38, Missed Slam Imps/board=   0.46</span></p><p class="P28"> </p><p class="P28">Eval NS in 2NTx vul and EW in 3Hxx nv</p><p class="P28">Generated 17345 hands</p><p class="P28">Produced  1000 hands</p><p class="P28">Initial random seed 129163536341732</p><p class="P28">Time needed   26.752 sec</p><p class="P52"> </p><p class="P7">It is interesting to also look at the time taken as reported by the end of run statistics.  </p><p class="P31">Time needed   26.752 sec</p><p class="P7">The bulk of the time was taken by the 2000 calls to the DDS hand solver library. </p><p class="P7"> </p><p class="P21">For comparison to produce and analyze 10,000 deals to generate the 2D frequency plot (see later) took only 0.038 seconds. This illustrates the relative slowness of the DDS family of functions. And note also that Version 2.0 uses DDS which is 5x faster than GIB as used in the previous version. When you are used to 1 sec or less response times, 27 secs feels like an eternity.    :) !</p><p class="P21"> </p><p class="P21">Here is some sample output comparing a 2H vulnerable contract, with a 4H vulnerable contract:</p><p class="P28">Contract 2H V by EW Average Result = 177.86, Made pct=99.80, Fail pct= 0.20</p><p class="P28">Missed Game_pct=76.80, Missed Slam_pct=13.40, Missed Game Imps/board=7.68, Missed Slam Imps/board=2.17</p><p class="P21"> </p><p class="P28">Contract 4H V by EW Average Result = 465.34, Made pct= 76.80, Fail pct= 23.20</p><p class="P28">Missed Game_pct=0.00, Missed Slam_pct=13.40, Missed Game Imps/board=0.00, Missed Slam Imps/board=1.79</p><p class="P21"> </p><p class="P7"><span class="T5">average</span> [<span class="T70">quoted-string</span>] <span class="T70">expression </span><span class="T11">The keyword </span><span class="T15">average</span><span class="T11"> is followed by an optional </span><span class="T70">quoted string</span><span class="T11">, then by an </span><span class="T70">expression</span><span class="T11"> whose average is to be calculated. Note that the square brackets shown here do not appear in the input file, they merely indicate that in this instance the </span><span class="T70">quoted-string</span><span class="T11"> is optional. </span></p><p class="P19">The expression may be enclosed in parentheses but this is not necessary if the expression does not require it. The expression may be a single variable or any mix of variable(s) and Dealer functions, much the same as any expression that would appear in a condition statement. </p><p class="P19"> </p><p class="P19">Example:  (Note the comma at the end of the first line. Commas are necessary to link several actions into a list. )</p><p class="P35">action average "North GIB Tricks"  Ntr4,</p><p class="P7"><span class="T35">       </span><span class="T30">average "South GIB Tricks"  Str3</span></p><p class="P19"> </p><p class="P19">Output: </p><p class="P35">North GIB Tricks: Mean=9.20, Std Dev=2.59, Var=6.70, Sample Size=5 </p><p class="P35">South GIB Tricks: Mean=8.34, Std Dev=1.30, Var=1.70, Sample Size=5 </p><p class="P52"> </p><p class="P7">The extra information regarding the standard deviation and sample size is new in Version 2.0</p><p class="P7">Previous versions of Dealer did not do this.</p><p class="P48"> </p><p class="P7"><span class="T5">frequency</span> [<span class="T70">quoted-string</span>] <span class="T5">( </span><span class="T70">expression </span><span class="T72">, </span><span class="T70">lowerbound</span><span class="T72">, </span><span class="T70">upperbound </span><span class="T72">) </span><span class="T12">The keyword </span><span class="T15">frequency</span><span class="T12"> is followed by an optional </span><span class="T71">quoted string</span><span class="T12">, then a left parenthesis, which is required in this case, then the expression to be evaluated, a comma, a number  representing the lowerbound of the table,  a comma, then a number representing the upper bound of the table, then the closing right parenthesis.</span></p><p class="P21">During the run, for each 'interesting' deal, Dealer will count the number of times that each value of the expression occurs and generate a table accordingly. If the difference between upperbound and lowerbound is 'n' there will be n+1 slots in the table, plus two more to hold the counts that occur outside of the specified range. This is probably best explained with an example. The following shows the output when Dealer was asked to produce 1000 hands at random with no additional condition attached:</p><p class="P21">Here is the action statement:</p><p class="P33">action frequency "HCP North Between 15 and 17" (hcp(north), 15, 17)</p><p class="P21"> </p><p class="P21">And this is the end of run output:</p><p class="P33">Frequency HCP North Between 15 and 17 :</p><p class="P33">Low            849</p><p class="P7"><span class="T29">   </span><span class="T28">15           47</span></p><p class="P7"><span class="T29">   </span><span class="T28">16           33</span></p><p class="P7"><span class="T29">   </span><span class="T28">17           21</span></p><p class="P33">High            50</p><p class="P21">Dealer also has a '2 Dimensional' version of a frequency count; instead of just counting the number of times one thing occurs, it can count the number of times two things occur and then plot one versus the other. </p><p class="P21"> </p><p class="P21">The syntax is:</p><p class="P7"><span class="T15">frequency</span><span class="T12"> [</span><span class="T71">quoted-string</span><span class="T12">] </span><span class="T15">(</span><span class="T71">expression1 </span><span class="T72">, </span><span class="T71">lowbound1</span><span class="T72">, </span><span class="T71">upbound1, expression2, lowbound2, upbound2</span><span class="T72">)</span></p><p class="P21"> </p><p class="P21">For example we might compare the number of controls in a hand to the number of high card points in the hand to see how they relate:</p><p class="P38">action frequency "Controls(across) Vs HCP(down)" </p><p class="P38"><span> </span><span> ( hcp(north), 10, 23, controls(north),1,9)</span></p><p class="P21">Since there are never fewer than zero, or more than 12, controls we limit the top row accordingly.</p><p class="P21">The example limits the range of hcp under discussion to save space on the page.</p><p class="P21"> </p><p class="P21">Here is the output of the above action statement for 5000 hands:</p><p class="P33">Frequency Controls(across) Vs HCP(down):</p><p class="P7"><span class="T67">        </span><span class="T66">Low      1      2      3      4      5      6      7      8      9   High    Sum</span></p><p class="P43">Low     402    599    823    367     80      0      0      0      0      0      0   2271</p><p class="P7"><span class="T67">  </span><span class="T66">10      0     25    107    210    118      0      0      0      0      0      0    460</span></p><p class="P7"><span class="T67">  </span><span class="T66">11      0      3     58    166    143     48      0      0      0      0      0    418</span></p><p class="P7"><span class="T67">  </span><span class="T66">12      0      2     26    128    170     74     11      0      0      0      0    411</span></p><p class="P7"><span class="T67">  </span><span class="T66">13      0      1      8     72    154    116     11      0      0      0      0    362</span></p><p class="P7"><span class="T67">  </span><span class="T66">14      0      0      2     34    106    115     39      0      0      0      0    296</span></p><p class="P7"><span class="T67">  </span><span class="T66">15      0      0      1     13     55    110     48     15      0      0      0    242</span></p><p class="P7"><span class="T67">  </span><span class="T66">16      0      0      0      2     26     61     73     19      2      0      0    183</span></p><p class="P7"><span class="T67">  </span><span class="T66">17      0      0      0      1     13     27     46     34      1      0      0    122</span></p><p class="P7"><span class="T67">  </span><span class="T66">18      0      0      0      0      3     19     34     26      7      0      0     89</span></p><p class="P7"><span class="T67">  </span><span class="T66">19      0      0      0      0      2      7     22     24      7      2      0     64</span></p><p class="P7"><span class="T67">  </span><span class="T66">20      0      0      0      0      0      1     10     16     17      0      0     44</span></p><p class="P7"><span class="T67">  </span><span class="T66">21      0      0      0      0      0      0      2      9      7      3      0     21</span></p><p class="P7"><span class="T67">  </span><span class="T66">22      0      0      0      0      0      0      1      4      3      2      0     10</span></p><p class="P7"><span class="T67">  </span><span class="T66">23      0      0      0      0      0      0      0      0      0      3      0      3</span></p><p class="P43">High      0      0      0      0      0      0      0      0      0      4      0      4</p><p class="P43">Sum     402    630   1025    993    870    578    297    147     44     14      0   5000</p><p class="P48"> </p><p class="P7"><span class="T5">bktfreq </span><span class="T71">[quoted-string] ( expression , lowerbound, upperbound, size ) </span></p><p class="P7"><span class="T15">bktfreq </span><span class="T12">stands for 'Bucket Frequency'. The </span><span class="T15">bktfreq</span><span class="T12"> function is very similar to the </span><span class="T72">frequency</span><span class="T71"> </span><span class="T12">function. In the frequency function the gap between each counter is always 1. This works well when counting things like tricks, or controls, or hcp which have a range between 0 and 40 at most. But in the case of the </span><span class="T15">cccc, quality, opc,</span><span class="T12"> and </span><span class="T15">ltc</span><span class="T12"> functions  the values (because they are multiplied by 100) can range from 0 to 4000 internally; and further most of the time the gap between different values is 50 if we are counting say </span><span class="T15">ltc</span><span class="T12"> in half losers. That being the case you can't in practice use the frequency function to </span><span class="T12">plot statistics about any value that can be expressed as a </span><span class="T71">dotnum.</span><span class="T12"> The workaround is to specify the size of the gap between successive values. We call a gap of a certain size a 'Bucket'.  </span></p><p class="P7"><span class="T12">Refer back to the example where we showed the frequency of hcp between 15 and 17.  If we wanted to do the same for KnR points, using the </span><span class="T15">cccc</span><span class="T12"> function we would say:</span></p><p class="P33">action bktfreq "KnR North 15.0 to 17.0" (cccc(north),15.0,17.0,0.25)</p><p class="P21">The output gives you counts of KnR points in 0.25 point increments.</p><p class="P21"> </p><p class="P33">Frequency KnR North 15.0 to 17.0:</p><p class="P7"><span class="T29">  </span><span class="T28">Low            3969</span></p><p class="P7"><span class="T29"> </span><span class="T28">1500              74</span></p><p class="P7"><span class="T29"> </span><span class="T28">1525              79</span></p><p class="P7"><span class="T29"> </span><span class="T28">1550              75</span></p><p class="P7"><span class="T29"> </span><span class="T28">1575              45</span></p><p class="P7"><span class="T29"> </span><span class="T28">1600              49</span></p><p class="P7"><span class="T29"> </span><span class="T28">1625              53</span></p><p class="P7"><span class="T29"> </span><span class="T28">1650              56</span></p><p class="P7"><span class="T29"> </span><span class="T28">1675              42</span></p><p class="P7"><span class="T29"> </span><span class="T28">1700              41</span></p><p class="P7"><span class="T29"> </span><span class="T28">High             517</span></p><p class="P21"> </p><p class="P7"><span class="T12">Dealer also has a '2 Dimensional' version of </span><span class="T15">bktfreq</span><span class="T12"> for the same reason. This next example shows how we would compare KnR points vs the traditional HCP. Note that the </span><span class="T15">bktfreq </span><span class="T12">function can handle both dotnums and integers. </span></p><p class="P21">Here is the syntax:</p><p class="P33">bktfreq "KnR (down) vs HCP(across)" </p><p class="P33"><span> </span><span> (cccc(north),15.0,17.75,0.25, hcp(north),15,17,1)</span></p><p class="P7"><span class="T12">Notice that you must include the 'size' term in both expressions; that is why there is a </span><span class="T142">,1</span><span class="T12"> after the 17</span></p><p class="P21">And here are the results.</p><p class="P33">Showing 2D freq with Description[KnR (down) vs HCP(across)]</p><p class="P7"><span class="T29">         </span><span class="T28">Low     15     16     17   High    Sum</span></p><p class="P7"><span class="T29"> </span><span class="T28">Low    3943     79     17      0      0   4039</span></p><p class="P33">1500      42     19      7      1      0     69</p><p class="P33">1525      45     17      9      0      0     71</p><p class="P33">1550      46     10     13      2      0     71</p><p class="P33">1575      31     10      5      4      0     50</p><p class="P33">1600      19     13     12      1      2     47</p><p class="P33">1625      22     16      7      6      3     54</p><p class="P33">1650      16      8     19      7      1     51</p><p class="P33">1675      22      2      7      4      2     37</p><p class="P33">1700      16     12      5      9      3     45</p><p class="P33">1725      15      6      7      8      3     39</p><p class="P33">1750      19      4      6     11      3     43</p><p class="P33">1775      11      6      7      5      4     33</p><p class="P7"><span class="T29"> </span><span class="T28">High     34     43     46     44    184    351</span></p><p class="P7"><span class="T29"> </span><span class="T28">Sum    4281    245    167    102    205   5000</span></p><h3 class="P88"><a id="a__Actions_Outputting_for_Each_Interesting_Deal"><span/></a><a id="__RefHeading___Toc2490_3691053158"/>Actions Outputting for Each Interesting Deal</h3><p class="P7">These actions are:  <span class="T5">printpbn,  printall, printcompact, printoneline,  printside, printew, printns, printes, export, </span><span class="T76"> </span><span class="T5">csvrpt, </span><span class="T76">and</span><span class="T5"> printrpt</span></p><p class="P48"> </p><p class="P7"><span class="T5">printpbn </span><span class="T76">Print the deal in PBN format, with some extra fields defined for documentation. If a title has been entered it is also output to the PBN report, along with the dealer and the vulnerability. The primary use of this action is to export the deal in a format understood by other software.</span></p><p class="P7"><span class="T5">printall</span><span class="T76"> Output each deal, 4 hands across in the order North, East, South, West.  This is the default action if nothing else is specified. In Version 2.0 </span><span class="T5">printall</span><span class="T76"> also puts out the title, and the seat names on the report as well as the board number.</span></p><p class="P7"><span class="T37">                  </span><span class="T36">[Print All Misfit Example]</span></p><p class="P7"><span class="T37">   </span><span class="T36">1. North           East                South              West </span></p><p class="P7"><span class="T37">     </span><span class="T36">K Q T 9 3        J 5                 4 2               A 8 7 6 </span></p><p class="P7"><span class="T37">     </span><span class="T36">5                A K J 8 7 2         9 6 4 3           Q T </span></p><p class="P7"><span class="T37">     </span><span class="T36">A K T 9 5 2      J 8 4 3             7                 Q 6 </span></p><p class="P7"><span class="T37">     </span><span class="T36">A                3                   K Q J T 8 4       9 7 6 5 2 </span></p><p class="P44"> </p><p class="P45">   </p><p class="P44">2. North           East                South             West </p><p class="P7"><span class="T37">     </span><span class="T36">K Q 5 3 2        J 8                 T                 A 9 7 6 4 </span></p><p class="P7"><span class="T37">     </span><span class="T36">A 5              K T                 Q J 8 3           9 7 6 4 2 </span></p><p class="P7"><span class="T37">     </span><span class="T36">A 3              T 9 6 5 2           K Q J 7 4         8 </span></p><p class="P7"><span class="T37">     </span><span class="T36">K 5 3 2          Q J T 4             9 8 6             A 7 </span></p><p class="P7"><span class="T5">printcompact </span><span class="T12">[</span><span class="T15">(</span><span class="T71">optional expression</span><span class="T15">)</span><span class="T12">]</span><span class="T5"> </span><span class="T76">This action prints the deal in a compact format, 4 lines per deal. It has been used in the past primarily to output the deal in a format GIB will accept for Double Dummy analysis.  The optional expression can be used to show something like the number of tricks.</span></p><p class="P7"><span class="T76">Example: </span><span class="T36">printcompact </span><span class="T54">(</span><span class="T36">dds(north, spades)</span><span class="T54">)</span><span class="T36"> </span><span class="T76">Gives the output:</span></p><p class="P44">n AT3.JT2.QT6.K942</p><p class="P44">e 95.Q54.J8742.QJ8</p><p class="P44">s Q764.K63.AK53.A7</p><p class="P44">w KJ82.A987.9.T653</p><p class="P44">9  </p><p class="P13">The title is NOT output as part of this report as it is often used as the input to other programs.</p><p class="P7"><span class="T5">printoneline</span><span class="T12">[</span><span class="T15">(</span><span class="T71">optional expression</span><span class="T15">)</span><span class="T12">]</span><span class="T5"> </span><span class="T76">The output from this action is very similar to the printcompact output but it is all on one line. Example: </span><span class="T36">action  printoneline </span><span class="T54">(</span><span class="T36">dds(north,spades)</span><span class="T54">)</span></p><p class="P7">Result: (The number of tricks North can take in a spade contract is at the end of the line.)</p><p class="P26">n KQ6.K763.AK85.AT e AJ72.J2.Q763.982 s T954.AT84.94.KQ4 w 83.Q95.JT2.J7653 10</p><p class="P26">n KT85.J87.AK8.Q53 e J3.QT.Q432.A8764 s AQ6.AK543.965.K2 w 9742.962.JT7.JT9 11</p><p class="P26">n KJT64.AJ3.J8.AQT e 9875.986.T4.7643 s Q3.K42.AK72.KJ92 w A2.QT75.Q9653.85 12</p><p class="P26"> </p><p class="P12">This format is quite efficient, and it is convenient to read also. Each hand takes exactly the same number of characters to show regardless of distribution, so it looks good on the screen.  The title is NOT output as part of this report as it is often used as the input to other programs.</p><p class="P16"> </p><p class="P16"> </p><p class="P7"><span class="T87">printside(</span><span class="T89">side</span><span class="T94">)</span><span class="T87">, printew, printns </span><span class="T98">These three actions are all related. They print only two of the 4 hands side by side. </span><span class="T87"> printside( </span><span class="T89">EW</span><span class="T87"> ) </span><span class="T98">and </span><span class="T87">printew</span><span class="T98"> do the same thing, as do </span><span class="T87">printside(</span><span class="T98"> </span><span class="T89">NS</span><span class="T98"> </span><span class="T87">) </span><span class="T98">and </span><span class="T87">printns</span><span class="T98">. </span></p><p class="P13">The output looks like this:</p><p class="P7"><span class="T51">    </span><span class="T48">[Example of Reports Title  ]</span></p><p class="P7"><span class="T51">   </span><span class="T48">1. South              North</span></p><p class="P7"><span class="T51">     </span><span class="T48">J 9 8 2             Q 6 </span></p><p class="P7"><span class="T51">     </span><span class="T48">K                   Q T 8 </span></p><p class="P7"><span class="T51">     </span><span class="T48">Q T                 A K 9 3 2 </span></p><p class="P7"><span class="T51">     </span><span class="T48">A Q J T 9 5         8 7 6 </span></p><p class="P41"> </p><p class="P7"><span class="T51">   </span><span class="T48">2. South              North</span></p><p class="P7"><span class="T51">     </span><span class="T48">5 3                 A K Q 9 </span></p><p class="P7"><span class="T51">     </span><span class="T48">K J 9 2             A 8 </span></p><p class="P7"><span class="T51">     </span><span class="T48">Q 8 6 3 2           A T 7 </span></p><p class="P7"><span class="T51">     </span><span class="T48">A 9                 K 8 4 3 </span></p><p class="P7"><span class="T98">The previous version of Dealer had only the action </span><span class="T87">printew.</span></p><p class="P16"> </p><p class="P7"><span class="T5">printes( </span><span class="T71">expression-list </span><span class="T15">) </span><span class="T12"> This action is most often used to print various expressions in order to debug the input file. As shown at the beginning of this section you can have more than one </span><span class="T15">printes</span><span class="T12"> action intermixed with other actions. The </span><span class="T71">expression-list</span><span class="T12"> can contain </span><span class="T71">quoted strings</span><span class="T12"> to describe what is being printed, </span><span class="T71">variables</span><span class="T12">, and any other valid </span><span class="T71">expression</span><span class="T12">.  </span></p><p class="P7"><span class="T12">Example : </span><span class="T28">action  printes( "North Tricks in Spades ", nSpTrix, </span></p><p class="P33"><span> </span><span> ",  NS HCP= ", hcp(north)+ hcp(south), \n )</span></p><p class="P21">Will produce output like the following, one line per deal that matches the condition statement.</p><p class="P33"> </p><p class="P33">North Tricks in Spades 8,  NS HCP= 25</p><p class="P33">North Tricks in Spades 9,  NS HCP= 25</p><p class="P33">North Tricks in Spades 10,  NS HCP= 24</p><p class="P7"><span class="T15">printes</span><span class="T12"> does not automatically format anything for you. If you want spaces or commas between the expressions you must put them in yourself. </span><span class="T15">printes</span><span class="T12"> also does not put out newlines; if you don't put them out then all of the output will just be one long line. Notice that the newline expression, </span><span class="T145">\n,</span><span class="T12"> is NOT between quote marks.</span></p><p class="P21"> </p><p class="P7"><span class="T15">export( </span><span class="T71">side </span><span class="T15">) </span><span class="T12">or </span><span class="T15">export( </span><span class="T71">compass </span><span class="T15">) </span><span class="T12">The intent of this action is to output the side, or the compass, in a format that can be re-input to Dealer as a predeal argument. This allows the user to generate hands that meet a certain criteria, and then input those same hands into Dealer again to analyze how many tricks they would take against specified, or random, opposition. See the discussion of command line switches and scripting later in this document. If no -X switch is put on the command line the output goes to stdout the same as any other print related action. However if the user specifies a file name via the -X command line switch, the export output will be put to that file. This would allow the subsequent run of Dealer to be done via a shell script. </span><span class="T15">export</span><span class="T12"> will output either a side or a compass, but not a complete deal. However you can have more than one export action if necessary. </span></p><p class="P7"><span class="T12">Example:</span><span class="T15"> export( </span><span class="T12">EW</span><span class="T15"> )</span></p><p class="P25">-E ST865,HT73,DAJ97,C94  -W SAJ4,HKJ9,D853,CAQT7 </p><p class="P25">-E HJT7542,DKJT7,CKT3  -W SKQ9,HA8,DAQ43,CQ985 </p><p class="P7"><span class="T12">Example: </span><span class="T15">export(</span><span class="T12"> south </span><span class="T15">)</span></p><p class="P33">-S SK632,HK654,DA97,C87</p><p class="P63">Notice that the format of the output is compatible with the format of the <span class="T5">predeal</span> <span class="T70">holding</span> specifications.</p><p class="P63"><span class="T5">csvrpt(</span><span class="T71">  csvlist </span><span class="T15">)</span><span class="T12">  This action is described in the next section, along with how to use it.</span></p><p class="P63"><span class="T15">printrpt</span><span class="T12">( </span><span class="T71">csvlist</span><span class="T12"> ) This action is exactly the same as </span><span class="T15">csvrpt</span><span class="T12"> but it goes to stdout (the user's screen unless redirected) only. Allows the user to print arbitrary expressions and selections of hands to the screen, while still having a separate file for CSV data output. Think of </span><span class="T15">printrpt </span><span class="T12">as a combination of </span><span class="T15">printoneline </span><span class="T12">and </span><span class="T15">printes</span><span class="T12"> in one action.</span></p><p class="P63"><span class="T12">Example: </span><span class="T28">action printrpt(NS, "S:",trix(south), EW,"W:", trix(west)   )</span></p><p class="P63"><span class="T12">Output Result:</span><span class="T71">(each deal is on one line. \ means line continued )</span><span class="T12"> </span></p><p class="P7"><span class="T93"> </span><span class="T42">n KQ963.QJ4.J6.Q54 s 52.52.AKQ5.KJT62 ,'S:',9,8,6,8,7, \</span></p><p class="P7"><span class="T42">e A4.A9873.T72.A83 </span><span class="T45">w JT87.KT6.9843.97 ,'W:',4,5,7,5,4</span></p><p class="P42">n J5.J9753.T.AJT52 s AT76.A8.KQ72.873 ,'S:',9,6,8,7,8, \</p><p class="P42">e K92.K6.A8653.964 w Q843.QT42.J94.KQ ,'W:',4,7,5,6,5</p><h1 class="P84"><a id="a__CSV_Reports"><span/></a><a id="__RefHeading___Toc21319_670075485"/>CSV Reports</h1><p class="P63"><span class="T5">csvrpt(</span>[<span class="T70">expr|string|side|compass|</span><span class="T5">deal</span>]<span class="T5">) </span><span class="T76">and</span><span class="T5"> printrpt(</span><span class="T76">[</span><span class="T71">expr|string|side|compass|</span><span class="T5">deal</span><span class="T76">]</span><span class="T5">)</span></p><p class="P7"><span class="T70">The following description applies to both the </span><span class="T72">csvrpt</span><span class="T70"> and the </span><span class="T72">printrpt</span><span class="T70"> actions. The sole exception being that the </span><span class="T72">csvrpt</span><span class="T70"> action can output to either the screen or a specified file, whereas the </span><span class="T72">printrpt</span><span class="T70"> action will only output to the screen.</span></p><p class="P7">The original version of Dealer was primarily focused on printing out bridge hands for a human to read. But Dealer has also proven very valuable in simulation studies; in such studies it is often a downstream computer program that will want to process the Dealer output. In the previous version of Dealer this could be done with a combination of <span class="T5">printoneline</span> and<span class="T5"> printes </span>actions, but it was somewhat tedious and awkward. The PBN report could also be used for this purpose, but to use it needs special PBN input software; you cannot just import the report to a spreadsheet or database.</p><p class="P63">This version of Dealer has the ability to print information to an arbitrary filename (or stdout) in CSV (Comma Separated Value) format. There are many programs, such as Libre Office Calc, Excel, and various SQL databases,  that can import CSV formatted data directly. </p><p class="P7">The file to write the CSV output to, is specified on the command line with the -C option;  for example  <span class="T27">-C /tmp/MyDealerRun.csv </span>This file is opened in <span class="T21">append</span> mode by default. This allows the user to first write to this file various heading lines, such as a Title, a Run Date, and various column headings before running the Dealer program. It also allows the user to concatenate several Dealer runs into one file.  If the file does not exist then it is created. The user can also force the file to be opened in <span class="T21">write</span> mode where any existing file is overwritten and not appended to, by preceding the file name with <span class="T27">w: </span>For example <span class="T27">-C w:/tmp/MyDealerRun.csv</span></p><p class="P7">The type of action that creates a CSV output line is: <span class="T5">csvrpt </span><span class="T76">(or </span><span class="T5">printrpt</span><span class="T76"> for screen only output). The </span><span class="T5">csvrpt</span><span class="T76"> action will automatically put commas between the fields, quotes around the strings, and a newline at the end of each output record. The kinds of output that can be handled by this action are: </span></p><p class="P7"><span class="T76">a) a text string between double quotes,   b) any valid Dealer expression, c) from 1 to 4 hands from the current deal, d) the number of tricks that a hand, or side, can take,  or e) the number of tricks possible in </span><span class="T76">all 20 declarer-strain combinations for the deal. </span></p><p class="P7"><span class="T76">Types (a) and (b) simply duplicate the functionality of the </span><span class="T5">printes </span><span class="T76">action albeit somewhat more conveniently. Type (c) allows the various hands to be conveniently made part of the output record. Types (d) and (e) allow the user to get the number of tricks a hand (or all hands) can take in all 5 strains with a single action clause. Whereas the </span><span class="T5">dds </span><span class="T76">keyword will return the number of tricks possible for one </span><span class="T71">compass</span><span class="T76"> direction playing in one </span><span class="T71">strain</span><span class="T76">, the </span><span class="T5">trix(</span><span class="T71">compass</span><span class="T5">)</span><span class="T76">  keyword will return the number of tricks possible in all 5 strains for that compass direction, and </span><span class="T5">trix (deal )</span><span class="T76"> will return all 20 possible results. </span><span class="T71">(</span><span class="T72">deal</span><span class="T71"> is a keyword; compass is one of {</span><span class="T72">north,east,south,west</span><span class="T71">} )</span></p><p class="P10">The order of the strains is from left to right, Clubs, Diamonds, Hearts, Spades, No Trump. The hands are given in the order North, East, South, West.  These results will be a list of numbers comma separated so that they can be easily imported into another program. </p><p class="P10"> </p><p class="P53">CSV Report Examples</p><p class="P7"><span class="T22">Example 1: </span><span class="T76">Print a label, an expression, and the North South Hands</span></p><p class="P44">action csvrpt ("Full Test", hcp(north)+hcp(south), NS   )</p><p class="P10">Result:</p><p class="P7"><span class="T83">  </span><span class="T36">'Full Test',26,n AKJ3.KJ943.T76.J s T9762.A.Q.AK9842 </span></p><p class="P7"><span class="T37"> </span><span class="T36">'Full Test',16,n Q65.T.J98754.J63 s 972.AKQJ986.6.QT</span></p><p class="P10"> </p><p class="P7"><span class="T22">Example 2: </span><span class="T76">Some labels and expressions mixed including a call to the double dummy solver and showing the actual hands for one side only:</span></p><p class="P44"><span> action csvrpt("South HCP", hcp(south),</span></p><p class="P7"><span class="T37">                   </span><span class="T36">"North HCP", hcp(north),</span></p><p class="P7"><span class="T37">                   </span><span class="T36">"N+S HCP", hcp(south) + hcp(north),</span></p><p class="P7"><span class="T37">                   </span><span class="T36">"Tricks S NT= ", dds(south,notrump),</span></p><p class="P7"><span class="T37">                   </span><span class="T36">"N S Hands:", NS )</span></p><p class="P10">will result in output such as the following: (each record is all on 1 line, shown here on 2 lines)</p><p class="P7"><span class="T58"> </span><span class="T57">'South HCP',13,'North HCP',13,'N+S HCP',26,'Tricks S NT= ',8,   \</span></p><p class="P7"><span class="T58">         </span><span class="T57">'N S Hands:', n AKJ3.KJ943.T76.J s T9762.A.Q.AK9842 </span></p><p class="P7"><span class="T58"> </span><span class="T57">'South HCP',12,'North HCP',4,'N+S HCP',16,'Tricks S NT= ',6,    \</span></p><p class="P7"><span class="T58">         </span><span class="T57">'N S Hands:',n Q65.T.J98754.J63 s 972.AKQJ986.6.QT </span></p><p class="P27"> </p><p class="P7"><span class="T101">Example 3:</span><span class="T98"> Using the </span><span class="T87">trix</span><span class="T98"> clause with a compass in the </span><span class="T87">csvrpt</span><span class="T98"> action.  Showing the four hands, but as two sets of two so each side is together. The Input File to Dealer action statement is: </span></p><p class="P27">action csvrpt (NS,"S:",trix(south), EW, "W:", trix(west) )</p><p class="P27"> </p><p class="P13">And the CSV output for two deals looks like this (each deal is printed on 1 line, shown here on 2 lines) </p><p class="P7"><span class="T58"> </span><span class="T57">n AKJ3.KJ943.T76.J s T9762.A.Q.AK9842 ,'S:',11,6,8,12,8,   \</span></p><p class="P7"><span class="T58"> </span><span class="T57">e 854.87.KJ843.T75 w Q.QT652.A952.Q63 ,'W:',1,7,5,0,4</span></p><p class="P7"><span class="T58"> </span><span class="T57">n Q65.T.J98754.J63 s 972.AKQJ986.6.QT ,'S:',2,5,8,4,6,     \</span></p><p class="P7"><span class="T58"> </span><span class="T57">e JT43.4.AK32.A754 w AK8.7532.QT.K982 ,'W:',11,8,5,9,6</span></p><p class="P17"> </p><p class="P17"> </p><p class="P17"> </p><p class="P17"> </p><p class="P17"> </p><p class="P17"> </p><p class="P7"><span class="T101">Example 4:</span><span class="T98"> Using the </span><span class="T87">trix</span><span class="T98"> clause calling for all 20 trick counts, and showing all four hands:</span></p><p class="P13">Here is the action clause:</p><p class="P27">action csvrpt ( deal, trix(deal) )</p><p class="P13"> </p><p class="P13">And this is the output (Again each deal is printed all on one line)</p><p class="P7"><span class="T58"> </span><span class="T57">n AKJ3.KJ943.T76.J e 854.87.KJ843.T75 s T9762.A.Q.AK9842         \</span></p><p class="P27">w Q.QT652.A952.Q63 ,11,6,8,12,8,1,7,5,0,4,11,6,8,12,8,1,7,5,0,4</p><p class="P7"><span class="T58"> </span><span class="T57">n Q65.T.J98754.J63 e JT43.4.AK32.A754 s 972.AKQJ986.6.QT         \</span></p><p class="P27">w AK8.7532.QT.K982 ,2,5,8,4,6,11,8,5,9,6,2,5,8,4,6,10,8,5,9,6</p><p class="P13"> </p><p class="P7"><span class="T98">You may have noticed that in all of the above there are no commas in the hand strings when either a </span><span class="T89">side</span><span class="T98"> such as </span><span class="T87">NS</span><span class="T98"> or a </span><span class="T87">deal</span><span class="T98"> is wanted. The whole hand string is treated as one value for the CSV file. If you want each hand string to be a separate value you have to call for them separately. That is </span><span class="T87">csvrpt(NS)</span><span class="T98"> will print :                 </span><span class="T48">n AKJ3.KJ943.T76.J s T9762.A.Q.AK9842 </span><span class="T98">whereas </span><span class="T87">csvrpt(north,south)</span><span class="T98"> will print:   </span><span class="T48">n AKJ3.KJ943.T76.J</span><span class="T136">,</span><span class="T48">s T9762.A.Q.AK9842</span></p><p class="P13">Notice the comma before the 's'.</p><h1 class="P83"><a id="a__François_Dellacherie_Shape_Function"><span/></a><a id="__RefHeading___Toc6919_1409286116"/>Fran<span class="T10">ç</span>ois Dellacherie Shape Function</h1><h3 class="P88"><a id="a__Introduction_To_FDshape"><span/></a><a id="__RefHeading___Toc6921_1409286116"/>Introduction To FDshape</h3><p class="P7"><span class="T98">First it is important to note that both the original, HvS </span><span class="T87">shape(..)</span><span class="T98"> statement and the new FD </span><span class="T87">shape{..}</span><span class="T98"> statement can co-exist in the same Dealer input file.</span></p><p class="P13">The FD shape function is entered into the Dealer input file as follows:</p><p class="P7"><span class="T47">shape{</span><span class="T52">compass</span><span class="T42">, FDdist1 + FDdist2 + .... - FDdist_m1 - FDDist_m2 ... </span><span class="T43">}</span></p><p class="P14">The key difference from the HvS shape function is the use of braces, instead of parentheses, to enclose the arguments and the format of the arguments themselves. The arguments are parsed by an external Perl script and converted into a list of HvS distributions. This created list of HvS distributions is passed to the Dealer parser just as if it had been manually entered by the user into the input file.</p><p class="P14"> </p><p class="P7"><span class="T92">The file: README.fdp in the docs directory contains François' original description of his Perl script (which he called "dpp" for Dealer Pre Processor). The files Descr.ShapeFD1 and Descr.ShapeFD2 in the Examples directory contain several examples, with comments, of FDdistributions. If you want to test out an FDdistribution or shapelist, you can run the interactive version of the FD parser, "</span><span class="T42">fdpi</span><span class="T92">" and enter shapes from the keyboard. It will then tell you what the result will be, or will give an error message and exit. For example 6 or 7 Diamonds, and no other suit longer than 4 cards:</span></p><p class="P38">./fdpi</p><p class="P7"><span class="T43">?&gt;</span><span class="T42">shape{west, [67]d[0-4]c[0-4]h[0-4]s }</span></p><p class="P38">Parsing:: shape{west, [67]d[0-4]c[0-4]h[0-4]s }</p><p class="P38">[Length:269, patterns: 37] shape(west,0274 + 0364 + 0373 + 0463 + 0472 + 1174 + 1264 + 1273 + 1363 + 1372 + 1462 + 1471 + 2074 + 2164 + 2173 + 2263 + 2272 + 2362 + 2371 + 2461 + 2470 + 3064 + 3073 + 3163 + 3172 + 3262 + 3271 + 3361 + 3370 + 3460 + 4063 + 4072 + 4162 + 4171 + 4261 + 4270 + 4360)</p><p class="P39"> </p><p class="P38"> </p><p class="P7"><span class="T92">The user types </span><span class="T42">./fdpi </span><span class="T92">then at the </span><span class="T43">?&gt;</span><span class="T92"> prompt enters his FDshape specification </span><span class="T97">including braces and compass direction</span><span class="T95"> and types ENTER. The script then shows the total number of characters, including spaces, in the result string and the total number of </span><span class="T90">distributions</span><span class="T95"> that are in the</span><span class="T90"> shapelist</span><span class="T95">. </span></p><p class="P15">The file FDP_TestCases.dat in the Examples directory contains a long list of various FDshape commands with comments. You can see the result of this with the command:</p><p class="P40">./fdpi   &lt; Examples/FDP_TestCases.dat</p><p class="P7"><span class="T95">There are some limitations to François'  parser that it pays to be aware of. These are described in the </span><span class="T97">Caveats</span><span class="T95"> section later.</span></p><h3 class="P88"><a id="a__FDshape_Distribution_Operators"><span/></a><a id="__RefHeading___Toc6923_1409286116"/>FDshape Distribution Operators</h3><p class="P7">The FDshape function accepts distributions specified in a more powerful syntax than the HvS shape function. If you have already read the README.fdp file you will have a pretty good idea.</p><p class="P7">The extra functionality is implemented by a series of, what for lack of a better term I call, 'operators'.</p><p class="P7"> </p><p class="P54">General Rules for an FDdistribution.</p><p class="P7">1. The distribution should contain clauses for all 4 suits, even if it seems as if it should not be necessary. Ex:  <span class="T27">shape{west, 5s4h3dx}</span>  <span class="T21">the last 'x' is needed.</span></p><p class="P7">2. The distributions that have minus signs in front of them must come after all of the distributions that do not have minus signs, <span class="T21">and</span> there must be at least one non-minus sign distribution first. (xxxx) works.</p><p class="P7">3. As a rule letters, (Mmcdhs - see later) should come after the numbers, and the plus and minus signs.</p><p class="P7">4. The more specific parts of the distribution should be on the left of the less specific ones. In particular the Permutation operator should come last.</p><p class="P7">5. You cannot use the word <span class="T5">'any</span>' inside an FDshape argument list. It has been superceded by the Permutation operator.</p><p class="P7">6. See the section 'Caveats' for more information about FDshape limitations.</p><p class="P7"> </p><p class="P54">FDdistribution Operators</p><p class="P7">1. The first case is that there is no extra operator at all, and the distribution is entered exactly the same as it would have been entered into an HvS function. Ex: <span class="T55">shape{west, 4432 + 5xxx - xxx0 }</span></p><p class="P7">2. The 'At Least' Operator. This is a plus sign, '+'. A number followed by a + sign means no fewer than that many. <span class="T27">Ex: </span><span class="T55">shape{west,</span><span class="T27">3+5+xx}</span>  3 or more spades, and 5 or more hearts. (Not to be confused with the plus sign that joins distributions into a list).</p><p class="P7">3. The 'At Most' Operator. This is a minus '-' sign. A number followed by a - sign means no more than that many. <span class="T27">Ex: </span><span class="T55">shape{west,</span><span class="T27">3-xx5-}</span>  3 or fewer spades, and 5 or fewer clubs. (Not to be confused with the minus sign that joins distributions into a list).</p><p class="P7">4. You can specify the suits with the letters, 'c','d','h','s' in any order. Ex: <span class="T45">shape{west,3d2c4s4h }</span></p><p class="P7">5. The 'Permutation' Operator. This is a pair of parentheses enclosing some digits or x's. But enclosing x's does not have much of an effect. The Permutation operator should come at the end of the distribution.</p><p class="P7">Ex: <span class="T45">shape{west,53(14)}</span>  the same as <span class="T45">shape(west, </span><span class="T27">5314 + 5341)</span>.  And again</p><p class="P7"><span class="T125"> </span><span class="T45">shape{west, 5h(431) } </span><span class="T84">5 hearts and the other three suits in a 431 pattern, a total of six distributions. Expands to:  </span><span class="T27">shape(west,1534 + 1543 + 3514 + 3541 + 4513 + 4531)</span></p><p class="P7">The FDshape function is smart enought that if you enclose 4 characters in parens, it expands using the key word 'any'. Ex: <span class="T45">shape{west, (54xx) } </span><span class="T84">Expands to: </span><span class="T45">shape(west,any xx54)</span></p><p class="P12">6. The Major and minor Operators. Wherever you could use a suit letter (see 4 above) you can use the letter 'M' to mean either Hearts or Spades, and the letter 'm' to mean either Clubs or Diamonds.</p><p class="P7"><span class="T84">Ex: </span><span class="T45">shape{west, 4M6mxx } </span><span class="T84">becomes: </span><span class="T45">shape(west,4x6x + 4xx6 + x46x + x4x6)</span></p><p class="P12">7. The Range Operator. This allows you to specify a set of numbers in a distribution and to attach that set to a suit. For example [2-4]s[13579]hxx would mean 2,3, or 4 spades and an odd number of hearts.</p><p class="P7"><span class="T84">You can also mix the two forms as in [024-7]d to mean zero, two or between 4 and 7 diamonds (inclusively). For example:  </span><span class="T45">shape{west,[13]c[2-5]d[34]hx } </span><span class="T84">This will expand into 16 distributions: </span><span class="T45">shape(west,1453 + 2353 + 2443 + 3343 + 3433 + 3451 + 4333 + 4351 + 4423 + 4441 + 5323 + 5341 + 5431 + 6331 + 6421 + 7321)</span></p><p class="P7"><span class="T84">8. The Conditional Operator. This is the most complicated operator to explain, but it can handle cases that are hard to express with any of the above. You start with a distribution that includes any of the above  then you add the conditional operator, a colon, then you put an expression that evalutates to true or false. For example: </span><span class="T45">shape{west,(54xx):h&gt;s,d&gt;c }</span><span class="T84"> This would mean a 54xx permutation but only cases where hearts were longer than spades AND diamonds were longer than clubs would be accepted. </span></p><p class="P12">It expands to:</p><p class="P7"><span class="T102"> </span><span class="T55">shape(west,0454 + 1354 + 1453 + 1543 + 2452 + 2542 + 3451 + 3541 + 4531 + 4540)</span></p><p class="P7"><span class="T84">Compare that to: </span><span class="T45">shape{west,(5431) + (5422) + (5044) } </span><span class="T84">without the extra conditions, which gives: </span><span class="T45">shape(west,any 5431 + any 5422 + any 5440)  </span></p><p class="P7"><span class="T84">The 'expression' part of the condition (:) operator is made up of the letters c,d,h,s</span><span class="T85">,M,m</span><span class="T84"> which represent the length of the suit, the symbols &gt;,&lt;,&gt;=,&lt;=,==,!= and the arithmetic operators +, -, and maybe * and /. In addtion you can have </span><span class="T87">comma</span><span class="T88">s</span><span class="T87"> </span><span class="T84">representing an 'and' and the word '</span><span class="T87">or</span><span class="T84">' surrounded with spaces  to represent an 'or' condition.</span></p><p class="P7"><span class="T84">A complicated example: </span><span class="T45">shape{west,(5xxx):c&gt;6</span><span class="T136">,</span><span class="T45">d&lt;3 </span><span class="T136">or</span><span class="T45"> h+s==10 }</span></p><p class="P12">meaning a hand with a 5 card suit where length in the Majors is 10 OR where length in clubs is at least 7 AND diamond length is at most 2. which expands to: </p><p class="P26">shape(west,0508 + 0517 + 1507 + 5008 + 5017 + 5107 + 5503 + 5512 + 5521 + 5530)</p><p class="P12">Giving more flexibility, gives more possible distributions</p><p class="P7"><span class="T45">shape{west, (5xxx):h+s&gt;=9 or c&gt;6,d&lt;3} </span><span class="T46">  </span><span class="T84">Expands to 38 distributions </span></p><p class="P7"><span class="T45">shape{west, (5+xxx):h+s&gt;=9 or c&gt;6,d&lt;3} </span><span class="T46"> </span><span class="T84">Expands to 175 distributions.</span></p><p class="P115"><span class="T179">shape{north, x5+xx:h&gt;s,h&gt;=d,h&gt;=c or h==s}</span><span class="T86">  patterns: 124, Length:879, chars.</span></p><p class="P7"><span class="T179">shape{north,5+Mxxx:s&gt;=d,s&gt;=c or h&gt;=d,h&gt;=c}</span><span class="T85">  </span><span class="T86">gives</span><span class="T85"> </span><span class="T84">242</span><span class="T85"> </span><span class="T86">distributions</span><span class="T85"> and 1705</span><span class="T86"> chars.</span><span class="T84"> </span></p><p class="P18">Epilog</p><p class="P12">The longest 'Real Bridge' specification I have come up with so far is:</p><p class="P7"><span class="T84">A precision 1D opener, no 5cM, no 6c Club suit. </span><span class="T45">shape{north,4-s4-h5-cx}</span></p><p class="P12">Result is 1061 characters incl spaces and + signs and 150 separate distributions</p><h3 class="P88"><a id="a__Caveats_re_FDshape"><span/></a><a id="__RefHeading___Toc6925_1409286116"/>Caveats re FDshape</h3><p class="P7">1. If you are entering a shape about which you have any doubt, first try it out using the 'fdpi' utility. Just run <span class="T27">fdpi</span> from the command line then in answer to the <span class="T27">?&gt;</span> prompt enter your shape command complete with compass direction and braces, to see if the parser will have any trouble with it, and to see if you have made any mistakes.</p><p class="P7">2. The FD parser is a Perl script, based on Regular Expressions. It is not a full scale grammar parser. As such it expects its input to be a bit more structured. You cannot spread an FDshape specification across several lines for example, since Perl Regexes typically do not span multiple lines unless the coder takes particular care to do so.</p><p class="P7">3. In shape specifications, whether Dealer or FD, it is almost always a requirement that <span class="T21">all </span>the distributions to be excluded (those preceded by minus signs) must come after <span class="T21">all </span>the distributions to be allowed (those with plus signs). When you think about it this makes sense, you can't really exclude anything you have not allowed yet. And you must have at least one distribution that comes before the first minus sign. If you only want to exclude distributions (i.e. no 7+ suit) then the 'include' distribution can be (xxxx) .</p><p class="P115">4. <span class="T180">As shown above the conditional operator can have multiple clauses. But since there are no parantheses, one must be careful of the syntax when mixing the 'and comma' and the 'or' keyword. </span></p><p class="P115"> </p><p class="P7">See also the General Rules about <span class="T5">FDshape</span><span class="T76"> given earlier.</span></p><h1 class="P83"><a id="a__A_Complete_Example_from_Dealer_Version_1"><span/></a><a id="__RefHeading___Toc6857_3691053158"/>A Complete Example from Dealer Version 1 </h1><p class="P7">The following complete example is taken verbatim from the original user documentation. It shows the use of the most common types of conditions and actions.</p><p class="P7">The intent of this example (as described therein) is to produce some hands that match this situation:</p><p class="P7">You south, hold SAQ542, HKJ87, D32, CAK and the auction starts 1C on your left, 2D by partner, pass on your left. With the predeal command, you can assign these 13 cards to this player. Then you create <a href="./../../Debian/dealer/Manual/input.html#expr" class="Internet_20_link"><span class="Internet_20_link"><span class="T115">expressions</span></span></a><span class="T24"> </span>describing the 1C opener and the 2D overcall. Finally, you generate a number of hands fitting the conditions and (hopefully) find the solution for your problem.  </p><p class="P7"> </p><p class="P7">Here is the final input file to Dealer</p><p class="P6"> </p><p class="P6">generate   10000</p><p class="P6">produce    25</p><p class="P6">vulnerable ew</p><p class="P6">dealer     west</p><p class="P6">predeal    south SAQ542, HKJ87, D32, CAK</p><p class="P6">west1n = shape(west, any 4333 + any 4432 + any 5332 - 5xxx - x5xx) &amp;&amp;</p><p class="P5"><span class="T130">         </span><span class="T128">hcp(west)&gt;14 &amp;&amp; hcp(west)&lt;18</span></p><p class="P6">west1h = hearts(west)&gt;= 5</p><p class="P6">west1s = spades(west)&gt;= 5</p><p class="P6">west1d = diamonds(west)&gt;clubs(west) || ((diamonds(west)==clubs(west))==4)</p><p class="P6">west1c = (not west1n) &amp;&amp; hcp(west)&gt;10 &amp;&amp; clubs(west)&gt;=3</p><p class="P5"><span class="T130">         </span><span class="T128">&amp;&amp; (not west1h) &amp;&amp; (not west1s) &amp;&amp; (not west1d)</span></p><p class="P6">north2d = (hcp(north)&gt;5 &amp;&amp; hcp(north)&lt;12) &amp;&amp;</p><p class="P5"><span class="T130">          </span><span class="T128">shape(north, xx6x + xx7x - any 4xxx - any 5xxx)</span></p><p class="P6">condition  west1c &amp;&amp; north2d</p><p class="P68">action     printall</p><p class="P67"><span class="T116">There are many more examples in the Examples directory that come with the distribution.</span><span class="T118"> </span></p><h1 class="P83"><a id="a__End_of_Run_Statistics"><span/></a><a id="__RefHeading___Toc8396_428733583"/>End of Run Statistics</h1><p class="P7">The user can control whether he wants the end of run statistics to be printed by means of the -v command line switch. The default is to print them. Setting -v on the command line turns them off.</p><p class="P7"> </p><p class="P7">The end of run statistics look like this:</p><p class="P25">Print All Example</p><p class="P25">Generated 599 hands</p><p class="P25">Produced  3 hands</p><p class="P25">Initial random seed 189709657221267</p><p class="P25">Time needed    0.015 sec</p><p class="P7">The title is "Print All Example". No title is printed if none was entered. </p><h1 class="P83"><a id="a__Command_Line_Parameters"><span/></a><a id="__RefHeading___Toc7797_963076609"/><a id="_toc783"/>Command Line Parameters</h1><p class="P7">The command line parameters follow the usual Unix/Linux idiom of a dash then a single letter (no space between the dash and the letter). The single letter is known as the command line option or switch. Both terms are used. Some options take a value, some options do not. The -v option referred to earlier is one that does not take a value. All of the options that Dealer uses are a single character. Some are digits, some are upper or lower case letters. Upper and lower case letters refer to different options.  For example the option -v will turn off the end of run statistics, while the option  -V will print the version information. The options can be in any order, they can come before or after the input filename. Example: <span class="T27">dealerv2 -p 10  Descr.misfit -s2 </span></p><p class="P7">This command says to produce 10 deals, that the input file is named Descr.misfit and that the starting seed for the RNG is 2. </p><p class="P7"> </p><p class="P7">It is common in the Linux/Unix world for the option -h to print a help message and the option -V to print version information. The usual approach is that as soon as the program detects a -h or -V switch, it prints the required output and exits immediately without processing any further input.</p><p class="P7">Here is the output from <span class="T27">dealerv2 -V</span></p><p class="P25">Version info....</p><p class="P25">Revision: 2.5.6 </p><p class="P25">Build Date:[2023/03/21] </p><p class="P25">$Authors: Hans, Henk, JGM $</p><p class="P7"> </p><p class="P7"> </p><p class="P66">Here is the help message you get with the -h option. The list of valid options is on the line after the Usage text.</p><p class="P26">--- HELP COMING --- </p><p class="P26">./dealerv2 Usage: -[options] [input_filename | stdin] [&gt;output_file]</p><p class="P26">List of Run Time Options (all optional): [hmquvVg:p:s:x:C:D:M:O:P:R:T:N:E:S:W:X:U:0:1:2:3:4:5:6:7:8:9:]</p><p class="P26">h=Help u=UC_toggle v={Verbose, toggle EOJ stats} m={progress Meter}</p><p class="P26">q={PBN Quiet mode} V={show Version info and exit}</p><p class="P26"> </p><p class="P26">These next switches all require values either integers or strings </p><p class="P26">g={override Inputfile Generate} p={override Inputfile Produce}</p><p class="P26">s={override Inputfile starting Seed for RNG} {x=eXchangeMode:2|3}</p><p class="P26">C={Filename for CSV Report. (Precede with w: to truncate, else opened for append)}</p><p class="P26">N:E:S:W={Compass predeal holding} O={OPC evaluation Opener(NSEW) Default=[W|S]}</p><p class="P26">L={Set RP Library Mode and Path.<span class="T181"> </span>Default Path = ../rpdd.zrd </p><p class="P26">M={dds_Mode: 1=single solution, 2=20x solutions} R={Resources/Threads(1..9)}</p><p class="P26">P={vulnerability for Par computation: 0=NoneVul, 1=NS, 2=EW, 3=Both}</p><p class="P26">T={Title in quotes} U={DealerServer pathname}</p><p class="P26">X={Filename to open for eXporting predeal holdings}</p><p class="P26">D={Debug verbosity level 0-9; (minimal effect in production version)}</p><p class="P26">-0 to -9={set $0 thru $9 script parms in Inputfile one word or many in quotes}</p><p class="P26">--- HELP DONE --- </p><p class="P12"> </p><p class="P12">The first part of the help message lists those options that do not take a value, the next part lists the options that do require a value. The ones that take a value have a colon after the option letter. </p><p class="P12"> </p><p class="P7"><span class="T84">If you set the Debug (-D) option to 1 (or more) </span><span class="T100">and</span><span class="T84"> the -D switch appears on the command line </span><span class="T100">before</span><span class="T84"> either of the -V or -h switches (if any), you will get the various options and their settings printed out at the start of the run in alphabetical order. (There are also some fields shown that are not specifically options but are related to options, for example the length of the title string, or the MaxRamMB field. Like so: </span></p><p class="P7"><span class="T68">dealerv2 -D1 -T"Example Title" -s11 -XExport.dat -M2 -P1 -R6 -OW -x2 -p5  </span><span class="T69">-C </span><span class="T68">"</span><span class="T69">w:</span><span class="T68">MyDir/MyEval" -g100 -9 "altcount 9 13 9 5 2 1 " -2 "pt9" -V</span></p><p class="P12">The output showing the Options Settings:</p><p class="P29">Title: Example Title</p><p class="P29">Version info....</p><p class="P29">Revision: 2.5.<span class="T182">6</span> </p><p class="P29">Build Date:[202<span class="T182">3/03/21</span>] </p><p class="P29">$Authors: Hans, Henk, JGM $</p><p class="P29">../src/dealerv2.c:91 YYDEBUG NOT Defined.  BISON DBG IN_Active.  </p><p class="P29">Showing Options with Verbosity = 1</p><p class="P29"><span>  g:Maxgenerate=[100]</span></p><p class="P29"><span>  m:ProgressMeter=[0]</span></p><p class="P29"><span>  p:Maxproduce=[5]</span></p><p class="P29"><span>  q:Quiet=[0]</span></p><p class="P29"><span>  s:Seed=[11]</span></p><p class="P29"><span>  u:UpperCase=[0]</span></p><p class="P29"><span>  v:Verbose=[1 ; 1]</span></p><p class="P29"><span>  x:eXchange aka Swapping=[2]</span></p><p class="P29"><span>  C:Fname=[MyDir/Myrpt.csv] mode=[w]</span></p><p class="P29"><span>  D:Debug Verbosity=[1] set to 1 Server Debug=0</span></p><p class="P29"><span>  L:Fname=[=] rplib_mode[0] seed=[11]</span></p><p class="P29"><span>  M:DDS Mode=[2] set to 2</span></p><p class="P29"><span>  O:Opener=[W, 3]</span></p><p class="P29"><span>  P:Par Vuln=[1]</span></p><p class="P29"><span>  R:MaxThreads=[6]</span></p><p class="P29"><span>  R:MaxRamMB=[960]</span></p><p class="P29"><span>  T:Title=[Example Title],len=13</span></p><p class="P29"><span>  N:PreDeal=[]</span></p><p class="P29"><span>  S:PreDeal=[]</span></p><p class="P29"><span>  E:PreDeal=[]</span></p><p class="P29"><span>  W:PreDeal=[]</span></p><p class="P29"><span>  X:Fname=[Export.dat]</span></p><p class="P29"><span>  U:Fname=[]</span></p><p class="P29">Showing Script Vars with Verbosity = 1</p><p class="P29"><span>  [$2]=pt9</span></p><p class="P29"><span>  [$9]=altcount 9 13 9 5 2 1 </span></p><p class="P29"><span>  </span></p><p class="P7">You are also shown any script variables that have been set. If none are set then none are shown.</p><p class="P7"> </p><p class="P7">The following describes the effect of each of these option letters in detail. One thing to note is that where a value can be specified in the input file and as an option (for example <span class="T5">generate</span> or <span class="T5">produce</span>) the value set on the command line takes precedence. This saves the user the trouble of opening a text editor and changing the input file when only a minor change such as the number to produce is required.</p><p class="P7"><span class="T5">-g number </span>Generate. This option allows the user to override the value in the input file or the default value. The option letter 'g', must be followed by a numeric value.</p><p class="P7"><span class="T5">-m</span> Progress Meter. This option turns on the progress meter. If the run time is long-ish because the condition is difficult to meet, or there are many calls to a DDS function, the progress meter can print out the percentage completion during the run. It compares the number of hands produced so far to the number the user has asked for. </p><p class="P7"><span class="T5">-p number </span><span class="T76">Produce. This option allows the user to override the value in the input file or the default value. The option letter 'p' must be followed by a numeric value.</span></p><p class="P7"><span class="T5">-q </span>Suppress PBN output (useful for testing, then switch it back on when generating the "final" sample). </p><p class="P7"><span class="T5">-s number</span><span class="T76"> Starting seed for the RNG. By specifying a starting seed you can get repeatable results by specifying the same starting seed the next time.  A value of zero, or no -s option uses the Linux Kernel entropy pool to generate a starting seed.</span></p><p class="P7"><span class="T5">-u </span><span class="T76">Toggle upper case mode. </span></p><p class="P7"><span class="T5">-v </span><span class="T76">Toggle verbose mode. This will turn off the end of run statistics.</span></p><p class="P7"><span class="T5">-x 2|3</span><span class="T76"> Specify e</span><span class="T5">x</span><span class="T76">change aka swapping mode. In the previous version of Dealer this was implemented with 3 separate switches, -0 , -2, -3. Version 2.0 implements swapping/exchange mode with one switch which takes one of two values. </span><span class="T5">-x2</span><span class="T76"> keeps the N/S hands the same while exchanging the E/W hands. </span><span class="T5">-x3</span><span class="T76"> keeps the North hand the same while permuting the other 3 hands in every way possible. </span></p><p class="P7"><span class="T15">-C filename</span><span class="T12"> CSV output filename for the </span><span class="T15">csvrpt</span><span class="T12"> command. If no -C filename is entered the command will output to stdout (which may be redirected). See the</span><span class="T15"> csvrpt</span><span class="T12"> description for append or write mode.</span></p><p class="P7"><span class="T5">-D</span><span class="T76"> </span><span class="T5">number </span><span class="T76">Set the verbosity level for the debugging print statements. The usual range is from 0 to 9.  Zero will suppress all debugging output. The higher the number the more verbose the debugging output will be. Unless Dealer was compiled with -DJGMDBG as an option to gcc the -D switch will have no effect, since most of the debugging print statements are conditional on that symbol being defined. The two exceptions are that if -D1 (or higher) is specified then the list of option settings given earlier is </span><span class="T76">shown, and if -D2 or higher  is given the end of run stats will include a count of the number of times the GIB, DDS, OPC</span><span class="T81">, and USEREVAL</span><span class="T76"> calls were made, and how many of them came from the cache.</span></p><p class="P10">You can also pass a debug verbosity value to the DealerServer program by setting the -D option to include a decimal point. Example -D3.7 will set the debug verbosity for the Dealer program itself to 3, that of the DealerServer program (if one is called for) to 7. </p><p class="P8"><span class="T5">-</span><span class="T6">L &lt;filename&gt;</span><span class="T77"> Run Dealer in Library mode. The 'Library' in question is Richard Pavlicek's (see www.rpbridge.net) database of over 10 Million solved deals. Each deal in the Library has attached to it all 20 possible Double Dummy results. RP has generously made this database, which took him over 2 years of computer time to generate, available to the bridge community to be used in studies of bridge hands. See RP's website for more details on how he has used this resource in his own studies.</span></p><p class="P60"><span class="T76">The advantage of using this Library, instead of </span><span class="T78">deals dealt at random, is that </span><span class="T76">the </span><span class="T5">dds </span><span class="T76">keyword</span><span class="T78"> just looks up the solution as provided by the input, instead of calling the DDS solver. The lookup is of course much quicker.</span><span class="T79"> The same goes for Par calculations.While RP's Library does not include Par results, given the 20 possible results it does include, the DDS </span><span class="T8">par</span><span class="T79"> function is able to generate Par scores. </span></p><p class="P61"><span class="T76">To generate 1000 deals and calculate the Par score for each one, takes about </span><span class="T132">128 seconds</span><span class="T76">. To extract 1000 deals from the Library and calculate the Par score for each one takes only </span><span class="T169">0.033 seconds. </span></p><p class="P117"> </p><p class="P58"><span class="T76">The &lt;filename&gt; can be any name you would like to give the file. If you enter the single character </span><span class="T132">=</span><span class="T143"> </span><span class="T121">(the equal sign)</span><span class="T144"> </span><span class="T119">then the default filename </span><span class="T123">../rpdd.zrd</span><span class="T119"> is used. That means the file </span><span class="T123">rpdd.zrd</span><span class="T119"> in the parent directory of the one the user is currently in. </span></p><p class="P58"><span class="T119">To select deals from the library, use the same condition statement you would use to select deals from deals dealt at random. Dealerv2 treats the library as just another random source of deals, albeit one with the solved tricks attached. To access the tricks associated with each deal, use the same </span><span class="T123">dds</span><span class="T119"> keyword you would use normally. Therefore you can use the same input file you would use if the deals were dealt randomly, with no change. All you need to do is specify the -L switch on the command line.</span></p><p class="P59"> </p><p class="P58"><span class="T119">Using the -L switch to specify a library does have some side effects. Since the deal is completely specified by the input, the -L switch overrides and ignores any </span><span class="T123">predea</span><span class="T119">l or </span><span class="T123">swappin</span><span class="T119">g specifications.</span></p><p class="P118"> </p><p class="P9"><span class="T120"> The last side effect</span><span class="T122">,</span><span class="T120"> is the effect of the </span><span class="T124">seed </span><span class="T120">value. In Library mode, the seed value is used to set the starting point </span><span class="T117">in</span><span class="T120"> the Library file, in 1000 hand blocks. Thus a seed value of 17 means that the first record read from the file will be record number 17001. This allows the user to start the scan of the Library file from a different place for different runs. Because the Library file contains a maximum of 10</span><span class="T121">,</span><span class="T120">485</span><span class="T121">,</span><span class="T120">760 hands the maximum value of seed allowed is</span><span class="T121"> 10,485.</span></p><p class="P62"><span class="T119">If the program reaches the end of the file before being able to produce the required number of records, it will </span><span class="T114">wrap-around</span><span class="T119"> and start again at the beginning. But it will only do this once so there is no time wasted looking for something that will never happen. </span></p><p class="P119"> </p><p class="P119">See  Appendix <span class="T182">V </span>for more information about creating and downloading the Library file.</p><p class="P59"> </p><p class="P7"><span class="T5">-M 1|2 </span><span class="T76"> Set the DDS mode. 1= Single solution per call. 2=all 20 strain-declarer solutions per call.</span></p><p class="P7"><span class="T5">-O N|E|S|W</span><span class="T76"> set the Opener to be used in </span><span class="T5">opc</span><span class="T76"> evaluations. Default is West. </span></p><p class="P7"><span class="T5">-P 0|1|2|3 </span><span class="T76">Set the vulnerability to use for the Par calculations. 0=none, 1=NS, 2=EW, 3=both.</span></p><p class="P7"><span class="T5">-R 1 - 9 </span><span class="T76">Set the Resources for DDS mode 2 solutions. Sets the number of threads, and the number of threads also sets the amount of RAM required. Adding threads does not speed up DDS Mode 1.</span></p><p class="P10"/><p class="P7"><span class="T76">-T </span><span class="T15">quoted-string </span><span class="T12">Sets the Title to be printed on the reports. The user should limit the title to no more than 100 characters. If no title is entered on the command line or in the input file then no title is printed.</span></p><p class="P7"><span class="T15">-U pathname</span><span class="T12"> Sets the pathname of the </span><span class="T15">usereval</span><span class="T12"> server executable. The default is </span><span class="T28">DealerServer</span><span class="T71"> </span><span class="T12">in the current directory.</span></p><p class="P7"><span class="T15">-X filename</span><span class="T12"> Sets the output filename for the </span><span class="T15">export</span><span class="T12"> command. If no -X filename is entered the command will output to stdout (which may be redirected).</span></p><p class="P7"><span class="T15">-N, -S, -E, -W </span><span class="T71">holding-list </span><span class="T12">These switches allow the user to specify what is to be predealt to any or all of the compass directions. As shown in the example of the export output, a </span><span class="T71">holding </span><span class="T12">is a suit letter (capitals) followed by the cards in that suit that are to be predealt, in descending order. A </span><span class="T71">holding-list</span><span class="T12"> </span></p><p class="P7">is several holdings joined by commas. Any number of cards in any number of suits can be pre-dealt.</p><p class="P7"><span class="T5">-0  to -9</span><span class="T76"> Gives a value to the script parameter(s) $0 thru $9. The text (or number) that follows this parameter(s) will be substituted for the symbol(s) $0 thru $9 wherever they are found in the input file. See the instructions on using script variables later in the document.</span></p><h3 class="P88"><a id="a__Example_Simulation_Exercise"><span/></a><a id="__RefHeading___Toc2943_3691053158"/>Example Simulation Exercise</h3><p class="P7"><span class="T95">An example of the use of these options and the </span><span class="T96">export</span><span class="T95"> command is as follows:</span></p><p class="P7"><span class="T95">First run Dealer to </span><span class="T96">produce </span><span class="T95">some number (say 100) of NS hands that meet some criteria such as both being balanced with a total of 26.0 to 26.75 Optimal Points between them. Export these hands to a file OPC26NT.exp</span></p><p class="P15">Then create another description file that produces 200 deals where the NS hands are predealt. Average the number of tricks that NS can take, in some strain, in this case NoTrump.</p><p class="P15">Create a shell script that reads the OPC26NT.exp file one line at a time and for each line runs Dealer with the second description file. You will thus create 100 examples of a pair of hands that probably wants to play in 3NT, and you will average the number of tricks that each of those hands can take over 200 deals. A total of 20,000 situations analyzed. </p><p class="P15">Here is the sample code:</p><p class="P15">The first Dealer Input File, Descr.26NT</p><p class="P30">generate   100000</p><p class="P30">produce    100</p><p class="P30">title "OPC Bal 26opc  -s123 -m -v -D0"</p><p class="P30">opener west</p><p class="P30">condition ( shape(west, any 4333+any 4432+any 5332 -5xxx -x5xx ) &amp;&amp;</p><p class="P7"><span class="T62">            </span><span class="T61">shape(east, any 4333+any 4432+any 5332 -5xxx -x5xx ) &amp;&amp;</span></p><p class="P7"><span class="T62">            </span><span class="T61">26.0 &lt;= opc(EW,notrump) &amp;&amp; opc(EW,notrump) &lt;=26.75 )</span></p><p class="P30"> </p><p class="P30">action export ( EW ),</p><p class="P7"><span class="T62">        </span><span class="T61">printoneline</span></p><p class="P15"> </p><p class="P15">The screen output looks like: (100 lines printed)</p><p class="P30">n KJ2.Q52.K87.KJ87 e 8743.A9.642.QT64 s AT.JT874.953.932 w Q965.K63.AQJT.A5 </p><p class="P30">n 92.A65.9852.JT92 e J3.Q872.AJ64.AK5 s KQT865.K93.T3.73 w A74.JT4.KQ7.Q864 </p><p class="P15">The Export file looks like:</p><p class="P30">-E S8743,HA9,D642,CQT64  -W SQ965,HK63,DAQJT,CA5 </p><p class="P30">-E SJ3,HQ872,DAJ64,CAK5  -W SA74,HJT4,DKQ7,CQ864</p><p class="P15"> </p><p class="P15"> </p><p class="P15"/><p class="P15">The second Dealer Input File looks like:</p><p class="P30">generate   100000</p><p class="P30">produce    200</p><p class="P30">title "OPC Bal 26opc  Verify"</p><p class="P30">opener west</p><p class="P30"> </p><p class="P30">action  frequency "Bal 26opc" (dds(west,notrump), 6, 12 ),</p><p class="P7"><span class="T62">        </span><span class="T61">average "3NT Success Pct " ( dds(west,notrump) &gt;= 9 )*100,</span></p><p class="P30"> </p><p class="P15">The shell script that runs this file is:</p><p class="P30">#!/bin/bash</p><p class="P30">usage() {</p><p class="P7"><span class="T62"> </span><span class="T61">echo usage: $0 file_of_predeals Ofile_for_append DealerIn_File \</span></p><p class="P30"><span> </span><span> e.g. DOP26NT.exp DOP26NT.results Check.DOP26NT</span></p><p class="P30">}</p><p class="P30"> </p><p class="P30">if   [ $# -lt 3 ] ; then usage ; exit 0 ; fi</p><p class="P30">fin=${1}</p><p class="P30">fout=${2}</p><p class="P30">fctl=${3}</p><p class="P30">echo "Opening Predeal file ${fin} Appending to Output file ${fout} \</p><p class="P30"><span> </span><span> using control file ${fctl}"</span></p><p class="P7"><span class="T63">while read predeal</span><span class="T61">; do</span></p><p class="P30"><span> precnt=$(( $precnt+1 ))</span></p><p class="P30"><span> echo "Starting Record # $precnt "</span></p><p class="P7"><span class="T61">        echo Analyzing EW hands: </span><span class="T63">${predeal}</span><span class="T61"> &gt;&gt;${fout}</span></p><p class="P7"><span class="T62">        </span><span class="T61">./dealerv2 -m -s117 -M1 -D0 -v </span><span class="T63">${predeal}</span><span class="T61"> ${fctl}     &gt;&gt;${fout}</span></p><p class="P7"><span class="T61">done &lt;</span><span class="T63">${fin}</span></p><p class="P30">echo "Done. Results appended to ${fout}"</p><p class="P7"><span class="T95">Note how the script reads the file created earlier by the export command and stores the text in the shell variable </span><span class="T135">${predeal}</span><span class="T95">.  The script then passes that text into the Dealer predeal specification via the command line options -W and -E.  In effect the line:</span></p><p class="P7"><span class="T44">./dealerv2 -m -s117 -M1 -D0 -v </span><span class="T137">${predeal}</span><span class="T44"> ${fctl}  &gt;&gt;${fout}</span></p><p class="P15">becomes:</p><p class="P7"><span class="T44">./dealerv2 -m -s117 -M1 -D0 -v</span><span class="T95">  </span><span class="T61">  \</span></p><p class="P7"><span class="T62">       </span><span class="T140">-E S8743,HA9,D642,CQT64  -W SQ965,HK63,DAQJT,CA5</span><span class="T61"> </span><span class="T44">${fctl}  &gt;&gt;${fout}</span></p><p class="P7"><span class="T95">The results in the output file, </span><span class="T90">${fout}, </span><span class="T95"> look like:</span></p><p class="P30">Analyzing EW hands: -E S8743,HA9,D642,CQT64 -W SQ965,HK63,DAQJT,CA5</p><p class="P30">Frequency Bal 26opc:</p><p class="P7"><span class="T62">    </span><span class="T61">6         31</span></p><p class="P7"><span class="T62">    </span><span class="T61">7         49</span></p><p class="P7"><span class="T62">    </span><span class="T61">8         15</span></p><p class="P7"><span class="T62">    </span><span class="T61">9          4</span></p><p class="P7"><span class="T62">   </span><span class="T61">10          1</span></p><p class="P7"><span class="T62">   </span><span class="T61">11          0</span></p><p class="P7"><span class="T62">   </span><span class="T61">12          0</span></p><p class="P30">3NT Success Pct : Mean= 63.0000, Std Dev= 25.6432, Var= 657.5758, Sample Size=200</p><p class="P30">Analyzing EW hands: -E SJ3,HQ872,DAJ64,CAK5 -W SA74,HJT4,DKQ7,CQ864</p><p class="P30"> </p><p class="P30"> </p><p class="P30"> </p><p class="P30"/><p class="P30">Frequency Bal 26opc:</p><p class="P7"><span class="T62">    </span><span class="T61">6          0</span></p><p class="P7"><span class="T62">    </span><span class="T61">7          0</span></p><p class="P7"><span class="T62">    </span><span class="T61">8         46</span></p><p class="P7"><span class="T62">    </span><span class="T61">9         49</span></p><p class="P7"><span class="T62">   </span><span class="T61">10          5</span></p><p class="P7"><span class="T62">   </span><span class="T61">11          0</span></p><p class="P7"><span class="T62">   </span><span class="T61">12          0</span></p><p class="P30">3NT Success Pct : Mean= 54.00, Std Dev= 50.09, Var=  2509.09, Sample Size=200 </p><p class="P30"> </p><p class="P15">There will be one set of such results for each of the EW hands that were exported to the export file.</p><p class="P15">So what we have done is used Dealer to generate some hands that we wish to analyze, and then we have exported those hands in a format where we can use Dealer to do the analysis for us. We have then automated the whole process with a shell script.  In practice we would want the second Dealer file to produce 1000 - 5000 deals and average the results. We would then have generated 100 'Game in NoTrump' hands, and analyzed several thousand cases for each of those hands to see how often they made 9 or more tricks. And we would not have had to spend a lot of time at the computer manually editing the Dealer input file to change the predeal specification.</p><h1 class="P83"><a id="a__Scripting_the_Input_File"><span/></a><a id="__RefHeading___Toc7101_3691053158"/><a id="_toc958"/>Scripting the Input File</h1><p class="P7"> </p><p class="P7"><span class="T164">When u</span>sing Version 2.<span class="T164">x</span> of Dealer<span class="T164">,</span> the user has the ability to make the Input File contain some 'variables' that can be specified at run time. There are 10 of these, and they are written in the Input File as $0 thru $9. When Flex sees one of these in the Input File, it temporarily leaves the Input File and it starts reading from a string variable. It reads as many words as there are in the string variable, passing each word to the parser in turn. When it reaches the end of the string variable, it resumes reading the Input file where it left off. The net effect is that the two characters in the Input File (e.g. $0 etc.) are replaced by as many words as there are in the input string. Many times there will be only one word in the input string but this is not a requirement. So long as the end result is a valid Dealer statement, your creativity can be your guide. </p><p class="P7">The input strings that Flex reads from are filled by specifying their values on the command line with the options -0 thru -9. </p><p class="P7"> </p><p class="P7">Here is an example where we first generate some Weak NT hands (12 -14 hcp for West) and then some strong ones (West has 15 - 17 hcp). Notice that the script variables $1, $2, and $3 are just single 'words' aka tokens. But $0 is several 'words' or tokens; however many it takes to specify the shape of the East hand. </p><p class="P7"> </p><p class="P116">This is the relevant part of the file, "NTscript<span class="T183">.dls</span>"<span class="T183"> :</span></p><p class="P116"> $1 is a compass direction, west, $2 and $3 are numbers, and $0 is a shape specification.</p><p class="P7"> </p><p class="P7"><span class="T27">NTshape = shape(</span><span class="T54">$1</span><span class="T27">, any 4333 + any 4432 + any 5332 - 5xxx - x5xx)</span></p><p class="P7"><span class="T27">condition shape ( east, </span><span class="T54">$0</span><span class="T27"> ) &amp;&amp; NTshape &amp;&amp; </span></p><p class="P7"><span class="T65">   </span><span class="T27">(hcp(</span><span class="T54">$1</span><span class="T27">) &gt;= </span><span class="T54">$2</span><span class="T27">) &amp;&amp; (hcp(</span><span class="T54">$1</span><span class="T27">) &lt;= </span><span class="T54">$3</span><span class="T27"> ) </span></p><p class="P25">action printew</p><p class="P25"/><p class="P7">We run dealer passing the values of $0 - $3 on the command line: </p><p class="P7"><span class="T45">./dealerv2 Descr.NTscript -s1 </span><span class="T47">-1</span><span class="T45"> west </span><span class="T47">-2</span><span class="T45"> 12 </span><span class="T47">-3</span><span class="T45"> 14 \</span></p><p class="P7"><span class="T53">                          </span><span class="T47">-0</span><span class="T45"> "5xxx + x5xx - any xxx0 - any xxx1"  </span></p><p class="P7"> </p><p class="P7">A couple of hands produced from the above:</p><p class="P7"><span class="T125">   </span><span class="T27">1. West            East                         2. West            East </span></p><p class="P7"><span class="T65">     </span><span class="T27">K 5            A Q J 7 3                 K 7            3 2 </span></p><p class="P7"><span class="T65">     </span><span class="T27">K 4 3          A J 8 7                            A J 2          Q 7 6 5 3</span></p><p class="P7"><span class="T65">     </span><span class="T27">K T 8 3        A 6                                       A J 9 3        Q T 5</span></p><p class="P7"><span class="T65">     </span><span class="T27">K T 9 5        8 2                                       J 9 3 2        Q 8 6 </span></p><p class="P25"> </p><p class="P25"> </p><p class="P7"> </p><p class="P7">Next we run dealer with different values of hcp on the command line:</p><p class="P7"><span class="T45">./dealerv2 Descr.NTscript -s1 </span><span class="T47">-1</span><span class="T45"> west </span><span class="T47">-2</span><span class="T45"> "15" </span><span class="T47">-3</span><span class="T45"> "17"  \</span></p><p class="P7"><span class="T53">                          </span><span class="T47">-0</span><span class="T45"> "5xxx + x5xx - any xxx0 - any xxx1"  </span></p><p class="P7"> </p><p class="P7">And we get hands like these two:</p><p class="P7"><span class="T65">   </span><span class="T27">7. West          East                  8. West          East</span></p><p class="P7"><span class="T65">     </span><span class="T27">A K 9          Q 3 2                    K 9 7          Q J 6 2 </span></p><p class="P7"><span class="T65">     </span><span class="T27">J 9            A Q 8 7 5                   A K 6          T 9 8 5 2  </span></p><p class="P7"><span class="T65">     </span><span class="T27">Q T 9          6 4                           A T 3          7 6</span></p><p class="P7"><span class="T65">     </span><span class="T27">A J T 5 3      K 6 4                   Q J T 4        8 3  </span></p><p class="P25"> </p><p class="P7">Since we are just doing text substitution we can even have some keywords be set by variables. For example if we want to switch between <span class="T5">HCP</span> and '<span class="T5">C13</span>' points we make the condition clause:</p><p class="P7"><span class="T27">condition NTshape &amp;&amp; ( </span><span class="T54">$9</span><span class="T27">($1)&gt;=$2) &amp;&amp; ( </span><span class="T54">$9</span><span class="T27">($1)&lt;=$3 )&amp;&amp; shape(east,$0)</span></p><p class="P7">and then run Dealer with either:</p><p class="P7"><span class="T45">/dealerv2 Descr.NTscript -s1 -1 west -2 "15" -3 "17" </span><span class="T47">-9 hcp  </span><span class="T48">\</span></p><p class="P7"><span class="T53">                          </span><span class="T45">-0 "5xxx + x5xx - any xxx0 - any xxx1" </span></p><p class="P12">or</p><p class="P7"><span class="T45">/dealerv2 Descr.NTscript -s1 -1 west -2 "15" -3 "17" </span><span class="T47">-9 pt9 </span><span class="T48">\</span></p><p class="P7"><span class="T53">                          </span><span class="T45">-0 "5xxx + x5xx - any xxx0 - any xxx1"   </span> </p><p class="P7"> </p><p class="P7">The first run will of course duplicate the strong NT examples above. In the second run, the West hands no longer have 15 - 17 HCP but instead 15 - 17 "C13" points where an Ace=6, King=4, Queen=2 and Jack=1.</p><p class="P7">Here are some West hands:</p><p class="P7"><span class="T125">  </span><span class="T65"> </span><span class="T27">1.                  2.                  5.                  6.               </span></p><p class="P25">K 5                 T 8 5               K 8 5 2             A 3   </p><p class="P25">K 4 3               K 8 6               Q T 4               Q 9 2 </p><p class="P25">K T 8 3             T 9                 K Q T               Q J T 4 </p><p class="P25">K T 9 5             A K J T 3           K 9 2               K Q 9 6 </p><p class="P7"><span class="T125"> </span>4*4 = 16                                 4+6+4+1 = 15           <span>          4+2+6+4 = 16                           6+2+3+6  = 17                                 </span></p><p class="P7"/><p class="P7">The values taken on by the script variables are simply passed in on the command line; this allows the user to write shell scripts, and to read the script variables from a file, or to be generated via a <span class="T74">for</span> loop and so on. See the Example Simulation Exercise section prior, for how this could be done. </p><p class="P7">By harnessing the power of shell scripting, Dealer V2.<span class="T170">x</span> should allow the user to run unattended simulations, quite conveniently.</p><p class="P7"> </p><p class="P7">You can put script values into FDshape statements the same as you could in HvS shape statements. E.G. the Examples directory contains the file Descr.ScriptFD with the following excerpt:</p><p class="P7"><span class="T55">condition  shape</span><span class="T152">{</span><span class="T64">$1</span><span class="T55">, </span><span class="T64">$2</span><span class="T55">:d&gt;c or h&gt;s</span><span class="T152">}</span><span class="T55"> &amp;&amp; </span><span class="T64">$0</span><span class="T55">(</span><span class="T64">$1</span><span class="T55">) &lt;= </span><span class="T64">$5</span></p><p class="P26">/* you can run the above for example with :: </p><p class="P7"><span class="T55">dealerv2 </span><span class="T64">-0 pt9</span><span class="T55"> </span><span class="T64">-1 west</span><span class="T55"> </span><span class="T64">-2 '(55xx)'</span><span class="T55"> </span><span class="T64">-5 20</span><span class="T55"> Descr.ScriptFD */</span></p><p class="P7"> </p><p class="P7"><span class="T21">Caveat: </span>The scripting variables in the Input File cannot be between quotes; if you write "$1" for example, it loses it's special meaning and just becomes the text string $1. The only case I can think of where this might be a problem is if you want to debug your script and you put the $1 in a <span class="T5">printes</span> statement. </p><p class="P7">For example if $1="north" and the North hand has 14 HCP, then the statement:</p><p class="P7"><span class="T125"> </span><span class="T27">printes( "HCP for compass $1 = " , hcp($1) , \n )</span></p><p class="P7">will print out:  <span class="T27">HCP for compass $1 = 14</span> </p><p class="P7">And if you try it like this: </p><p class="P7"><span class="T125"> </span><span class="T27">printes( "HCP for compass ", $1, " = " , hcp($1) , \n )</span></p><p class="P7">You will get an error because the parser will see the statement:</p><p class="P25">printes( "HCP for compass ", north, " = " , hcp(north) , \n )</p><p class="P7">and the first  '<span class="T27">north</span>' is not a valid expression in this context. </p><p class="P7"> </p><p class="P7">Thus far we have seen that it is straightforward to use the script variables in the place of numbers or key words, or even strings where the bare string is valid, such as in a <span class="T5">shape</span> statement. However if you want to have the a string appear in a print statement such as <span class="T5">printes</span>, or as a label for the <span class="T5">action</span> or <span class="T5">frequency</span> output,  you must resort to a bit of trickery.</p><p class="P7"> </p><p class="P7">In order to be recognized as a string by the lexer, the string must be in double quotes. So this means that <span class="T21">after </span>the lexer has made the substitution, there must be double quotes  in the result.</p><p class="P7">So in order to have for example the date as part of your <span class="T5">average</span> label, your command line would need to be like this:</p><p class="P25">./dealerv2 -2 ' "Rundate=2022-Feb-12" ' Descr.STRscr</p><p class="P7">This will save the string between the single quotes, including the double quotes, in the script variable so that after the lexer has substituted the string for the $2 script variable, there is a valid Dealer string there, i.e. text between double quotes.</p><p class="P7"> </p><p class="P7">And the Input File could be:</p><p class="P25">action</p><p class="P25">printoneline,  average $2 controls(west)</p><p class="P25"> </p><p class="P7"> </p><p class="P7">which would generate output like this:</p><p class="P26">n KQ72.JT532.5.KQ4 e J8654.6.K43.AJ93 s T.K.AQJT96.T8752 w A93.AQ9874.872.6 </p><p class="P26">n A87653.A4.T5.T93 e KQJT2.963.9643.8 s 4.J872.KQJ872.54 w 9.KQT5.A.AKQJ762 </p><p class="P26">Rundate=2022-Feb-12: Mean= 3.0000, Std Dev=1.6997, Var= 2.8889, Sample Size=10 </p><h1 class="P83"><a id="a__Running_Dealer"><span/></a><a id="__RefHeading___Toc20444_2914024446"/>Running Dealer</h1><p class="P7">Windows users see the section on Dealer and WSL. Then if necessary come back to this section or the next one.</p><p class="P7">Dealer itself does not need to be installed in any particlar place; you can install it in your home directory or (if you have super user priviledges) in any convenient path such as <span class="T27">/usr/games.</span></p><p class="P7">The Dealer binary is called: <span class="T27">dealerv2 </span>It does not rely on any other files to execute in most cases; the exception(s) being the three external programs, <span class="T27">fdp, dop, </span>and<span class="T27"> gibcli</span> must be installed in the correct places. The locations of these three programs have been hardcoded into the source of the DealerV2 program.  The default location and program name for the UserEval server is <span class="T177">DealerServer</span> in the current directory. The name and location can be overridden by the -U command line switch.</p><p class="P7">If you run the command <span class="T27">sudo ./install_dealer.bash</span> from within the directory which contains the repository, this will install everything in the right place. </p><p class="P7">To uninstall it run : <span class="T27">sudo ./Un_install_dealer.bash</span> from whithin the repository directory.</p><p class="P7">From within the <span class="T27">Prod</span> directory you can also type <span class="T27">make install </span>or <span class="T27">make uninstall</span>. </p><p class="P7">If you do install Dealer<span class="T184">V2</span> in this way the install process adds the location of Dealer<span class="T184">V2</span> to your PATH variable so that you can run DealerV2 no matter which directory you are in, by typing <span class="T27">dealerv2</span></p><p class="P7"><span class="T125"> </span>If you want to use François Dellacherie shapes, or use OPC hand evaluation, you also need to have Perl installed.</p><p class="P7">If you have cloned the repository, but have not yet run the install step, you can run dealer by changing to the repository directory and typing: <span class="T27">./dealerv2</span>  This command will run the binary that actually exists in the Prod directory. </p><p class="P7">There is not yet a man page for Dealer version 2. This document is it. </p><p class="P7">Your first Dealer command should probably be <span class="T27">dealerv2 -h -V </span>as shown. This will produce a rather extensive help message and the Version information and exit. (See the section on Command line arguments.)</p><p class="P7">To run Dealer and actually produce some hands you first create a file that specifies your conditions and actions. In the Examples provided, these files usually have a name of the form Descr.xxxxx where the xxxxx gives some hint as to what the purpose of the input file is. You then run Dealer like so:</p><p class="P7"><span class="T27">./dealerv2 Examples/Descr.Demo </span>and you will get some output to the screen.</p><p class="P124"> </p><p class="P125">As of version 2.5.6 the input files to dealerv2 have been given the names xxxxx.dli to correspond to how most filenames have an application specific suffix. 'dli' is an acronym for 'dealer input'. Whenever you see Descr.xxxxx in this document expect to find the file named xxxxxx.dli instead.</p><p class="P124"> </p><p class="P7">To run the binary as it exists in the github repo, will most likely require that you have installed the same version of the various libraries that are standard with GCC. This likely means the same version of Ubuntu and the same version of GCC that were present when the binary was built.</p><p class="P7">If you get a complaint about <span class="T27">libgomp1</span> not found you can try:</p><p class="P7">(This will save you having to have the developer tools , and rebuilding Dealer).</p><p class="P7"><span class="T125">    </span><span class="T27">sudo apt-get install libgomp1</span></p><p class="P7"><span class="T70">The final character above is a ONE not an ell.</span> </p><p class="P7">If you are not so lucky you will need to rebuild Dealer from source. See the next section.</p><p class="P7">There is a copy of <span class="T27">libgomp.so.1 </span>in the stdlib subdirectory in case you have trouble finding it.</p><p class="P7">For a 64 bit system it should be in location: <span class="T27">/usr/lib/x86_64-linux-gnu/libgomp.so.1</span></p><h1 class="P83"><a id="a__Installing_and_Building_Dealer_--_Linux"><span/></a><a id="__RefHeading___Toc20446_2914024446"/>Installing and Building Dealer -- Linux</h1><p class="P7">More detail on installing Dealer is in the Maintainer's guide. This is a quick summary for those that just want to use the program. Note that in order to Build Dealer you will need certain developer tools installed. To clone the repository you will need <span class="T27">git </span>installed.</p><p class="P7">The easiest way to get DealerV2 is to use <span class="T27">git</span> and clone the repository. Change to the directory where you would like the copy of the repository to reside, e.g. your Home directory or /usr/games etc and issue the command:</p><p class="P25">git clone https://github.com/dealerv2/Dealer-Version-2-</p><p class="P7">to create the directory: <span class="T27">Dealer-Version-2- </span>Note the dash at the end of the line is required. </p><p class="P7"> </p><p class="P7">To see the structure of this directory you can type: <span class="T27">tree -L 1 -F Dealer-Version-2-</span></p><p class="P7">The result will be<span class="T171"> similar to</span>:</p><p class="P7">├── DDS_Demo/</p><p class="P7">├── dealerv2 -&gt; Prod/dealerv2*</p><p class="P7">├── Debug/</p><p class="P7">├── DebugExamples/</p><p class="P7">├── docs/</p><p class="P7">├── DOP/</p><p class="P7">├── DOP4DealerV2.tar.gz</p><p class="P7">├── Examples/</p><p class="P7">├── fdpi -&gt; ./lib/fdpi*</p><p class="P7">├── include/</p><p class="P7">├── install_dealer.bash*</p><p class="P7">├── lib/</p><p class="P7">├── LICENSE_GPLV3</p><p class="P7">├── PreProcessor/</p><p class="P7">├── Prod/</p><p class="P7">├── README.md</p><p class="P7">├── Regression/</p><p class="P7">├── src/</p><p class="P7">├── stdlib/</p><p class="P7">├── Un_install_dealer.bash*</p><p class="P7">└── UserEval/</p><p class="P7">The primary directories of interest are the <span class="T27">Prod/</span> directory and the <span class="T27">Examples/</span> directory.</p><p class="P7">The binary for Dealer is Prod/dealerv2. There are many examples of Dealer input files with names <span class="T185">beginning with "Descr."</span> <span class="T184">ending with ".dli" </span>in the Examples directory.</p><p class="P7">If you want to rebuild Dealer from source you need to have some developer tools installed. These are all standard Linux packages so you should be able to install them with your package manager (<span class="T27">apt-get, rpm, dnf, synaptic </span>etc.) Of course to install these you will need sudo priviledges.</p><p class="P7">The tools you will need  are:</p><p class="P25">bison, flex, make, gcc, g++ and git. </p><p class="P7">Bison should install <span class="T27">m4</span> with it; if it does not you will need to install <span class="T27">m4 </span>also. </p><p class="P7">You will need <span class="T27">git </span>if you choose to clone the repo (recommended) instead of downloading the zip file. </p><p class="P7">Once the tools are installed, to (re)-build the binary <span class="T27">cd</span> to the Prod directory and type:</p><p class="P7"><span class="T27">make clean ; make allheaders ; make</span> </p><p class="P7">Ignore the warnings about unused variables and the tmpname function and so forth. If you have a reasonably standard Linux setup this should be all you need to rebuild dealerv2 for your system.</p><p class="P7">For further notes on building the Debug version and verifying the functioning of Dealer see the Maintainer's documentation.</p><h1 class="P83"><a id="a__Installing_and_Building_Dealer_--_Windows"><span/></a><a id="__RefHeading___Toc7799_963076609"/>Installing and Building Dealer -- Windows</h1><p class="P7">If you are a Windows user and want to use DealerV2 there is bad news and good news.</p><p class="P7">The good news is that DealerV2 <span class="T21">will </span>run under Windows Subsystem for Linux (WSL), usually without rebuilding. See the next section.  </p><p class="P7">The bad news is that Dealer Version 2, unlike Dealer Version 1.x,  is a Linux only program. There has been no attempt to maintain portability to other flavors of Unix, or Windows, or even MacOS. If you want a native Windows version you will have to port the code yourself. Since I know nothing about Windows development, and very little about Windows generally, I cannot help you.</p><p class="P7"> </p><p class="P7">Several people have even succeeded in Re-Building DealerV2 from source, on their Windows machines using WSL. Here in general are the steps that they found necessary:</p><p class="P7">1) Install WSL from the Microsoft store. You will  need to decide what flavor of WSL to get. From the reports on Github both Untuntu 18.04 and 20.04 will work.</p><p class="P7">2) Once you have Ubuntu/Linux/WSL working, you will need to install the developer tools necessary to build from source. (If you just want to run the binary, see the next section ).</p><p class="P7">3) When the developer tools are all installed, then you can rebuild Dealer as described in the preceding section, "Installing and Building Dealer -- Linux".</p><h3 class="P88"><a id="a__Install_and_Run_on_WSL_without__Re__Building"><span/></a><a id="__RefHeading___Toc6608_3989013113"/>Install and Run on WSL without (Re) Building </h3><p class="P7">A user has reported he successfully executed dealerv2 on his windows pc following this process</p><p class="P7"> </p><p class="P7">1: Open a command prompt in <span class="T21">administrato</span>r mode</p><p class="P7">2: Execute <span class="T27">wsl --install</span></p><p class="P7">3: Restart computer - after restart windows will install Linux</p><p class="P7">4: Enter name and password of your own choice and close that window. [<span class="T70">This name and password will be your User ID under Linux. By default this UID will have 'administrator' aka 'superuser' or 'sudo' priviledges.]</span></p><p class="P7">5: Open a command prompt and switch to the directory where you want your input files</p><p class="P7">6: Type <span class="T27">bash </span>and <span class="T27">enter</span> and you will now start Linux</p><p class="P7">7: Enter (You may need to install git. See the next section ). </p><p class="P7"><span class="T27">        sudo git clone https://github.com/dealerv2/Dealer-Version-2-.git </span>[You will have to enter your password from step 4 for <span class="T27">sudo</span> to work.]</p><p class="P7">8 Execute command: [This will save you having to have the developer tools , and rebuilding Dealer].</p><p class="P7"><span class="T125">    </span><span class="T27">sudo apt-get install libgomp1</span></p><p class="P7"><span class="T70">The final character above is a ONE not an ell.</span> </p><p class="P7">Go to the next section " Running Dealer on WSL".</p><h3 class="P88"><a id="a__Rebuild_Dealer_V2_from_Source_on_WSL"><span/></a><a id="__RefHeading___Toc6610_3989013113"/>Rebuild Dealer V2 from Source on WSL</h3><p class="P7">The steps are the same  as in the previous section up to step 6. </p><p class="P7">From there  install the developer tools you need: <span class="T27">git, make, flex, bison, gcc, g++</span></p><p class="P7">with commands: </p><p class="P7"><span class="T153">sudo apt update &amp;&amp; sudo apt upgrade</span><span class="T45"><br/></span><span class="T153">sudo apt install make</span><span class="T45"><br/></span><span class="T153">sudo apt-get install gcc</span><span class="T45"><br/></span><span class="T153">sudo apt-get install -y bison</span><span class="T45"><br/></span><span class="T153">sudo apt-get install flex</span><span class="T45"><br/></span><span class="T153">sudo apt-get install g++</span><span class="T45"><br/>sudo </span><span class="T153">git clone </span><a href="https://github.com/dealerv2/Dealer-Version-2-.git" class="Internet_20_link"><span class="Internet_20_link"><span class="T154">https://github.com/dealerv2/Dealer-Version-2-.git</span></span></a></p><p class="P7"> </p><h3 class="P88"><a id="a__Running_Dealer_on_WSL_after_Install_and_or_Build"><span/></a><a id="__RefHeading___Toc6612_3989013113"/>Running Dealer on WSL after Install and/or Build</h3><p class="P7">Switch to the downloaded repository</p><p class="P7"><span> <span class="T27">cd Dealer-Version-2-</span></span></p><p class="P7">type</p><p class="P25"><span> ./dealerv2 -h -V</span></p><p class="P7">This will give you a brief help message, the version information , and then exit.</p><p class="P7">To actually have Dealer produce some output you need to give some specifications.</p><p class="P7">There are several specification files in the Examples directory or you can enter directly from the command line. </p><p class="P7"> </p><p class="P7">From the command line for example:</p><p class="P25">./dealerv2 &lt;ENTER&gt;</p><p class="P25">produce 5</p><p class="P25">condition hcp(north) &gt; 12</p><p class="P7"><span class="T27">^D  (Control-D) </span>Control-D is the Linux End of File signal from the keyboard.</p><p class="P7">Now you should get the output from Dealer</p><p class="P7"> </p><p class="P7">From an Examples description file, from the repository directory:</p><p class="P25">./dealerv2 Examples/<span class="T186">2nt_</span>Demo<span class="T184">.dli</span></p><p class="P7">And you will see <span class="T176">10</span> sets of hands.</p><h1 class="P83"><a id="a__Creating_a_Custom_Evaluation_Server"><span/></a><a id="__RefHeading___Toc8940_2019595254"/>Creating a <span class="T160">Custom Evaluation Server</span></h1><p class="P7">The idea behind the DealerServer binary, see the UserEval directory, is to enable a user to write code that can be called to implement new functionality in Dealer without having to invent new vocabulary and syntax. Constantly adding words and grammar to Dealer every time new functionality is needed is not scalable in the long term. The earlier version of Dealer already did this in a way by calling an external program (GIB, DPP and DOP perl scripts), but this still needed new syntax and vocabulary. The keyword, <span class="T72">usereval</span>, acts as a general purpose 'gateway' function to user provided code.</p><p class="P7">See the Maintainer's guide for a few more details, and browse the files, <span class="T27">UserServer.c, metrics_calcs.c </span><span class="T151">and</span><span class="T27"> factors.c</span> in the <span class="T27">UserEval </span>directory. These files show how to provide to  Dealer evaluations based on many different 'metrics', such as Goren, Pavlicek, Bergen,or even your own method, not only for a single hand but also for a pair of hands; thus allowing for 'support points' or misfit deductions and so on.</p><h1 class="P83"><a id="a__Glossary_of_Reserved_Words_in_Dealer"><span/></a><a id="__RefHeading___Toc18172_2383521750"/><a id="_toc1162"/>Glossary of Reserved Words in Dealer</h1><p class="P7">Case matters. Order of cards usually matters. Words ending in 's' can be reserved.</p><p class="P7"> </p><p class="P7">Here is a list of all the reserved words in alphabetical order:</p><p class="P7">ace, aces, action, all, altcount, and, any, average, both, bktfreq, c13, cccc, club, clubs, condition, control, controls, csvrpt, dds, deal, dealer,diamond, diamonds, EW, export, frequency,</p><p class="P7">generate, gib, hascard, hcp, hcps, heart, hearts, imp, imps, jack, jacks, king, kings, loser, losers, ltc, </p><p class="P7">none, not, notrump, notrumps, NS, nv, opener, opc, or, </p><p class="P7">par, pointcount, predeal, print, printall, printcompact, printes, printew, printns, printoneline, printpbn, printrpt, printside, produce, pt0, pt1, pt2, pt3, pt4, pt5, pt6, pt7, pt8, pt9, </p><p class="P7">quality, queen, queens, rnd, score, seed, shape(), shape{}, spade, spades, </p><p class="P7">ten, tens, title, top2, top3, top4, top5, trick, tricks,  trix, usereval, vul,  vulnerable</p><p class="P7"> </p><p class="P7">In addition these arithmetic operators and some special characters, have special meaning to Dealer: </p><p class="P7"><span class="T54">+ - * / % = &gt; &lt; &gt;= &lt;= != == ? : " , ( ) # /* */ //</span><span class="T27">  </span></p><p class="P7">The scripting variables $<span class="T54">0,$1,$2,$3,$4,$5,$6,$7,$8,$9</span><span class="T5"> </span><span class="T76">can also be considered to be reserved words.</span></p><h1 class="P83"><a id="a__Appendix_I__--_Linux_Command_Line_Quickstart"><span/></a><a id="__RefHeading___Toc18174_2383521750"/>Appendix I. -- Linux Command Line Quickstart</h1><p class="P63">This appendix is an attempt to introduce Windows users to the Linux command line. At least enough for them to understand the terms so that they can Google productively.</p><p class="P7"><span class="T155">Somewhat to my surprise there are more Windows users interested in Dealerv2 than Linux users.</span><span class="T104"><br/></span><span class="T155">Since I wrote the Manual etc. essentially from a Linux users perspective, perhaps a bit of an introduction to the Linux command line is in order.</span><span class="T104"><br/></span><span class="T155">Fortunately there are literally thousands of articles on the Net on how to use the Linux command line so I don't have to repeat them here.</span><span class="T104"><br/></span><span class="T155">But the following is a bit of a Quickstart so at least you know what to Google for if the Linux command line is new to you.</span></p><h3 class="P90"><a id="a__Linux_Command_Line_Basics"><span/></a><a id="__RefHeading___Toc18176_2383521750"/>Linux Command Line Basics</h3><p class="P7"><span class="T155">1. Don't be embarrassed if you need a bit of help. Even 'native' Linux users, prefer the GUI and need some encouragement to use the command line.</span><span class="T104"><br/></span><span class="T155">2. The 'Command Prompt' in Linux is called '</span><span class="Emphasis"><span class="T155">bash'</span></span><span class="T155">. This is the name of the 'shell' that is the most </span><span class="T155">common on Linux. 'shell' is a very old name from the 1960's Bell Labs unix days that means the Command Interpreter. You give commands to the 'shell' and it then asks the OS (Linux) to execute them for you.</span><span class="T104"><br/></span><span class="T155">3. All the commands that you can give to the shell you can put in a file and then tell the shell to run the commands in the file as a single job. The equivalent concept in the Windows/DOS world is a .BAT file. In the Linux world this is called a Shell script, and typically has the ending .bash or .sh instead of .BAT</span><span class="T104"><br/></span><span class="T155">4. Just like in the BAT files you can pass parameters to the script file. IIRC in a BAT file the parameters</span><span class="T159"> </span><span class="T155">are %1 %2 etc. In a Shell script they are $1, $2 etc.</span><span class="T104"><br/></span><span class="T155">5. The bash shell is a real programming language; it has arrays, functions, if statements, loops etc etc.</span></p><p class="P7"><span class="T156">    </span><span class="T155">I can't begin to cover it; that's what the Internet is for. :)</span></p><p class="P7">6. Directories in Linux and Unix since the early 60's are separated from each other by a forward slash. In DOS/Windows Gates decided for some obscure reason to make the separator a backward slash.</p><p class="P7">7. The current directory, ie. the directory that you have changed to, in our case it is usually:</p><p class="P7"><span class="T156"> </span><span class="T158">Dealer-Version-2- </span><span class="T155">somewhere in our home directory, in Linux is represented by a dot (.) So that if you say </span><span class="T158">ls . </span><span class="T155">you will get a directory listing of the current directory. Most often if you do not specify a directory explicitely the current directory, dot, is assumed.</span></p><p class="P7"><span class="T155">8. When you type a program name on the command line, the shell looks for a file with that name in certain 'standard' locations. These standard  locations are stored in an 'environment variable' called PATH. If you want to see what they are, you can say </span><span class="T158">echo $PATH. </span><span class="T155">For security reasons, it is </span><span class="T157">highly</span><span class="T155"> </span><span class="T157">recommended that you do NOT include dot,</span><span class="T155"> in your PATH. The standard installations of Linux do not setup your PATH to include dot. So that if there is a program that you want to run, and that program is in your current directory, you need to tell the shell that this program is NOT in one of the standard places but is in 'dot'. Hence when we run </span><span class="T158">dealerv2</span><span class="T155"> we say </span><span class="T158">./dealerv2</span></p><p class="P7">9. Windows is a single user system; that is the design assumed that on a Personal Computer, there would be only one user. Unix (and Linux subsequently) have always assumed that there would be several users who would want to use the system, so that if you want to modify something that other users might want or need you need to be the System Administrator. In Linux terms this is the 'superuser' or 'root'. </p><p class="P7"><span class="T155">10. There is a command called, 'sudo' which is short for superuser_do. If you want to modify common areas on Linux you need to run the command with sudo. DealerV2 has a shell script (windows .BAT file) that will copy all the necessary DealerV2 files to a common area directory. It will then add this directory to your PATH for you. So  that if you type the command </span><span class="T158">sudo install_dealer.bash</span></p><p class="P7"><span class="T125"> </span>and give the correct password, you can subsequently run Dealer no matter what directory you are in by typing <span class="T27">dealerv2 </span>(without the dot) and the shell will find dealerv2 and start it up for you.</p><h1 class="P82"><a id="a__Appendix_II__Authors"><span/></a><a id="__RefHeading___Toc2945_3691053158"/>Appendix II. Authors</h1><p class="P63">These authors are listed in the original Dealer documentation:</p><ul><li><p class="P127" style="margin-left:0cm;"><span class="WW8Num21z0" style="display:block;float:left;min-width:0.635cm;">.</span>Original code: Hans van Staveren <a href="mailto:sater@xs4all.nl" class="Internet_20_link"><span class="Internet_20_link">(sater@xs4all.nl)</span></a> <span class="odfLiEnd"/> </p></li></ul><ul><li><p class="P128" style="margin-left:1.2469cm;"><span class="WW8Num22z0" style="display:block;float:left;min-width:0.4991cm;">.</span>Modifications such as the "loser" and "control" function by <a href="mailto:henk@ripe.net" class="Internet_20_link"><span class="Internet_20_link">Henk Uijterwaal</span></a>. <span class="odfLiEnd"/> </p></li><li><p class="P128" style="margin-left:1.2469cm;"><span class="WW8Num22z0" style="display:block;float:left;min-width:0.4991cm;">.</span>GNU random generator introduced by <a href="mailto:Bruce.Moore@akamail.com" class="Internet_20_link"><span class="Internet_20_link">Bruce Moore</span></a>. <span class="odfLiEnd"/> </p></li><li><p class="P128" style="margin-left:1.2469cm;"><span class="WW8Num22z0" style="display:block;float:left;min-width:0.4991cm;">.</span>Exhaust Mode by <a href="./../../Debian/dealer/Manual/sr007-2@dial.oleane.com" class="Internet_20_link"><span class="Internet_20_link">François Dellacherie</span></a> <span class="odfLiEnd"/> </p></li><li><p class="P128" style="margin-left:1.2469cm;"><span class="WW8Num22z0" style="display:block;float:left;min-width:0.4991cm;">.</span>pbn_to_ascii.pl post-processor by <a href="mailto:Robin.Barker@npl.co.uk" class="Internet_20_link"><span class="Internet_20_link">Robin Barker</span></a>. <span class="odfLiEnd"/> </p></li><li><p class="P128" style="margin-left:1.2469cm;"><span class="WW8Num22z0" style="display:block;float:left;min-width:0.4991cm;">.</span>cccc() and quality() functions by <a href="mailto:DSuits@silknet.com" class="Internet_20_link"><span class="Internet_20_link">Danil Suits</span></a>. <span class="odfLiEnd"/> </p></li><li><p class="P128" style="margin-left:1.2469cm;"><span class="WW8Num22z0" style="display:block;float:left;min-width:0.4991cm;">.</span>bug fixes, caching, new keywords/counts, options -2, -3, -l, by <a href="mailto:alex@magenta.com" class="Internet_20_link"><span class="Internet_20_link">Alex Martelli</span></a>. <span class="odfLiEnd"/> </p></li><li><p class="P128" style="margin-left:1.2469cm;"><span class="WW8Num22z0" style="display:block;float:left;min-width:0.4991cm;">.</span>Tricks (GIB) code by <a href="mailto:pdh13@cam.ac.uk" class="Internet_20_link"><span class="Internet_20_link">Paul Hankin</span></a> and <a href="mailto:micke.hovmoller@adacra.com" class="Internet_20_link"><span class="Internet_20_link">Micke Hovmoller</span></a>. <span class="odfLiEnd"/> </p></li><li><p class="P129" style="margin-left:1.2469cm;"><span class="WW8Num22z0" style="display:block;float:left;min-width:0.4991cm;">.</span>Dos/Windows C support, and MSVC++ project files, by <a href="./../../deal_v4/docs/paje@globalnet.co.uk" class="Internet_20_link"><span class="Internet_20_link">Paul Baxter</span></a>. <span class="odfLiEnd"/> </p></li></ul><p class="P7">Version 2.0 (2022) Author: <a href="mailto:dealerv2@outlook.com?subject=Dealer%20Version%202.x" class="Internet_20_link"><span class="Internet_20_link"><span class="T161">JG</span></span></a><a href="mailto:dealerv2@outlook.com?subject=Dealer%20Version%202.x" class="Internet_20_link"><span class="Internet_20_link"><span class="T161">M</span></span></a></p><p class="P7"><span class="T119">JGM</span> - <span class="T5">Added</span>: </p><ul><li><p class="P112" style="margin-left:0cm;"><span class="WW8Num23z0" style="display:block;float:left;min-width:0.635cm;">.</span>Bo Haglund's DDS solver for Tricks and Par calculations<span class="odfLiEnd"/> </p></li><li><p class="P112" style="margin-left:0cm;"><span class="WW8Num23z0" style="display:block;float:left;min-width:0.635cm;">.</span>Optimal Point Count evaluation <span class="odfLiEnd"/> </p></li><li><p class="P112" style="margin-left:0cm;"><span class="WW8Num23z0" style="display:block;float:left;min-width:0.635cm;">.</span>Modern Losing Trick Count <span class="odfLiEnd"/> </p></li><li><p class="P112" style="margin-left:0cm;"><span class="WW8Num23z0" style="display:block;float:left;min-width:0.635cm;">.</span>François Dellacherie Enhanced Shape processing<span class="odfLiEnd"/> </p></li><li><p class="P112" style="margin-left:0cm;"><span class="WW8Num23z0" style="display:block;float:left;min-width:0.635cm;">.</span>Title and Improvements to various reports <span class="odfLiEnd"/> </p></li><li><p class="P112" style="margin-left:0cm;"><span class="WW8Num23z0" style="display:block;float:left;min-width:0.635cm;">.</span>Export function, and Scripting of predeals <span class="odfLiEnd"/> </p></li><li><p class="P112" style="margin-left:0cm;"><span class="WW8Num23z0" style="display:block;float:left;min-width:0.635cm;">.</span>Scripting values and keywords in the Input File <span class="odfLiEnd"/> </p></li><li><p class="P112" style="margin-left:0cm;"><span class="WW8Num23z0" style="display:block;float:left;min-width:0.635cm;">.</span>CSV Report action, and Print Report action<span class="odfLiEnd"/> </p></li><li><p class="P112" style="margin-left:0cm;"><span class="WW8Num23z0" style="display:block;float:left;min-width:0.635cm;">.</span>Doubled and Redoubled contracts for both score and evalcontract<span class="odfLiEnd"/> </p></li><li><p class="P112" style="margin-left:0cm;"><span class="WW8Num23z0" style="display:block;float:left;min-width:0.635cm;">.</span>Score calculation mods <span class="odfLiEnd"/> </p></li><li><p class="P112" style="margin-left:0cm;"><span class="WW8Num23z0" style="display:block;float:left;min-width:0.635cm;">.</span>Numbers with decimal points, aka 'dotnums' for use in ltc, cccc, quality,  hcp &amp; other counts <span class="odfLiEnd"/> </p></li><li><p class="P112" style="margin-left:0cm;"><span class="WW8Num23z0" style="display:block;float:left;min-width:0.635cm;">.</span>Bug fixes to altcount, and evalcontract<span class="odfLiEnd"/> </p></li><li><p class="P112" style="margin-left:0cm;"><span class="WW8Num23z0" style="display:block;float:left;min-width:0.635cm;">.</span>Updated the RNG to GNU rand48 <span class="odfLiEnd"/> </p></li><li><p class="P112" style="margin-left:0cm;"><span class="WW8Num23z0" style="display:block;float:left;min-width:0.635cm;">.</span>Modified the seeding method to use the Linux kernel entropy pool.<span class="odfLiEnd"/> </p></li><li><p class="P112" style="margin-left:0cm;"><span class="WW8Num23z0" style="display:block;float:left;min-width:0.635cm;">.</span>Added ability to specify seed value in the Input File. <span class="odfLiEnd"/> </p></li><li><p class="P112" style="margin-left:0cm;"><span class="WW8Num23z0" style="display:block;float:left;min-width:0.635cm;">.</span>Added the Bucket Frequency functionality (bktfreq)<span class="odfLiEnd"/> </p></li><li><p class="P112" style="margin-left:0cm;"><span class="WW8Num23z0" style="display:block;float:left;min-width:0.635cm;">.</span>Added UserEval functionality. To allow metrics not in provided for in Dealer itself.<span class="odfLiEnd"/> </p></li><li><p class="P121" style="margin-left:0cm;"><span class="WW8Num23z0" style="display:block;float:left;min-width:0.635cm;">.</span>Added ability to use Richard Pavlicek's library of 10 Million plus <span class="T21">solved</span> deals as input source.<span class="odfLiEnd"/> </p></li></ul><p class="P7"> </p><p class="P7"><span class="T103">JGM</span> - <span class="T5">Removed</span>: </p><ul><li><p class="P112" style="margin-left:0cm;"><span class="WW8Num23z0" style="display:block;float:left;min-width:0.635cm;">.</span>DOS/Windows code, <span class="odfLiEnd"/> </p></li><li><p class="P112" style="margin-left:0cm;"><span class="WW8Num23z0" style="display:block;float:left;min-width:0.635cm;">.</span>GIB library code, (GIB double dummy analysis remains.)<span class="T173"> RP Library function replaces this.</span><span class="odfLiEnd"/> </p></li><li><p class="P112" style="margin-left:0cm;"><span class="WW8Num23z0" style="display:block;float:left;min-width:0.635cm;">.</span>Exhaust mode code, <span class="odfLiEnd"/> </p></li><li><p class="P112" style="margin-left:0cm;"><span class="WW8Num23z0" style="display:block;float:left;min-width:0.635cm;">.</span>zero52[NRANDVALS] array and code.<span class="odfLiEnd"/> </p></li></ul><p class="P7"><span class="T103">JGM</span> - <span class="T5">Wrote:</span> </p><ul><li><p class="P113" style="margin-left:0cm;"><span class="WW8Num24z0" style="display:block;float:left;min-width:0.635cm;">.</span>Brief manual on operation of Dealer for code maintainers. <span class="odfLiEnd"/> </p></li></ul><ul><li><p class="P112" style="margin-left:0cm;"><span class="WW8Num23z0" style="display:block;float:left;min-width:0.635cm;">.</span>Users Guide -- This is it!<span class="odfLiEnd"/> </p></li></ul><p class="P7"> </p><h1 class="P82"><a id="a__Appendix_III__Copyright"><span/></a><a id="__RefHeading___Toc6770_3691053158"/>Appendix III. Copyright</h1><p class="P63">Original Copyright Notice from Hans van Staveren</p><p class="P55">Hans van Staveren's original README file</p><p class="P7">This program is hereby put in the public domain. Do with it whatever you want, but I would like you not to redistribute it in modified form without mentioning the fact of modification. I will accept bug reports and modification requests, without any obligation of course, but fixing bugs someone else put in is beyond me. </p><p class="P7">When you report bugs please mention the version number in the source files, and preferably send context diffs if you changed anything. I might put in your fixes, and distribute a new version someday. </p><p class="P7">I would prefer if you did *not* use this program for generating hands for tournaments. I have not investigated the random number generation closely enough for me to be comfortable with that thought. </p><p class="P7">(Note: random number generation has been significantly improved since the original release, for which this disclaimer was written; check the source code for more details). </p><p class="P7"><span class="T125">        </span>Hans van Staveren</p><p class="P7"><span class="T125">        </span>Amsterdam,  Holland</p><h2 class="P86"><a id="a__Copyright_Version_2_0"><span/></a><a id="__RefHeading___Toc6772_3691053158"/>Copyright Version 2.0</h2><p class="P63">The code developed by JGM is copyright JGM (2022<span class="T173">, 2023</span>) and released under the GNU Public License Version 3 or later at your option. </p><p class="P63">Copyright (C) 2022, J. G. Morse Richmond B.C. Canada, V7A2R1</p><p class="P63"> </p><p class="P63"><span class="T125">   </span>The portions of this  program developed by JG Morse are free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</p><p class="P63"><span class="T125">   </span>This program is distributed in the hope that it will be useful,  but WITHOUT ANY WARRANTY; without even the implied warranty of  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.</p><p class="P63">You should have received a copy of the GNU General Public License along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</p><p class="P63"> </p><h1 class="P82"><a id="a__Appendix_IV__The_KnR__cccc__Agorithm_Explained"><span/></a><a id="__RefHeading___Toc7837_1294319977"/>Appendix IV. The KnR (cccc) Agorithm Explained</h1><p class="P64">Jeff Goldsmith, who has implemented the KnR Four C's algorithm by Kaplan and Reubens in both Perl and C, has also provided an easy to read text version so that you don't have to read through the code to understand what it does.</p><p class="P63"><span class="T84">I have included the text version here, because now that Jeff has passed away, I am not sure how long his web site:</span><span class="T100"> https://www.jeff-goldsmith.com</span><span class="T84"> will continue to be available.</span></p><p class="P64">Here<span class="T187">,</span> courtesy of Jeff Goldsmith<span class="T187">,</span> is the KnR Algorithm in English.</p><p class="P5">Recapping the K&amp;R algorithm from the October '82 Bridge World pp. 21-23.</p><p class="P69"> </p><p class="P69">Protected* high cards:</p><p class="P5"><span class="T150">    </span>A = 3, K = 2, Q = 1 </p><p class="P5">*King protected at least once; Q protected at least twice; Ace needs no protection</p><p class="P5">See also adjustments to short honors section below, for Qxx, doubleton Q etc.</p><p class="P69">Shortness:</p><p class="P69"><span class="T150">    </span>void = 3, singleton = 2, doubleton = 1 Discount first doubleton</p><p class="P5"><span class="T150">    </span>Note 1: Every stiff is counted as 2, whether stiff A,K,Q,J or x.</p><p class="P5"><span class="T150">    </span>Note 2: Every 2nd and/or 3rd doubleton is counted as 1, whether xx or AK.</p><p class="P5"> </p><p class="P69">4333 = -.5</p><p class="P69">Suit quality:</p><p class="P5"><span class="T150">    </span>(number of cards in suit) * (4321 count)/10 </p><p class="P69"><span class="T150">    </span>Adjustments: (added to 4321 count before dividing by 10 )</p><p class="P69"><span class="T150">        </span>Seven card suits:  + 1 for missing Q or J<span class="T146">(1)</span><span class="T162"> </span><span class="T163">(+1 max )</span></p><p class="P69"><span class="T150">        </span>Eight card suits:  + 2 for missing Q or  +1 for missing J (<span class="T126">+2 max</span>)</p><p class="P5"><span class="T150">        </span>Nine or longer:    + 2 for missing Q <span class="T126">and +1 for missing J (+3 max)</span></p><p class="P69"><span class="T150">        </span>Six card suits or shorter:</p><p class="P69"><span class="T150">            </span>Ten with two or more honors: 1</p><p class="P69"><span class="T150">            </span>Ten with the Jack:           1</p><p class="P5"><span class="T150">            </span>Other tens:                 .5 (<span class="T131">i.e. Tens in a </span><span class="T127">6</span><span class="T131"> card or shorter suit?)</span></p><p class="P5"><span class="T150">                </span><span class="T131">(modifier about six-card suits misplaced?)</span><span class="T147">(2)</span></p><p class="P69"><span class="T150">            </span>Nine with the ten:   .5 or <span class="T131">(only if the 9 is in a 6 card or less suit)</span></p><p class="P69"><span class="T150">            </span>Nine with two honors:.5 or<span> ("Honor" means A, K, or Q. </span></p><p class="P69"><span class="T150">            </span>Nine with the eight: .5</p><p class="P69">short honors:</p><p class="P69"><span class="T150">    </span>stiff king = .5 (i.e. unprotected K = .5 ; it's worth more than stiff x )</p><p class="P5"><span class="T150">    </span>doubleton queen if with A or K = .5 ;   Qx = 0.25 (Qx, QT, QJ)</p><p class="P69"><span class="T150">    </span>stiff Q = 0   </p><p class="P69">lower honors:</p><p class="P69"><span class="T150">    </span>Queen if without ace or king and suit is 3 or longer = -.25 i.e. Q worth 1.75.</p><p class="P69"><span class="T150">    </span>J with exactly two higher honors = .5</p><p class="P69"><span class="T150">    </span>J with exactly one higher honor  = .25</p><p class="P69"><span class="T150">    </span>doubleton queen = .25</p><p class="P5"><span class="T150">    </span>Ten under precisely two higher or with 9 and under precisely one higher = .25</p><p class="P69">Bottom line:</p><p class="P5"><span class="T150">    </span>1H, 1S, 1NT opening optional at 12.0 mandatory   12.5                      </p><p class="P5"><span class="T150">    </span>1C, 1D      opening optional at 13.0 mandatory   13.5                    </p><p class="P69"><span class="T150">    </span>2C with major                   22.0</p><p class="P69"><span class="T150">    </span>2C with minor                   24.0</p><p class="P67"><span class="T126">Source code at</span> http://www.jeff-goldsmith.org/cgi-bin/knr.cgi (see knr.pl in Docs)</p><h2 class="P86"><a id="a__Additional_Comments_by_JGM_re_KnR_Algorithm"><span/></a><a id="__RefHeading___Toc17457_1245427423"/>Additional Comments by JGM  re KnR Algorithm </h2><p class="P7">(1) The explanation given here is correct. The code as published by Jeff would give the extra point only if <span class="T21">both</span><span class="T24"> the Queen and Jack were missing. Fixed by JGM in the knr_JeffGoldsmith.pl file in the docs directory.</span></p><p class="P7"> </p><p class="P7">(2) The text is ambiguous. </p><p class="P7">&lt;quote&gt;<span class="T70">A suit quality count for Tens was added: 1 (before multiplication) when the ten was under two or more honors, or when it was with the Jack -- but only in a suit of six cards or fewer; any other Ten was counted 0.5. The Nine spot was not ignored: in a suit of 6 cards or fewer it would count 0.5 when under the Ten or under any two honors, or accompanied by the Eight spot.</span> &lt;/quote&gt; </p><p class="P7">The code as published by Jeff, assumes any Ten at all.  Assuming that the above applies to any Ten at all, even in a 7+ suit, does not seem correct to me. A Ten in a 4 or 5 card suit has some value. A Ten in a 7 card suit likely adds very little. R. Pavlicek played with Kaplan; his website agrees that only Tens in a suit of six cards or fewer should count.</p><p class="P7"> </p><p class="P7">(3) What follows is some of the text from the original article, along with some comments or discussion by JGM. The actual text is between &lt;quote&gt; ... &lt;/quote&gt; tags. The rest is by JGM.</p><p class="P7">1. Discussing 'useless lower honors' in long suits for the purposes of Suit Quality calculation:</p><p class="P7"><span class="T125"> </span>&lt;quote&gt;</p><p class="P7"><span class="T125">     </span><span class="T70">A 7 card suit would count 1 point extra (before multiplication by .7 for length) if either minor honor were missing; an 8 card suit, up to 2 extra points for missing honors and an even longer suit, up to  3 extra.</span></p><p class="P7">&lt;/quote&gt;</p><p class="P7">Notice that for a 7 card suit, even if it has the Queen, but is missing the Jack it still gets an extra point credit. The orginal code by Jeff, would give the missing credit only if both Queen and Jack were missing. Fixed by JGM in 2022.</p><p class="P7">2. When discussing this example hand,</p><p class="P7"><span class="T125">         </span>AJTxxx KT9x xx x,</p><p class="P7">originally valued as "<span class="T70">just under 13</span>" (actually 12.95 -- JGM -- but see note 4 below)</p><p class="P7">&lt;quote&gt;</p><p class="P56">For later in the auction, in responding and rebidding, distributional hands like the example above</p><p class="P7"><span class="T70">may greatly increase or decrease in value. The </span><span class="T74">3 points in distribution </span><span class="T70">for that singleton and doubleton, 3 non-losers, will be subtracted by the computer on a totally misfitting auction; and the distribution count may be as much as doubled when the auction reveals a good fit. When supporting partner's suit with three or more trumps, the computer adds an extra 50% to the short suit count if sure of an eight-card fit, and adds an extra 100% when sure of a better fit. When it is partner who has supported, the extra credit is 25% for an assured eight-card fit, 50% for nine, 100% for huge fits.</span></p><p class="P56">Responder to that minimum one-spade opening gives a limit raise to three spades. The computer now</p><p class="P56">values opener's hand as close to 16, and bids on to game. Quite right too!</p><p class="P7">&lt;/quote&gt;</p><p class="P7">JGM Comments:</p><p class="P7">1. Regarding the non supporting hand:</p><p class="P7"><span class="T125"> </span>Assuming the LR shows 4 card support, there is a 10 fit, so the 2 points for the stiff club become 4 and the hand is now worth 14.95. I don't see 16. (but see note 4 below)</p><p class="P7">There are several questions that arise out of that statement regarding the exact details of how to treat doubletons and so on. They will likely never be answered.</p><p class="P7">2. Regarding supporting hands:</p><p class="P7">It sounds like when there is an 8 fit, with 3 <span class="T21">or more trumps</span> (50% increase), the computer would give a hand with two doubletons, an extra half point, (2nd doubleton now worth 1.5) and a hand with a stiff would get an extra point (stiff now worth 3 points).</p><p class="P7">When there is a 9+ fit (100% increase) a stiff would be worth 4 points and a second doubleton would be worth two. If there were more than one stiff (a 6511 or 7411 hand say) then BOTH stiffs would be upgraded to 4 points.</p><p class="P7"> </p><p class="P7">3. From the text it is the length of the fit that matters most, not the number of trumps in the supporting hand. An 8 fit with 4 trumps (4=4 fit), gets the same increase as an 8 fit with 3 trumps (5=3 fit). Presumably a 9 fit with 4 trumps (5=4 fit) would get the same as a 9 fit with 3 (6=3 fit). This is quite different from everyone else where it is usually the number of trumps in the supporting hand that determines how much the supporting hand can count for shortness.</p><p class="P7"> </p><p class="P7">4. The text says to ignore the first doubleton; and the code provided by Jeff and others does that in a way, by arbitrarily subtracting 1 point. JGM is more careful, only adding the point if there are two doubletons. But the above text reveals another possibility: that the 'first doubleton' statement should only apply if there are no other shortness points. That is a single doubleton in a hand that also includes a stiff or a void should count for 1 pt. The example hand in (2) above would now in fact have 3 shortness points, hence an initial value of 13.95, and the 100% increase would in fact boost its value to 16.95. The JGM version of the KnR code therefore counts the first doubleton if there is another shortness in the hand.</p><p class="P49"> </p><h1 class="Heading_20_1"><a id="a__Appendix_V__R__Pavlicek's_Library_of_Solved_Deals_"><span/></a><a id="__RefHeading___Toc7506_3077954580"/><span class="T178">Appendix V. </span>R. Pavlicek's Library of Solved Deals.</h1><p class="P91">The complete library is available on Github as part of the<span class="T166"> </span><span class="T167">https://github.com/dealerv2/Show_RP_DB</span> repo. But because of Github's limit of a maximum of 100MB per file, the Library has been split up into 3 pieces which the user will need to splice together with this command from the linux command line:</p><p class="P77">cat rpdd_aa.zrd rpdd_ab.zrd rpdd_ac.zrd &gt;rpdd.zrd</p><p class="P70">The complete Library is approximately 240MB.</p><p class="P70">Alternatively you can download the ZIP archive from RP's web site and create the Library yourself using the code utilities provided by RP. These utilities are MS-DOS executable and batch files and will only run on MS-DOS, not on Linux.</p><p class="P72">To get RP's ZIP archive which allows you to create your own copy of the Library and also some utilities for using it, visit <span class="T166">http://www.rpbridge.net/rput.htm.</span></p><p class="P70">If you download the ZIP file you will find inside a file called <span class="T7">rsd.txt </span><span class="T165">This file is reproduced below and explains the format of the library and how to build your own copy.</span></p><p class="P71"> </p><p class="P92"><span class="T165">The</span><span class="T174"> </span><span class="T165">Github repo </span><span class="T175">also </span><span class="T165">contains C code, written by JGM, that will parse this Library and output each deal in 'pbn' format. See </span><span class="T168">https://github.com/dealerv2/Show_RP_DB</span></p><p class="P75"> Each record in the Library is 23 bytes; 13 to record the cards in the deal, and 10 to record the 20 DD results.</p><p class="P76">Here is RP's file explaining how to use his Library of solved deals.</p><p class="Standard">-------------------</p><p class="Standard">Random Solved Deals</p><p class="Standard">-------------------</p><p class="Standard">    *** Alert! This resource is for computer savvy persons ***</p><p class="Standard">    *** with programming experience. You know who you are! ***</p><p class="Standard">In the early 2000s I created a database of 10,485,760 random deals.</p><p class="Standard">That was easy. The daunting task was to solve each deal 20 times to</p><p class="Standard">determine the double-dummy makes for each hand in each strain, which</p><p class="Standard">required almost <span class="T23">_two years_ </span>of computer time.</p><p class="Standard"> </p><p class="Standard">As a courtesy to other programmers and data addicts, these deals and</p><p class="Standard">double-dummy results are available for download in the file <span class="T5">rsd.zip,</span></p><p class="Standard">which contains these files:</p><p class="Standard">rsd.txt<span> </span><span> You are reading it</span></p><p class="Standard">rpdd.zdd<span> Double-dummy results (104,857,600 bytes)</span></p><p class="Standard">rsd.bat<span> </span><span> Batch file to start:</span></p><p class="Standard">xrsd.exe<span> Program to create the random deals</span></p><p class="Standard"> </p><p class="Standard">Unzip the four files into a separate folder and open (run) rsd.bat.</p><p class="Standard">Answer the prompt of how many deals to create, then type Y (yes).</p><p class="Standard"> </p><p class="Standard">A new file rpdd.zrd will be built in this structure:</p><p class="Standard">===== ZRD Format ====== 23 bytes (184 bits) per record =====</p><p class="Standard">Bitmap<span>     Value</span><span> Coding</span></p><p class="Standard">0-1<span>     SA</span><span> </span><span> 00=West  01=North  10=East  11=South</span></p><p class="Standard">2-3<span>     SK</span><span> </span><span> 00=West  01=North  10=East  11=South</span></p><p class="Standard">...<span>     ...</span><span> </span><span> ...</span></p><p class="Standard">22-23<span>     S3</span><span> </span><span> 00=West  01=North  10=East  11=South</span></p><p class="Standard">24-25<span>     S2</span><span> </span><span> 00=West  01=North  10=East  11=South</span></p><p class="Standard">26-103<span>     ...</span><span> </span><span> Same for other suits in order H D C</span></p><p class="Standard">104-107<span>     West</span><span> Tricks makable in NT (0-13)</span></p><p class="Standard">108-111<span>     North</span><span> Tricks makable in NT (0-13)</span></p><p class="Standard">112-115<span>     East</span><span> Tricks makable in NT (0-13)</span></p><p class="Standard">116-119<span>     South</span><span> Tricks makable in NT (0-13)</span></p><p class="Standard">120-183<span>     ...</span><span> </span><span> Same for each suit in order S H D C</span></p><p class="Standard">============================================================</p><p class="Standard">If you created the full database, rpdd.zrd will be 241,172,480 bytes</p><p class="Standard">(23*10,485,760). To verify its integrity, right-click on the file and</p><p class="Standard">from the menu select "CRC SHA" --&gt; SHA-1. It should match:</p><p class="Standard">    A5E35BDBED32D2A1FAA8D450216E529701284994</p><p class="Standard">Created by: Richard Pavlicek</p><p class="Standard">E-mail: richard@rpbridge.net</p><p class="Standard">Web site: http://rpbridge.net</p></body></html>